/client/findAllUnitAgentNumberOnly,No Input Parameters," def employeeQuery = ""SELECT a.agent_number "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.leader_number = :agentNumber "" + ""AND a.agent_type IN (${getAgentType(""Individual"",""${channel}"")}) "" + ""AND a.terminated_date IS NULL "" "
,," def leaderQuery = ""SELECT a.agent_number "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.agent_number = :agentNumber "" + ""AND a.terminated_date IS NULL "" "
,," def query = ""SELECT agent.* "" + ""FROM ( "" + sourceQuery + "") as agent "" "
/aobInterceptor/AobSqlAdapter/checkAAJIValidforAgentAfterHourStatement,No Input Parameters," String query = ""SELECT a.aajiexamexpireddate >= current_date as isvalidexpireddate,  a.aajiexamdate >= current_date + 5 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT)  and a.aajiexamdate < current_date + 17 as isvalidexamdate  FROM aobaajiexamschedule a  left join ref_aajiquotacount b  on a.aajiexamscheduleid=b.aajiexamscheduleid  where a.aajiexamscheduleid=$params.aajiexamscheduleid"" "
/base/Approval/myTask,No Input Parameters,No query
/proposal/NewOds/findLastUpdate,"""salesforceId"":pruforceId,""agentCode"":agentNumber"," def query = ""SELECT MAX(time_tracking) as latest FROM monitoring.execution_status WHERE table_name IN ('SZAPD') AND step_status = 'DONE'"" "
/aobConversion/AobSqlAdapter/updateWidgetSortingConfigStatement,No Input Parameters," def query = ""UPDATE mobilefirst.user_widget_toggle SET sort_value = '$params.sortValue' WHERE user_id = '$params.userId' AND widget_id = '$params.widgetId'"" "
/aobConversion/AobSqlAdapter/getAAJIExamCityAfterHourStatement,No Input Parameters," String query = ""SELECT DISTINCT(a.aajiexamlocation)  FROM aobaajiexamschedule a  left join ref_aajiquotacount b  on a.aajiexamscheduleid=b.aajiexamscheduleid  where aajiexamdate > current_date + 4 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT)  and aajiexamdate < current_date + 17  and (b.reserved is null or cast(b.reserved as int)<a.aajiexamquota )"" "
/security/Request/deleteRequest,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/getFastStartCanStm,"""npanumber"":npa"," select a.faststarttype, b.faststartlocation, b.faststartscheduleid, b.faststartcoursecode, b.faststartcourse, b.faststartstartdate, b.faststartenddate, b.faststartstarttime, b.faststartendtime from aobfaststartregistration a inner join aobfaststartschedule b on a.faststartscheduleid = b.faststartscheduleid where a.aobfaststartregistrationid = (select max(aobfaststartregistrationid) from aobfaststartregistration "
/client/getTotalClientByAgentPD,"""agentNumber"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber"," String query = ""SELECT CAST(COUNT(DISTINCT(p.owner_number)) AS varchar (20)) AS totalClient FROM ods.policy p n INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN :queryUnit OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit)))"" "
/aobInterceptor/AobSqlAdapter/getDocByNPAStatement,"""npanumber"":npa"," String query = ""select b.npanumber, c.documentname, encode(a.documentfile,'base64') n from aobcandidatesupportingdocument a left join aobcandidate b n on a.candidateid = b.candidateid left join aobsupportingdocument c n on a.documentid = c.documentid where b.npanumber='$params.npanumber'"" "
/contest/Batch/runProcessTest,No Input Parameters,No query
/followup/findTotalPolicyHolderPendingRequirementUnit,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/commonUtils/Approval/findApprovalPropertiesByUri,No Input Parameters,No query
/contest/ContestMaster/findContestMaster,No Input Parameters,No query
/contest/MyContest/findAllContestCompetition,"""salesforceId"":salesforceId,""contestCode"":contestCode,""agentNumber"":agentNumber"," select a.agent_number, a.ranking from contest.result a where a.contest_code='${data.contestCode}' and a.ranking between ((select ranking from contest.result where contest_code='${data.contestCode}' and agent_number='${data.agentNumber}')-2) and ((select ranking from contest.result where contest_code='${data.contestCode}' and agent_number='${data.agentNumber}')+2) order by a.ranking """""" "
/newsUpdateNew/BankUnit/getBankUnit,No Input Parameters,No query
/production/Newods/findAllAgentTypeMonthly,"""agentNumber"":agentNumber,""leaderNumber"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber,""channelType"":channelType"," def query = """""" SELECT ag.agent_type as key, sc.desc1 as value FROM (SELECT DISTINCT agent.agent_type FROM (SELECT ah.agent_number FROM ods.agent_hierarchy as ah LEFT JOIN (SELECT production_agent.agent_number FROM ods.production_agent WHERE (CASE WHEN '${periodMonth}' is not null THEN (production_agent.period_month LIKE '${periodMonth}' AND production_agent.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_agent.period_year LIKE '${periodYear}' END) ) prod ON prod.agent_number = ah.agent_number WHERE (ah.leader_number = :agentNumber AND ah.agent_type_original IN (${getAgentType(""Individual"",""${channel}"")})) $agentLeader UNION SELECT production_agent.agent_number FROM ods.production_agent WHERE (CASE WHEN '${periodMonth}' is not null THEN (production_agent.period_month LIKE '${periodMonth}' AND production_agent.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_agent.period_year LIKE '${periodYear}' END) AND production_agent.leader_number = :agentNumber ) AS agents LEFT JOIN ods.agent ON agent.agent_number = agents.agent_number ) AS ag LEFT JOIN ods.system_code sc on sc.key2 = ag.agent_type WHERE sc.key1 = 'AGENT_TYPE_CHANNEL' """""" "
/aobInterceptor/AobSqlAdapter/getCountBpmProcessStatement,"""npanumber"":npa"," String query = ""select count(*) from aobbpmprocesslogstatus where npanumber = '$params.npanumber'"" return queryService.executeQuery(query) } "
/newsUpdateNew/News/findAgentType,No Input Parameters,No query
/client/findStatusBirthdayListNovember,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =11 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/client/findStatusBirthdayListAugust,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =8 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/pushNotif/registerDevice,"""userid"":userid,""deviceName"":deviceName,""token"":tokenRegistered,""uuid"":uuid,""osType"":osType",No query
/followup/findUserIdAfterDueDateUnit,No Input Parameters," def query = ""SELECT Distinct p.agent_number as userId "" + ""FROM ods.policy p "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.policy_status = 'IF' "" + ""AND p.billing_channel = 'A' "" + ""AND sc.key1 like 'POLICY_STATUS' "" "
/base/MenuMobile/editMenu,No Input Parameters,No query
/followup/findTotalRecruitment,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM pruaob.pushnotification pn "" + ""WHERE pn.userid = :agentNumber and pn.opened is FALSE"" "
/aobConversion/AobSqlAdapter/getListPendingDocStatement,No Input Parameters," String query = ""select description from aobdescriptionstatus where statusapplication = '$params.statusapplication'"" "
/contest/Base/list,No Input Parameters," def query = """"""select * from $tableName"""""" return queryService.executeQueryTransform(query) } } "
/aobInterceptor/AobSqlAdapter/getCountAgentJourney,"""npanumber"":npa"," String query = ""select count(*)  from aobapplicationpackstatus  "
, select candidateid  from aobcandidate  ,
/aobConversion/AobSqlAdapter/getSecurityQuestion,No Input Parameters," String query = ""SELECT aobsystemcodeid, aobitem, aobdescriptionind  FROM aobsystemcode  "
/commission/Lifeasia/call,"""objid"":""MSINQCOMM"",""agntsel"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber"," query = ""SELECT campaign_code, provision FROM mobilefirst.bonus3_plus WHERE valid_flag = '1' and current_date between period_from and period_to "" "
/client/findBirthdayListNovember,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 11 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/base/Request/editRequest,No Input Parameters,No query
/contest/ContestMaster/saveWithNoApproval,No Input Parameters,No query
/contest/ContestParameter/generate,No Input Parameters,No query
/auth/User/getCurrentUser,No Input Parameters,No query
/followup/findAgentTypeBillingPendingRequirementPD,No Input Parameters," def query = """""" SELECT a.agent_type FROM ods.agent a INNER JOIN ( SELECT b.agent_number FROM ods.follow_up a LEFT JOIN ods.policy b ON a.policy_number = b.policy_number LEFT JOIN ods.client c ON b.owner_number = c.client_number LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' LEFT JOIN ods.alteration e ON a.alteration_number = e.alteration_number AND a.policy_number = e.policy_number LEFT JOIN ods.system_code f ON b.product_code = f.key2 AND f.key1 = 'PRODUCT' WHERE (b.agent_number IN (:queryUnit) OR (b.agent_number IN :imPruList AND b.reff_agent IN (:queryUnit))) AND b.valid_flag = '1' AND a.follow_up_status IN ('L','M','P','O') AND e.department = :department AND e.alteration_status IN ('O','F') AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop GROUP BY b.agent_number ) AS t ON a.agent_number = t.agent_number GROUP BY a.agent_type """""" "
/client/findTwoMonthsPreviousBirthday,"""agentNumber"":agentNumber,""page"":page,""size"":size,""salesforceId"":pruforceId,""agentCode"":agentCode"," String query = "" SELECT DISTINCT c.client_number AS client_number,c.client_name AS client_name, n CONCAT(address1,' ',address2,' ',address3,' ',address4,' ',address5) AS address, c.client_status AS client_status, n to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old n FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE n DATE_PART('month', c.date_of_birth) = Extract(month from CAST(CURRENT_DATE AS DATE) - Interval '2 Month') AND n p.agent_number =:agentNumber LIMIT CAST(${max} AS NUMERIC ) OFFSET CAST(${min} AS NUMERIC)"" "
/client/findAgentTypeBirthdayTodoPD,"""salesforceId"":salesforceId,""agentCode"":agentCode,""agentNumber"":agentCode,""page"":page,""size"":size,""month"":month"," whereClause = ""WHERE c.date_of_birth IS NOT NULL "" } else if (params.month.toString().equalsIgnoreCase(""15"")){ whereClause = "" WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) "" } "
,," String query = """""" select agent_type from ( select distinct p.agent_type from ( SELECT p1.agent_number, policy_number, c1.client_name, a1.agent_type FROM ods.policy p1 JOIN ods.agent a1 on p1.agent_number = a1.agent_number JOIN ods.client c1 on a1.client_number = c1.client_number WHERE (p1.agent_number IN :queryUnit OR (p1.agent_number IN :imPruList AND p1.reff_agent IN (:queryUnit))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.beneficiary b on b.policy_number = p.policy_number join ods.client c on c.client_number = b.client_number join ods.system_code sc on sc.key2 = 'BN' AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} union select distinct p.agent_type from ( SELECT p1.agent_number, policy_number, c1.client_name, a1.agent_type FROM ods.policy p1 JOIN ods.agent a1 on p1.agent_number = a1.agent_number JOIN ods.client c1 on a1.client_number = c1.client_number WHERE (p1.agent_number IN :queryUnit OR (p1.agent_number IN :imPruList AND p1.reff_agent IN (:queryUnit))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.client_role cr on cr.policy_number = p.policy_number join ods.client c on c.client_number = cr.client_number join ods.system_code sc on sc.key2 = cr.client_role_code AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} group by agent_type ) tmp group by agent_type LIMIT CAST(${max} AS NUMERIC ) OFFSET CAST(${min} AS NUMERIC) """""" "
/newsUpdateNew/MobileSecurityInterceptor/before,No Input Parameters,No query
/auth/MenuMobile/saveMenu,No Input Parameters,No query
/contest/Base/get,No Input Parameters, select * from $tableName 
/base/Request/deleteRequest,No Input Parameters,No query
/followup/findFilterUnit,No Input Parameters," def query = ""SELECT DISTINCT(agent_type) as name, agent_type as value "" + ""FROM ods.agent "" + ""WHERE leader_number = :agentNumber "" + ""AND agent_type IN (${getAgentType(""Individual"",""${channel}"")}) "" + ""AND terminated_date IS NULL "" + ""UNION "" + ""SELECT DISTINCT(agent_type) as name, agent_type as value "" + ""FROM ods.agent "" + ""WHERE agent_number = :agentNumber "" + ""AND terminated_date IS NULL "" "
/corp/BannerApproval/findAllTaskBannerApproval,No Input Parameters,No query
/newods/AgentHierarchy/findAllTotalPersistencyUnit ,No Input Parameters," select agent_number, total_prscty_api as total from ods.persistency where agent_number in ${queryService.convertListToString(data.agentNumberList)} and prscty_code = 'U' order by agent_number """""" return queryService.executeQueryTransform(query) } "
/base/AgentPattern/getAgentPattern,No Input Parameters,No query
/contest/ContestMaster/findContestMasterApprovalHistory,No Input Parameters,No query
/production/Newods/findUnitPdYearly,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentCode"":agentCode,"," def query = """""" select CAST(sum(total_ape_02) AS varchar(20)) AS total_ape, CAST(sum(total_api_02) AS varchar(20)) AS api, CAST(sum(total_saver_02) AS varchar(20)) AS saver, CAST(sum(total_topup_02) AS varchar(20)) AS topup, CAST(sum(total_spi_02) AS varchar(20)) AS spi from ods.production_leader where leader_number = :agentNumber AND CASE WHEN '${periodMonth}' is not null THEN (production_leader.period_month LIKE '${periodMonth}' AND production_leader.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_leader.period_year LIKE '${periodYear}' END """""" "
/newsUpdateNew/NewsType/deleteNewsType,No Input Parameters,No query
/performanceMonitoring/PromotionChallenge/findMonitoringDescription,"""id"":id",No query
/base/AgentType/getAgentType,No Input Parameters,No query
/contest/ContestParameter/getContestDataFromOds,No Input Parameters,No query
/aobInterceptor/AobSqlAdapterX/getEmailExisting,No Input Parameters," String query = ""SELECT candidateemail ,candidatecellularno1  FROM aobcandidate "
/newods/General/findSystemCodeByKey1 ,No Input Parameters," select key2, desc1, desc2 from ods.system_code "
/newods/Production/findAllApiPolicyDetail1,No Input Parameters,No query
/bonus/Lifeasia/status,"""salesforceId"":salesforceId,""agentCode"":agentCode,""agentNumber"":agentCode"," query = ""SELECT campaign_code, cast(extract(month from period_from) as varchar) as month, cast(extract(year from period_from) as varchar) as year n FROM mobilefirst.bonus3_plus WHERE valid_flag = '1' and current_date between period_from and period_to "" "
/security/Role/getService,No Input Parameters,No query
/corp/BannerType/postBannerType,No Input Parameters,No query
/persistency/Newods/findAllPolicyStatusCurrent,"""agentNumber"":agentNumber,""salesforceId"":salesforceId,""agentCode"":agentCode,""period"":period"," query = """""" SELECT ps.policystatus as key, sc.desc1 as value FROM (SELECT DISTINCT p.policy_status as policyStatus FROM ods.policy p WHERE p.policy_number IN (SELECT d.policy_no FROM ${table} d WHERE d.agent_number = :agentNumber ${period} ) GROUP BY policyStatus) as ps LEFT JOIN ods.system_code sc on sc.key2 = ps.policyStatus WHERE sc.key1 = 'POLICY_STATUS' """""" "
,," query = """""" SELECT cast('DEC' as varchar) as key, cast('Penurunan API' as varchar) as value FROM ${table} d, ods.policy po WHERE d.agent_number = :agentNumber AND total_api_decreased <> 0 AND d.policy_no = po.policy_number ${period} GROUP BY d.agent_number UNION SELECT cast('LAP' as varchar) as key, cast('Lapsed API' as varchar) as value FROM ${table} d, ods.policy po WHERE d.agent_number = :agentNumber AND total_api_lapsed <> 0 AND d.policy_no = po.policy_number ${period} GROUP BY d.agent_number """""" "
/contest/ContestReport/result,No Input Parameters," final String query = ""SELECT cr.ranking, cr.agent_number, cs.nett_api, cs.persistency, cs.total_case, cs.total_direct_agent, cs.total_direct_am "" + ""FROM contest.contest_result cr "" + ""FULL OUTER JOIN contest.contest_summary cs "" + ""ON cr.contest_code = cs.contest_code AND cr.agent_number = cs.agent_number "" + ""WHERE cr.contest_code = '$contestCode' "" + ""ORDER BY cr.ranking ASC"" "
/approval/startAndCompleteTask,No Input Parameters,No query
/contest/Batch/getContestData,No Input Parameters,No query
/contest/Batch/runProcess,No Input Parameters,No query
/security/Role/postRole,No Input Parameters,No query
/followup/findNewBusinessPendingForUnit,No Input Parameters," def query = ""SELECT b.policy_number as policy_number, c.client_name as name, b.proposal_number as proposal_number, d.desc1 as policy_status, e.desc1 as product_name, "" + ""CASE WHEN count(a.fup_key) > 99 THEN '99+' ELSE to_char(count(a.fup_key), 'FM99') END as fup_total "" + ""FROM ods.follow_up a "" + ""LEFT JOIN ods.policy b ON a.policy_number = b.policy_number "" + ""LEFT JOIN ods.client c ON b.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.system_code e ON b.product_code = e.key2 AND e.key1 = 'PRODUCT' "" + ""WHERE (b.agent_number = :agentNumber OR (b.agent_number IN :imPruList AND b.reff_agent = :agentNumber)) "" + ""AND b.valid_flag = '3' "" + ""AND a.follow_up_status IN ('L','M','P','O') "" + ""AND b.policy_status IN :statusList "" + ""AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/base/Approval/payload,No Input Parameters," def approval = Approval.findAll(""FROM Approval a WHERE a.trxNo = '${trxNo}' ORDER BY a.dcisionDate"", [max: 1]) if(!approval) { return [status: 500, message: ""No record found for TrxNo ${trxNo}"", content: null] } "
/pushNotif/checkDevice,"""uuid"":uuid",No query
/auth/Menu/checkMenuAction,No Input Parameters,No query
/followup/findUserIdNewBusinessPendingUnit,No Input Parameters," def query = ""SELECT DISTINCT p.agent_number as userId "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '3' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND p.policy_status in (:statusList) "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/newods/AgentHierarchy/findAllAgentLeader ,No Input Parameters," select a.agent_number, a.agent_type, a.leader_number from ods.agent a where terminated_date is null and agent_type in ('UM', 'SU', 'AM') order by a.agent_number limit $max offset ${max*(page-1)} """""" return queryService.executeQueryTransform(query) } "
/newsUpdateNew/NewsType/checkTypeName,No Input Parameters," String query = ""SELECT type_name FROM newsupdate.m_news_type WHERE lower(type_name) = lower(:typeName) "" "
/imageprofile/uploadImage,"agentNumber:agentNumber,salesforceId:pruforceId,agentCode:agentCode,fileName:fileName,module:module,file:file",No query
/base/Ldap/getUserAttribute,No Input Parameters,No query
/productionHistory/NewOds/findGraphPeriod,"""salesforceId"":salesforceId,""agentCode"":agentCode,""type"":type"," def query = ""SELECT to_char(MIN(to_date(CONCAT(period_year, '-', period_month), 'YYYY-MM')), 'FMMonth YYYY') as min, "" + ""to_char(MAX(to_date(CONCAT(period_year, '-', period_month), 'YYYY-MM')), 'FMMonth YYYY') as max "" + (type == ""individu"" ? ""FROM ods.production_agent "" : ""FROM ods.production_leader "" ) + ""WHERE CONCAT(period_year, '-', period_month) IN (:dateList) "" + (type == ""individu"" ? ""AND agent_number = :agentNumber "" : ""AND leader_number = :agentNumber "" ) "
/auth/Menu/findAllMenuParent,No Input Parameters,No query
/newsUpdateNew/News/deleteImage,No Input Parameters,No query
/newsUpdateNew/News/submitNews,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getTglTrainingAajiAgentStm,No Input Parameters," String query = ""select a.aobaajiexamregistrationid, b.aajiexamscheduleid, b.aajiexamdate, b.aajiexamexpireddate, b.aajiexamstarttime, b.aajiexamendtime, b.aajiexamlocation  from aobaajiexamregistration a  inner join aobaajiexamschedule b  on b.aajiexamscheduleid = a.aajiexamscheduleid  where a.aobaajiexamregistrationid = ( select max(aobaajiexamregistrationid)  from aobaajiexamregistration  "
/contest/MyContest/findAll,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentType"":agentType,""max"":max,""page"":page", select * from contest.contest_master where contest_type_code = 'C' and appv_sts='APPROVED' 
/newods/Policy/findAllByIssuedDate,No Input Parameters," select * from ods.policy where date(policy_issued_date) between '${data.issuedPeriodStart}' and '${data.issuedPeriodStart}' order by policy_number limit $max offset ${max * (page - 1)} """""" return queryService.executeQueryTransform(query) } "
/auth/Menu/saveMenu,No Input Parameters,No query
/contest/ContestApproval/findAllTaskContestApproval,No Input Parameters,No query
/client/findBirthdayListOctober,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 10 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/contest/ContestMaster/findContestByParent,No Input Parameters," final String query = ""SELECT a.contest_code, a.submission_date_start, a.submission_date_end, "" + ""a.new_bussiness_trx_date_start, a.new_bussiness_trx_date_end, a.non_new_bussiness_trx_date_start, "" + ""a.non_new_bussiness_trx_date_end "" + ""FROM contest.master a "" + ""WHERE a.contest_parent = '$contestParent'"" "
/client/findClientBirthdayAfterTwoMonths,No Input Parameters,No query
/proposal/NewOds/findFilterUnit,"""salesforceId"":salesforceId,""agentCode"":agentNumber,""channelType"":channelType"," def query = ""SELECT DISTINCT(agent_type) as name, agent_type as value "" + ""FROM ods.agent "" + ""WHERE leader_number = :agentNumber "" + ""AND agent_type IN (${getAgentType(""Individual"",channelType)}) "" + ""AND terminated_date IS NULL "" + ""UNION "" + ""SELECT DISTINCT(agent_type) as name, agent_type as value "" + ""FROM ods.agent "" + ""WHERE agent_number = :agentNumber "" + ""AND terminated_date IS NULL "" "
/contest/Base/delete,No Input Parameters,No query
/lti/SecurityInterceptor/before,No Input Parameters,No query
/base/DroolsRule/edit,No Input Parameters,No query
/base/AgentType/findAgentTypeByScope,No Input Parameters," select name from security.m_agent_type a $condition """""" return queryService.executeQueryTransform(query).collect { it.name } } "
/client/findStatusBirthdayListDecember,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =12 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/auth/AgentType/saveAgentType,No Input Parameters,No query
/approval/delegateAndCompleteTask,No Input Parameters,No query
/aobInterceptor/SecurityInterceptor/checkLeader,No Input Parameters,No query
/performanceMonitoring/PromotionChallenge/findAllFilterStatus,"""id"":id"," SELECT distinct production.key2 as key, production.policystatus as value FROM (SELECT production.api_01, production.agent_number, production.policy_number, cast(date(production.transaction_date) as varchar) transaction_date, sc.desc1 AS policyStatus, sc.key2 FROM ods.production production INNER JOIN ods.system_code sc ON sc.key1 = 'TRAN_CODE' AND sc.key2 = production.transaction_code AND production.agent_number = '$agentNumber' AND production.transaction_date >= '${productionPeriod.periodStart}' AND production.transaction_date <= '${productionPeriod.periodStop}' ) production INNER JOIN (SELECT policy.policy_number, policy.product_code, policy.owner_number, sc.desc1 AS productCode, client.client_Name AS clientName FROM ods.policy policy INNER JOIN ods.system_code sc ON sc.key1 = 'PRODUCT' AND sc.key2 = policy.product_code INNER JOIN ods.client client ON policy.owner_number = client.client_number ) policy ON production.policy_number = policy.policy_number """""" return newOdsQueryService.executeQueryList(query) } "
/productionHistory/NewOds/findUnitFilter,"""salesforceId"":salesforceId,""agentCode"":agentCode,""year"":year,""month"":month,""channelType"":channelType"," def query = ""SELECT DISTINCT(b.agent_type) as value, b.agent_type as name "" + ""FROM ods.production_agent a "" + ""LEFT JOIN ods.agent b ON a.agent_number = b.agent_number "" + ""WHERE a.leader_number = :agentNumber "" + ""AND a.period_month = :month AND a.period_year = :year $agentType "" "
/followup/findPolicyHolderPendingRequirementForUnit,No Input Parameters," def query = ""SELECT b.policy_number as policy_number, c.client_name as name, d.desc1 as policy_status, f.desc1 as product_name, "" + ""CASE WHEN count(a.fup_key) > 99 THEN '99+' ELSE to_char(count(a.fup_key), 'FM99') END as fup_total "" + ""FROM ods.follow_up a "" + ""LEFT JOIN ods.policy b ON a.policy_number = b.policy_number "" + ""LEFT JOIN ods.client c ON b.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.alteration e ON a.alteration_number = e.alteration_number AND a.policy_number = e.policy_number "" + ""LEFT JOIN ods.system_code f ON b.product_code = f.key2 AND f.key1 = 'PRODUCT' "" + ""WHERE (b.agent_number = :agentNumber OR (b.agent_number IN :imPruList AND b.reff_agent = :agentNumber)) "" + ""AND b.valid_flag = '1' "" + ""AND a.follow_up_status IN ('L','M','P','O') "" + ""AND e.department = :department "" + ""AND e.alteration_status IN ('O','F') "" + ""AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/auth/AgentPattern/putAgentPattern,No Input Parameters,No query
/base/Request/saveRequest,No Input Parameters,No query
/contest/AllContest/findAllHome,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentType"":agentType"," String query = """""" select distinct(a.contest_code) as contest_code, a.contest_name, publish_date_start from contest.master a, contest.favorite b where a.contest_code = b.contest_code and localtimestamp between a.publish_date_start and a.publish_date_end and ( date(a.submission_date_start) <= date(localtimestamp) or date(a.non_new_bussiness_trx_date_start) <= date(localtimestamp) or date(a.new_bussiness_trx_date_start) <= date(localtimestamp) ) and ( date(a.submission_date_end) >= date(localtimestamp) or date(a.non_new_bussiness_trx_date_end) >= date(localtimestamp) or date(a.new_bussiness_trx_date_end) >= date(localtimestamp) ) and b.agent_number = '$data.agentNumber' and a.contest_type_code = 'C' and a.channel = '${getContestChannel(data.agentType)}' order by publish_date_start desc """""" "
/newsUpdateNew/News/deleteNews,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getTglTrainingPrufastAgentStm,No Input Parameters," select a.aobfaststartregistrationid, b.faststartscheduleid,b.faststartstartdate, b.faststartenddate,b.faststartstarttime,b.faststartendtime,b.faststartlocation, extract(epoch from (b.faststartenddate - b.faststartstartdate))/(3600*24) as selisih, case when (b.faststartenddate - b.faststartstartdate) >= 2 then 'sun' else 'moon' end as keterangan from aobfaststartregistration a inner join aobfaststartschedule b on b.faststartscheduleid = a.faststartscheduleid where a.aobfaststartregistrationid = (select max(aobfaststartregistrationid) from aobfaststartregistration "
/client/findBirthdayListUpcoming,"""agentNumber"":agentNumber,""page"":page,""size"":size,""searchBy"":searchBy,""order"":orderBy,""filterByStatus"":filterBy,""salesforceId"":salesforceId,""agentCode"":agentCode,""pageType"":pageType"," whereClause= ""WHERE c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" } else if (months == 14){ whereClause = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) - interval '6 month')"" + "" AND c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""DESC"") orderBy = ""to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(date_of_birth, '-MM-DD') END,'YYYY-MM-DD') ${paramOrder}"" } else if (months == 15){ paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" whereClause = "" WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE))"" + "" AND date_of_birth IS NOT NULL "" } else if (months == 16){ whereClause = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) + interval '6 month') "" + "" AND c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(date_of_birth, '-MM-DD') END,'YYYY-MM-DD') ${paramOrder}"" } else { paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" whereClause = "" WHERE CAST(DATE_PART('month', date_of_birth) AS varchar) = :month"" + "" AND date_of_birth IS NOT NULL "" } "
,," String query = """""" select client_number, client_name, array_to_string(array_agg(distinct tmp.role),'; ') as client_status, to_char(date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(date_of_birth)) AS old, address1, address2, address3, address4, address5 from ( select distinct b.client_number, c.client_name, sc.desc1 as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5 from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.beneficiary b on b.policy_number = p.policy_number join ods.client c on c.client_number = b.client_number join ods.system_code sc on sc.key2 = 'BN' AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} union select distinct cr.client_number, c.client_name, array_to_string(array_agg(distinct sc.desc1),'; ') as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5 from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.client_role cr on cr.policy_number = p.policy_number join ods.client c on c.client_number = cr.client_number join ods.system_code sc on sc.key2 = cr.client_role_code AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} group by cr.client_number, date_of_birth, client_name, address1, address2, address3, address4, address5 ) tmp where client_name ILIKE ${paramsSearchBy} group by client_number, client_name, date_of_birth, address1, address2, address3, address4, address5 order by ${orderBy} LIMIT CAST(${max} AS NUMERIC ) OFFSET CAST(${min} AS NUMERIC) """""" "
/client/findClientByAgent,"""agentNumber"":agentNumber,""page"":page,""size"":size,""searchBy"":searchBy,""salesforceId"":pruforceId,""agentCode"":agentCode"," String query = ""SELECT c.client_number AS client_number, c.client_name AS client_name, sc.desc1 as client_status, n c.address1 as address1,c.address2 as address2,c.address3 as address3,c.address4 as address4,c.address5 as address5 FROM ods.policy p n INNER JOIN ods.client c ON p.owner_number = c.client_number INNER JOIN ods.system_code sc ON c.client_type = sc.key2 n WHERE p.agent_number=:agentNumber AND sc.key1 like 'CLIENT_TYPE'"" "
/base/User/checkUsername,No Input Parameters," final String query = ""SELECT COUNT(*) FROM security.m_user m WHERE m.username LIKE '${username}'"" "
/proposal/NewOds/findPolicyByStatusPD,"""agentNumber"":agentNumber,""salesforceId"":pruforceId,""type"":type,""agentCode"":agentCode,""searchWords"":searchWords,""sortBy"":sortBy,""size"":size,""page"":page,""statusList"":statusList,""pageType"":PageType,"," def query = ""SELECT b.client_name as policy_holder_name, TO_CHAR(a.policy_issued_date,'YYYY-MM-DD') as policy_issued_date, a.proposal_number, a.policy_number, c.desc1 as product_name, d.desc1 as status, "" + ""e.agent_number as agent_code, f.client_name as agent_name "" + ""FROM ods.policy a "" + ""LEFT JOIN ods.client b ON a.owner_number = b.client_number "" + ""LEFT JOIN ods.system_code c ON a.product_code = c.key2 AND c.key1 = 'PRODUCT' "" + ""LEFT JOIN ods.system_code d ON a.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.agent e ON a.agent_number = e.agent_number "" + ""INNER JOIN ods.client f ON e.client_number = f.client_number "" + ""WHERE (a.agent_number IN :queryUnit OR (a.agent_number IN :imPruList AND a.reff_agent IN (:queryUnit)) ) "" + ""AND a.policy_status IN :statusList "" + ""AND (b.client_name ILIKE :searchWords OR "" + numberCol + "" ILIKE :searchWords OR f.client_name ILIKE :searchWords) "" + ""ORDER BY "" + sortBy + ""LIMIT CAST(:size AS NUMERIC) OFFSET CAST(:start AS NUMERIC) "" "
/corp/banner/bannerListMobile,No Input Parameters," select id, title, start_publish_date, end_publish_date, description, banner_type_id, image_name from corporatebanner.t_banner where activated is true and end_publish_date > current_date and start_publish_date <= current_date order by start_publish_date limit $max """""" return queryService.executeQueryTransform(query) } "
/newods/Policy/findAllByProposalAndIssuedDate,No Input Parameters," select * from ods.policy where date(proposal_date) between '${data.proposalPeriodStart}' and '${data.proposalPeriodStop}' and date(policy_issued_date) between '${data.issuedPeriodStart}' and '${data.issuedPeriodStart}' order by policy_number limit $max offset ${max * (page - 1)} """""" return queryService.executeQueryTransform(query) } "
/bonus/Lifeasia/call,"""salesforceId"":salesforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""month"":month,""year"":year"," query = ""SELECT campaign_code, provision FROM mobilefirst.bonus3_plus WHERE valid_flag = '1' and current_date between period_from and period_to "" "
/base/Processor/checkCronExpressionValidity,No Input Parameters,No query
/corp/BannerType/getBannerType,No Input Parameters,No query
/aobInterceptor/AobFuseAdapterX/checkEmail,No Input Parameters,No query
/newsUpdateNew/NewsType/deleteNewsTypeIcon,No Input Parameters," select news_type_id from newsupdate.t_news where news_type_id = :newsTypeId """""" "
/base/SecUtil/logout,No Input Parameters,No query
/followup/findTotalBillingPendingRequirementUnit,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/bonus/Lifeasia/dropDownPeriod,"""salesforceId"":salesforceId,""agentCode"":agentCode"," query = ""SELECT campaign_code, provision FROM mobilefirst.bonus3_plus WHERE valid_flag = '1' and current_date between period_from and period_to "" result = pruforceDBService.executeQueryGetObjectMf(query) "
,," query = ""select left(cast(arr_month as varchar),7) as list_month from generate_series ( n (select period_from from mobilefirst.bonus3_plus where campaign_code = '$result.campaignCode'), (select current_date), interval '1' month ) as arr_month"" result = pruforceDBService.executeQueryGetListMf(query) } "
/aobInterceptor/AobSqlAdapter/checkAAJIQuotaCandidateQuotaStatement,No Input Parameters," String query = ""SELECT aes.aajiexamquota  FROM aobaajiexamschedule aes  where aes.aajiexamscheduleid = $params.aajiexamscheduleid"" "
/aobInterceptor/AobSqlAdapter/getSystemCodeStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/production/Newods/findUnitPdMonthly,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentCode"":agentCode,"," def query = """""" select CAST(sum(total_ape_02) AS varchar(20)) AS total_ape, CAST(sum(total_api_02) AS varchar(20)) AS api, CAST(sum(total_saver_02) AS varchar(20)) AS saver, CAST(sum(total_topup_02) AS varchar(20)) AS topup, CAST(sum(total_spi_02) AS varchar(20)) AS spi from ods.production_leader where leader_number = :agentNumber AND CASE WHEN '${periodMonth}' is not null THEN (production_leader.period_month LIKE '${periodMonth}' AND production_leader.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_leader.period_year LIKE '${periodYear}' END """""" "
/contest/ContestApproval/findAll,No Input Parameters,No query
/followup/findPolicyHolderPendingRequirement,No Input Parameters," def query = ""SELECT b.policy_number as policy_number, c.client_name as name, d.desc1 as policy_status, f.desc1 as product_name, "" + ""CASE WHEN count(a.fup_key) > 99 THEN '99+' ELSE to_char(count(a.fup_key), 'FM99') END as fup_total "" + ""FROM ods.follow_up a "" + ""LEFT JOIN ods.policy b ON a.policy_number = b.policy_number "" + ""LEFT JOIN ods.client c ON b.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.alteration e ON a.alteration_number = e.alteration_number AND a.policy_number = e.policy_number "" + ""LEFT JOIN ods.system_code f ON b.product_code = f.key2 AND f.key1 = 'PRODUCT' "" + ""WHERE (b.agent_number = :agentNumber OR (b.agent_number IN :imPruList AND b.reff_agent = :agentNumber)) "" + ""AND b.valid_flag = '1' "" + ""AND a.follow_up_status IN ('L','M','P','O') "" + ""AND e.department = :department "" + ""AND e.alteration_status IN ('O','F') "" + ""AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/base/DroolsRule/delete,No Input Parameters,No query
/production/Newods/findAllPolicyStatusMonthly,"""agentNumber"":agentNumber,""leaderNumber"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber"," def query = """""" SELECT DISTINCT on (p.transaction_code) p.transaction_code as key, sc.desc1 as value FROM ods.production p LEFT JOIN ods.system_code sc on p.transaction_code = sc.key2 WHERE p.agent_number = :agentNumber and p.transaction_date >= '${productionPeriod.periodStart}' AND p.transaction_date <= '${productionPeriod.periodStop}' AND sc.key1 = 'TRAN_CODE' """""" "
/newsUpdateNew/MobileNews/getNewsList,No Input Parameters," SELECT a.id, a.title, a.start_publish_date, a.end_publish_date, a.description, a.news_type_id, a.agent_type, a.image_name, a.file_name, b.type_name, b.type_file FROM newsupdate.t_news a, newsupdate.m_news_type b WHERE activated is true and cast (array['${agentTypeId}'] as text[]) && (regexp_split_to_array(regexp_replace(agent_type, '^', '', ''),',')) and end_publish_date > cast(now() at time zone '${ timeZone }' as date) and start_publish_date <= cast(now() at time zone '${timeZone}' as date) and a.news_type_id = b.id """""" "
/contest/ContestApproval/findAllContestHistory,No Input Parameters,No query
/contest/AllContest/deleteContestFavorite,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""contestCode"":contestCode,""agentType"":agentType",No query
/base/Ldap/getUsernameList,No Input Parameters,No query
/newsUpdateNew/NewsType/deleteImage,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/updateSettingsConfigStatement,"""value"":value,""userId"":userId,""appConfId"":appConfId"," def query = ""UPDATE mobilefirst.user_application_configuration SET value = '$params.value' WHERE user_id = '$params.userId' AND app_conf_id = '$params.appConfId'"" "
/newsUpdateNew/NewsType/checkNewsTypeUsed,No Input Parameters," def query = ""SELECT COUNT(a) FROM News a WHERE a.newsType.id = ${newsTypeId}"" "
/aobConversion/AobSqlAdapter/getReasonPendingDocStatement,No Input Parameters," String query = ""select reason from aobapplicationpendingstatus where aobapplicationpendingstatusid = (n select max(aobapplicationpendingstatusid) n from aobapplicationpendingstatus where candidateid = (n select candidateid from aobcandidate where npanumber = '$params.npanumber'))"" "
/client/findClientBirthdayTodoThisMonth,"""agentNumber"":agentNumber,""page"":page,""size"":size,""searchBy"":searchBy,""orderBy"":orderBy,""salesforceId"":salesforceId,""agentCode"":agentNumber"," String query = "" SELECT DISTINCT c.client_number AS client_number, c.client_name AS client_name, c.address1 as address1,sc.desc1 as client_status, n c.address2 as address2,c.address3 as address3,c.address4 as address4,c.address5 as address5, CONCAT(address1,' ',address2,' ',address3,' ',address4,' ',address5) AS address, n to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.policy p n INNER JOIN ods.client c ON p.owner_number = c.client_number LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number n lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 WHERE DATE_PART('month', c.date_of_birth) = Extract(month from CAST (CURRENT_DATE AS DATE)) n AND agent_number =:agentNumber "" "
/base/User/getUser,No Input Parameters,No query
/auth/RoleMobile/roleMobileList ,No Input Parameters,No query
/pushNotif/countEventByReqId,No Input Parameters," def result = PushnotificationEvent.executeQuery(""SELECT COUNT(p) FROM PushnotificationEvent p WHERE p.reqId = :reqId"", [reqId: reqId]) "
/auth/Request/authorize,No Input Parameters,No query
/followup/findTotalPolicyHolderUnitDetail,No Input Parameters," def query = ""SELECT count(*) as total, p.agent_number, ag.agent_type, b.client_name "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number "" + ""LEFT JOIN ods.client b ON ag.client_number = b.client_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND (to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop) "" + ""group by p.agent_number, ag.agent_type, b.client_name "" "
/auth/Role/getService,No Input Parameters,No query
/auth/MenuMobile/editMenu,No Input Parameters,No query
/commonUtils/BackOfficeSecurityInterceptor/before,No Input Parameters,No query
/productionHistory/NewOds/findGraphData,"""salesforceId"":salesforceId,""agentCode"":agentCode,""type"":type,""channelType"":channelType"," def query = ""SELECT period_month, period_year, SUM($apeNet) as ape_net "" + (type == ""individu"" ? ""FROM ods.production_agent "" : ""FROM ods.production_leader "" ) + ""WHERE CONCAT(period_year, '-', period_month) IN (:dateList) "" + (type == ""individu"" ? ""AND agent_number = :agentNumber "" : ""AND leader_number = :agentNumber "" ) + ""GROUP BY period_month, period_year "" + ""ORDER BY CAST(period_year AS integer), CAST(period_month AS integer) ASC "" "
/aobConversion/AobSqlAdapter/getAAJIExamAfterHourStatement,No Input Parameters," String query = """"""SELECT a.* FROM aobaajiexamschedule a left join ref_aajiquotacount b on a.aajiexamscheduleid=b.aajiexamscheduleid where aajiexamdate > current_date + 4 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT) and aajiexamdate < current_date + 17 and (b.reserved is null or cast(b.reserved as int)<a.aajiexamquota ) ORDER BY aajiexamdate ASC, aajiexamsession ASC """""" return queryService.executeQuery(query) } "
/approval/completeTask,No Input Parameters,No query
/contest/ContestMaster/send,No Input Parameters,No query
/persistency/Newods/findAllPolicyStatusRolling,"""agentNumber"":agentNumber,""salesforceId"":salesforceId,""agentCode"":agentCode,""period"":period"," query = """""" SELECT ps.policystatus as key, sc.desc1 as value FROM (SELECT DISTINCT p.policy_status as policyStatus FROM ods.policy p WHERE p.policy_number IN (SELECT d.policy_no FROM ${table} d WHERE d.agent_number = :agentNumber ${period} ) GROUP BY policyStatus) as ps LEFT JOIN ods.system_code sc on sc.key2 = ps.policyStatus WHERE sc.key1 = 'POLICY_STATUS' """""" "
,," query = """""" SELECT cast('DEC' as varchar) as key, cast('Penurunan API' as varchar) as value FROM ${table} d, ods.policy po WHERE d.agent_number = :agentNumber AND total_api_decreased <> 0 AND d.policy_no = po.policy_number ${period} GROUP BY d.agent_number UNION SELECT cast('LAP' as varchar) as key, cast('Lapsed API' as varchar) as value FROM ${table} d, ods.policy po WHERE d.agent_number = :agentNumber AND total_api_lapsed <> 0 AND d.policy_no = po.policy_number ${period} GROUP BY d.agent_number """""" "
/followup/findStatusNewBusinessPending,No Input Parameters," def query = ""SELECT distinct(p.policy_status) as key, sc.desc1 as description "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '3' AND sc.key1 like 'POLICY_STATUS' "" + ""AND f.follow_up_status in ('L','M','P','O') AND p.policy_status IN (:statusList) "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/followup/findTotalTodo,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM pruaob.pushnotification pn "" + ""WHERE pn.userid = :agentNumber and pn.opened is FALSE"" "
/approval/startTask,No Input Parameters,No query
/publicInformation/Hospital/getAllCity,," def query = ""select distinct(c.city_code) from publicinformation.hospital c where c.valid_flag = '1' order by c.city_code"" "
/proposal/NewOds/findFundHistory,"""policyNumber"":policyNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber,""searchWords"":searchWords,""filterList"":filterList,""sortBy"":sortBy,""sortDir"":direction,""size"":size,""page"":page"," def query = ""SELECT d.transaction_code FROM mobilefirst.fund_transaction_hist_filter d"" "
,," def query = ""SELECT to_char(a.transaction_date, 'dd FMMonth YYYY') as transaction_date, a.fund_amount as amount, a.number_of_unit as unit, b.desc1 as fund_type, "" + ""a.fund_type as fund_type_code, c.desc1 as transaction_type, a.priced_used, "" + ""CASE WHEN a.currency = 'IDR' THEN 'Rp' WHEN a.currency = 'USD' THEN 'US$' ELSE a.currency END as currency_symbol "" + ""FROM ods.fund_transaction_history a "" + ""INNER JOIN ods.transaction_history d ON a.policy_number = d.policy_number AND a.tranno = d.tranno AND a.transaction_code = d.transaction_code "" + ""LEFT JOIN ods.system_code b ON a.fund_type = b.key2 AND b.key1 = 'FUND' "" + ""LEFT JOIN ods.system_code c ON a.transaction_code = c.key2 AND c.key1 = 'TRAN_CODE' "" + ""WHERE a.policy_number = :policyNumber "" + ""AND a.transaction_code IN :transactionCode "" + ""AND d.valid_flag <> '2' "" + ""AND b.desc1 ILIKE :searchWords "" + ""ORDER BY "" + sortBy + "" "" + sortDir + "" "" + ""LIMIT CAST(:size AS NUMERIC) OFFSET CAST(:start AS NUMERIC) "" "
/commonUtils/Approval/myTaskList,No Input Parameters," String query = """"""SELECT a.trxNo, a.dcisionDate, a.description, a.module, a.pageState, a.approvalSts FROM Approval a WHERE a.dcisionDate = (SELECT MAX(b.dcisionDate) FROM Approval b WHERE a.trxNo = b.trxNo) AND a.decisionBy = '${data.username}'"""""" if(data.descriptionFilter || data.moduleFilter || data.decisionDateFilter || data.approvalStsFilter){ query += "" AND"" if(data.descriptionFilter) { query += "" lower(a.description) like '%${data.descriptionFilter.toLowerCase()}%'"" if(data.ipOriginFilter || data.decisionDateFilter || data.approvalStsFilter) { query += "" AND"" } } if(data.moduleFilter) { query += "" lower(a.module) like '%${data.moduleFilter.toLowerCase()}%'"" if(data.decisionDateFilter || data.approvalStsFilter) { query += "" AND"" } } if(data.decisionDateFilter) { query += "" date(a.dcisionDate) = '$data.decisionDateFilter'"" if(data.approvalStsFilter) { query += "" AND"" } } if(data.approvalStsFilter) { query += "" lower(a.approvalSts) like '%${data.approvalStsFilter.toLowerCase()}%'"" } } "
/newods/AgentHierarchy/findAllAgentNumberUnit ,No Input Parameters," select leader_number as agent_number, string_agg(distinct(agent_number), ' ') as list_agent from ods.production where leader_number in ${queryService.convertListToString(data.agentNumberList)} and transaction_date between '$data.periodStart' and '$data.periodEnd' group by leader_number order by leader_number """""" return queryService.executeQueryTransform(query) } "
/base/Processor/runProcessGroup,No Input Parameters,No query
/lti/LongTermIncentives/findCurrentBalance,No Input Parameters," query = ""SELECT CAST(b.unit_balance AS VARCHAR) AS unit_release, CAST((y.current_unit_balance - y.accumulate_release_unit) AS VARCHAR) AS unit_retained, b.fund_type, n CAST((b.unit_balance + (y.current_unit_balance - y.accumulate_release_unit)) AS VARCHAR) AS total_unit, to_char(current_date, 'DD-Mon-YYYY') AS period n FROM ods.lti_balance b, (SELECT agent_number, current_unit_balance, accumulate_release_unit, mperiod n FROM ods.lti_yearly_upload n WHERE agent_number = :agentNumber AND mperiod = (SELECT MAX(mperiod) FROM ods.lti_yearly_upload n WHERE agent_number = :agentNumber)) y n WHERE b.agent_number = y.agent_number "" "
/base/MenuMobile/findAll,No Input Parameters,No query
/newods/AgentHierarchy/findByLeaderNumber ,No Input Parameters," SELECT * FROM ods.agent_hierarchy WHERE leader_number = '${data.leaderNumber}' order by agent_number limit $max offset ${max*(page-1)} """""" return queryService.executeQueryTransform(query) } "
/auth/Request/editRequest,No Input Parameters,No query
/base/Role/getService,No Input Parameters,No query
/approval/claimAndCompleteTask,No Input Parameters,No query
/auth/User/deleteUser,No Input Parameters," final String query = ""SELECT COUNT(*) FROM contest.contest_master c WHERE c.created_by = '${user.username}'"" "
," return [message: ""Failed to delete user "" + user.username + "". It has been used by contest(s)"", content: null, status: 500] } } ",
/followup/findTotalPolicyHolderPendingRequirementUnitCustom,No Input Parameters," def query = ""SELECT DISTINCT p.agent_number as userId "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND (to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop) "" "
/base/RoleMobile/putRoleMobile,No Input Parameters,No query
/base/AgentPattern/deleteAgentPattern,No Input Parameters,No query
/security/Role/putRole,No Input Parameters,No query
/production/SecurityInterceptor/before,No Input Parameters,No query
/contest/ContestApproval/sendApproval,No Input Parameters,No query
/corp/MobileBanner/bannerListPriority,No Input Parameters," select id, title, start_publish_date, end_publish_date, description, banner_type_id, image_name from corporatebanner.t_banner where activated is true and end_publish_date > cast(now() at time zone '${timeZone}' as date) and start_publish_date <= cast(now() at time zone '${timeZone}' as date) and array['${data?.channelType}'] && (regexp_split_to_array(regexp_replace(inputer_code, '^s+', '', ''),';')) order by is_priority desc, start_publish_date desc, created_date desc limit ${limit} """""" return queryService.executeQueryTransform(query) } "
/client/SecurityInterceptor/before,No Input Parameters,No query
/aobInterceptor/AobFuseAdapter/get,"""docId"":docId,""fileBase64"":"""",""fileMimeType"":""image/jpeg"",""docName"":docName,""docType"":docType,""npa"":npa,""path"":""/aob/cancelSupportingDoc""",No query
/publicInformation/Office/distinct,No Input Parameters," select officeName, officeAddr1,officeAddr2, officeAddr3, officePhone from Office as o where o.cityCode like :cityCode and validFlag = '1' and ( lower(o.officeName) like lower(:search) or lower(o.officeAddr1) like lower(:search) or lower(o.officeAddr2) like lower(:search) or lower(o.officeAddr3) like lower(:search) ) group by officeName, officeAddr1,officeAddr2, officeAddr3, officePhone order by officeName """""", [search:""%$search%"",cityCode:""$filterCity""]) "
/followup/findTotalNewBusinessPendingUnitList,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '3' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND p.policy_status in (:statusList) "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/aobInterceptor/AobSqlAdapter/inputAAJIExamRegistrationStatement,No Input Parameters," INSERT INTO aobaajiexamregistration(candidateid, aajiexamscheduleid, agentcode, aajiexamdate, statusagent, licensetype, createdate) VALUES ( (SELECT candidateid FROM aobcandidate WHERE npanumber = '$params.npanumber') ,'$params.aajiexamscheduleid', '$params.agentCode', '$params.aajiexamdate' ,'$params.statusagent', '$params.licensetype', localtimestamp)"""""" "
/followup/findTotalPolicyInCancelPeriodUnit,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.policy p "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.policy_status = 'IF' "" + ""AND p.billing_channel = 'A' "" + ""AND sc.key1 like 'POLICY_STATUS' "" "
/followup/findBeforeDueDate,No Input Parameters," def query = ""SELECT p.policy_number as policy_number, p.billing_channel, c.client_name as name, p.policy_status, sc.desc1 as desc2, "" + ""to_char(p.paid_to_date, 'dd FMMonth YYYY') AS paid_to_date, e.desc1 as product_name "" + ""FROM ods.policy p "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""LEFT JOIN ods.system_code e ON p.product_code = e.key2 AND e.key1 = 'PRODUCT' "" + ""WHERE (p.agent_number IN :queryUnit OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) "" + ""AND p.policy_status = 'IF' AND p.billing_channel != 'A' AND sc.key1 like 'POLICY_STATUS' "" + ""AND p.paid_to_date BETWEEN (CURRENT_DATE) AND (CURRENT_DATE + INTERVAL '$paramBeforeDueDate days') "" "
/proposal/NewOds/findClaimHistory,"""policyNumber"":policyNumber,""type"":""deathClaim"",""salesforceId"":pruforceId,""agentCode"":agentNumber"," def query = ""SELECT "" + column + ""FROM ods.claim_history a "" + ""LEFT JOIN ods.system_code b ON a.component_code = b.key2 AND b.key1 = 'COMPONENT' "" + (type == ""nonDeathClaim"" ? bankJoin : """" ) + ""WHERE a.policy_number = :policyNumber "" + ""AND a.regular_payment_type ""+ (type == ""nonDeathClaim"" ? ""<>"" : ""="") + "" 'WP' "" + ""AND a.regular_payment_status IN ('AL','BT','CL','MT') "" + ""ORDER by a.creation_date DESC "" "
,," def query = ""SELECT to_char(a.effective_date, 'dd FMMonth YYYY') as claim_decision_date, ROUND(SUM(b.actual_claim_value), 2) as approved_amount "" + ""FROM ods.transaction_history a "" + ""LEFT JOIN ods.death_claim_detail b ON a.policy_number = b.policy_number "" + ""WHERE a.transaction_code = 'T669' AND a.policy_number = :policyNumber "" + ""GROUP BY a.effective_date "" "
/newsUpdateNew/News/postNews,No Input Parameters,No query
/newods/Insured/findAllByPolicyNumberList,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/getListCandidateStatement,"""recruiteragentcode"":agentCode"," select a.*, (SELECT b.aajilicensecode FROM pruaob.aobaajiexamresult b WHERE b.agentcode = a.agentcode AND b.aajiexamresult = 'PASS' ORDER BY b.createdate ASC LIMIT 1) as licence from aobcandidate a where a.recruiteragentcode = '$params.recruiteragentcode' and a.activeflag is null and a.manualpack is false order by a.createdate desc limit $max offset ${max*(page-1)} """""" "
/auth/ActivityLog/index,No Input Parameters," def query = ""SELECT a.username, a.ipOrigin, a.ipDestination, a.path, a.method, a.created FROM ActivityLog as a"" "
/aobInterceptor/AobSqlAdapterX/getAAJIExamCityStatement,No Input Parameters," String query = ""SELECT DISTINCT(a.aajiexamlocation)  FROM aobaajiexamschedule a  left join ref_aajiquotacount b  on a.aajiexamscheduleid=b.aajiexamscheduleid  where aajiexamdate > current_date + 5 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT)  and aajiexamdate < current_date + 17  and (b.reserved is null or cast(b.reserved as int)< a.aajiexamquota )"" "
/newsUpdateNew/UploadImage/download,No Input Parameters,No query
/newsUpdateNew/News/reviseNews,No Input Parameters,No query
/followup/findBillingPendingRequirementPD,No Input Parameters," def query = """""" SELECT t.agent_number, a.agent_type, c.client_name, SUM(t.fup_total) as total FROM ods.agent a INNER JOIN ( SELECT b.agent_number, b.policy_number, c.client_name, count(a.fup_key) as fup_total FROM ods.follow_up a LEFT JOIN ods.policy b ON a.policy_number = b.policy_number LEFT JOIN ods.client c ON b.owner_number = c.client_number LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' LEFT JOIN ods.alteration e ON a.alteration_number = e.alteration_number AND a.policy_number = e.policy_number LEFT JOIN ods.system_code f ON b.product_code = f.key2 AND f.key1 = 'PRODUCT' WHERE (b.agent_number IN (:queryUnit) OR (b.agent_number IN :imPruList AND b.reff_agent IN (:queryUnit))) AND b.valid_flag = '1' AND a.follow_up_status IN ('L','M','P','O') AND e.department = :department AND e.alteration_status IN ('O','F') AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop GROUP BY b.agent_number, b.policy_number, c.client_name ) AS t ON a.agent_number = t.agent_number LEFT JOIN ods.client c ON a.client_number = c.client_number """""" "
,," query = query + ""WHERE a.agent_type = :filter "" } "
/base/MenuMobile/deleteMenu,No Input Parameters,No query
/contest/ContestMaster/findContestHierarchy,No Input Parameters," SELECT contest_code, contest_parent, contest_code_index n FROM contest.master n WHERE contest_code = '"" + contestCode + ""' n UNION ALL n SELECT a.contest_code, a.contest_parent, a.contest_code_index n FROM parent b JOIN contest.master a ON (b.contest_parent = a.contest_code)) n SELECT a.contest_code, a.contest_parent, b.contest_name, b.contest_code_index n FROM parent a, contest.master b n WHERE a.contest_code = b.contest_code n ORDER BY a.contest_code, a.contest_parent"" "
/client/findBirthdayListRecent,"""agentNumber"":agentNumber,""page"":page,""size"":size,""searchBy"":searchBy,""order"":orderBy,""filterByStatus"":filterBy,""salesforceId"":salesforceId,""agentCode"":agentCode,""pageType"":pageType"," whereClause= ""WHERE c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" } else if (months == 14){ whereClause = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) - interval '6 month')"" + "" AND c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""DESC"") orderBy = ""to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(date_of_birth, '-MM-DD') END,'YYYY-MM-DD') ${paramOrder}"" } else if (months == 15){ paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" whereClause = "" WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE))"" + "" AND date_of_birth IS NOT NULL "" } else if (months == 16){ whereClause = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) + interval '6 month') "" + "" AND c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(date_of_birth, '-MM-DD') END,'YYYY-MM-DD') ${paramOrder}"" } else { paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" whereClause = "" WHERE CAST(DATE_PART('month', date_of_birth) AS varchar) = :month"" + "" AND date_of_birth IS NOT NULL "" } "
,," String query = """""" select client_number, client_name, array_to_string(array_agg(distinct tmp.role),'; ') as client_status, to_char(date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(date_of_birth)) AS old, address1, address2, address3, address4, address5 from ( select distinct b.client_number, c.client_name, sc.desc1 as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5 from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.beneficiary b on b.policy_number = p.policy_number join ods.client c on c.client_number = b.client_number join ods.system_code sc on sc.key2 = 'BN' AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} union select distinct cr.client_number, c.client_name, array_to_string(array_agg(distinct sc.desc1),'; ') as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5 from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.client_role cr on cr.policy_number = p.policy_number join ods.client c on c.client_number = cr.client_number join ods.system_code sc on sc.key2 = cr.client_role_code AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} group by cr.client_number, date_of_birth, client_name, address1, address2, address3, address4, address5 ) tmp where client_name ILIKE ${paramsSearchBy} group by client_number, client_name, date_of_birth, address1, address2, address3, address4, address5 order by ${orderBy} LIMIT CAST(${max} AS NUMERIC ) OFFSET CAST(${min} AS NUMERIC) """""" "
/base/AuditLog/index,No Input Parameters," def query = ""SELECT a.actor, a.className, a.persistedObjectId, a.eventName, MIN(a.dateCreated) as dateCreated FROM AuditLog a"" if(data.actorFilter || data.classNameFilter || data.eventNameFilter || data.objectIdFilter || data.createdFilter) { query += "" WHERE"" if(data.actorFilter) { query += "" lower(a.actor) like '%${data.actorFilter.toLowerCase()}%'"" if(data.classNameFilter || data.eventNameFilter || data.objectIdFilter || data.createdFilter) { query += "" AND"" } } if(data.classNameFilter) { query += "" lower(a.className) like '%${data.classNameFilter.toLowerCase()}%'"" if(data.eventNameFilter || data.objectIdFilter || data.createdFilter) { query += "" AND"" } } if(data.eventNameFilter) { query += "" lower(a.eventName) like '%${data.eventNameFilter.toLowerCase()}%'"" if(data.objectIdFilter || data.createdFilter) { query += "" AND"" } } if(data.objectIdFilter) { query += "" lower(a.persistedObjectId) like '%${data.objectIdFilter.toLowerCase()}%'"" if(data.createdFilter) { query += "" AND"" } } if(data.createdFilter) { query += "" date(a.dateCreated) = '$data.createdFilter'"" } } "
/productionHistory/NewOds/findGraphDetail,"""salesforceId"":salesforceId,""agentCode"":agentCode,""type"":type,""channelType"":channelType"," def query = ""SELECT period_month, period_year, SUM($apeNet) as ape_net, SUM($api) as api, SUM($saver) as saver, SUM($topUp) as top_up, SUM($spi) as spi "" + (type == ""individu"" ? ""FROM ods.production_agent "" : ""FROM ods.production_leader "" ) + ""WHERE CONCAT(period_year, '-', period_month) IN (:dateList) "" + (type == ""individu"" ? ""AND agent_number = :agentNumber "" : ""AND leader_number = :agentNumber "" ) + ""GROUP BY period_month, period_year "" + ""ORDER BY CAST(period_year AS integer), CAST(period_month AS integer) ASC "" "
/base/AgentRole/listAgentRole,No Input Parameters," select distinct role_id from security.M_AGENT_ROLE """""" queryService.executeQueryTransform(query).roleId.each { retVal << getRole(Role.get(it)) } "
/production/Newods/findIndividuPdYearly,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentCode"":agentCode,"," def query = """""" select CAST(sum(total_ape_02) AS varchar(20)) AS total_ape, CAST(sum(total_api_02) AS varchar(20)) AS api, CAST(sum(total_saver_02) AS varchar(20)) AS saver, CAST(sum(total_topup_02) AS varchar(20)) AS topup, CAST(sum(total_spi_02) AS varchar(20)) AS spi from ods.production_agent where agent_number = :agentNumber AND CASE WHEN '${periodMonth}' is not null THEN (production_agent.period_month LIKE '${periodMonth}' AND production_agent.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_agent.period_year LIKE '${periodYear}' END """""" "
/aobInterceptor/AobSqlAdapter/getScoreRecExam,"""npanumber"":npa"," String query = ""select resultform from aobrecruitmentresult where candidateid = (select candidateid from aobcandidate where npanumber = '$params.npanumber')"" "
/persistency/Newods/findAllPersistencyHistory,"""agentNumber"":agentNumber,""salesforceId"":salesforceId,""agentCode"":agentCode"," query = """""" SELECT * FROM mobilefirst.application_parameters where param = 'persistency_history_end' """""" "
,," query = """""" SELECT listperiod.*, CASE WHEN p.total_prscty_api_current IS NULL THEN -1 ELSE p.total_prscty_api_current END, CASE WHEN np.total_prscty_api_rolling IS NULL THEN -1 ELSE np.total_prscty_api_rolling END FROM (SELECT to_char((generate_series(((current_date - interval '1 day') - interval '${periodEnd} month'), ((current_date - interval '1 day') - interval '1 month'), '1 month')),'MM-YYYY') as period) as listperiod LEFT JOIN (SELECT to_char(period,'MM-YYYY') as period, total_prscty_api as total_prscty_api_current FROM ods.persistency WHERE prscty_code = :prsctyCode AND agent_number = :agentNumber) AS p ON p.period = listperiod.period LEFT JOIN (SELECT to_char(period,'MM-YYYY') as period, total_prscty_api as total_prscty_api_rolling FROM ods.new_persistency WHERE prscty_code = :prsctyCode AND agent_number = :agentNumber) AS np ON np.period = listperiod.period ORDER BY RIGHT(listperiod.period,4) ASC, LEFT(listperiod.period,2) ASC """""" "
/production/Lifeasia/call,"""objid"":""MSINQLDPO"",""agntsel"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber"," query = ""SELECT campaign_code, provision FROM mobilefirst.bonus3_plus WHERE valid_flag = '1' and current_date between period_from and period_to "" "
/aobInterceptor/AobSqlAdapter/getAAJILicenseStatement,No Input Parameters," String query = ""select aajilicensecode from aobaajiexamresult where agentcode = '$params.agentCode'"" "
/client/findBirthdayListDecember,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 12 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/base/DroolsRule/rebuild,No Input Parameters,No query
/performanceMonitoring/Master/edit,No Input Parameters,No query
/base/AgentPattern/batchSave,No Input Parameters,No query
/client/findAllBirthdayListByMonth,"""agentNumber"":agentNumber,""page"":page,""size"":size,""month"":month,""searchBy"":searchBy,""order"":orderBy,""filterByStatus"":filterBy,""salesforceId"":salesforceId,""agentCode"":agentCode,""pageType"":pageType"," whereClause= ""WHERE c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" } else if (months == 14){ whereClause = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) - interval '6 month')"" + "" AND c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""DESC"") orderBy = ""to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(date_of_birth, '-MM-DD') END,'YYYY-MM-DD') ${paramOrder}"" } else if (months == 15){ paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" whereClause = "" WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE))"" + "" AND date_of_birth IS NOT NULL "" } else if (months == 16){ whereClause = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) + interval '6 month') "" + "" AND c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(date_of_birth, '-MM-DD') END,'YYYY-MM-DD') ${paramOrder}"" } else { paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" whereClause = "" WHERE CAST(DATE_PART('month', date_of_birth) AS varchar) = :month"" + "" AND date_of_birth IS NOT NULL "" } "
,," String query = """""" select client_number, client_name, array_to_string(array_agg(distinct tmp.role),'; ') as client_status, to_char(date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(date_of_birth)) AS old, address1, address2, address3, address4, address5 from ( select distinct b.client_number, c.client_name, sc.desc1 as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5 from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.beneficiary b on b.policy_number = p.policy_number join ods.client c on c.client_number = b.client_number join ods.system_code sc on sc.key2 = 'BN' AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} union select distinct cr.client_number, c.client_name, array_to_string(array_agg(distinct sc.desc1),'; ') as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5 from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.client_role cr on cr.policy_number = p.policy_number join ods.client c on c.client_number = cr.client_number join ods.system_code sc on sc.key2 = cr.client_role_code AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} group by cr.client_number, date_of_birth, client_name, address1, address2, address3, address4, address5 ) tmp where client_name ILIKE ${paramsSearchBy} group by client_number, client_name, date_of_birth, address1, address2, address3, address4, address5 order by ${orderBy} LIMIT CAST(${max} AS NUMERIC ) OFFSET CAST(${min} AS NUMERIC) """""" "
/followup/findTotalNewBusinessUnitDetail,No Input Parameters," def query = ""SELECT count(*) as total, p.agent_number, ag.agent_type, b.client_name "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number "" + ""LEFT JOIN ods.client b ON ag.client_number = b.client_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '3' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND p.policy_status in (:statusList) "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" + ""GROUP BY p.agent_number, p.agent_number, ag.agent_type, b.client_name "" "
/aobInterceptor/SecurityInterceptor/before,No Input Parameters,No query
/persistency/Newods/findAllPolicyCurrent,"""page"":page,""size"":size,""agentNumber"":agentNumber,""filterBy"":filterBy,""filterVal"":filterVal,""searchVal"":searchVal,""sortVal"":sortVal,""salesforceId"":salesforceId,""agentCode"":agentCode,""period"":period"," query = """""" SELECT * FROM (SELECT p.policy_no policynumber, p.total_api_issued totalapiissued, p.total_api_lapsed totalapilapsed, p.total_api_increased totalapiincreased, p.total_api_decreased totalapidecreased, c.client_name clientname, pol.policy_status policycode, pols.desc2 policystatus, prod.desc1 productcode FROM ${table} p, ods.client c, ods.policy pol, ods.system_code pols, ods.system_code prod WHERE p.agent_number = :agentNumber AND c.client_number = pol.owner_number AND p.policy_no = pol.policy_number AND prod.key1 = 'PRODUCT' AND prod.key2 = pol.product_code AND pols.key1 = 'POLICY_STATUS' AND pols.key2 = pol.policy_status ${period} ) as p WHERE (${filterVal}) AND (clientname LIKE '%${request.searchVal.toUpperCase()}%' OR policynumber LIKE '%${request.searchVal}%') ORDER BY CASE '${request.sortVal}' WHEN 'clientName' THEN clientname END ASC, CASE '${request.sortVal}' WHEN 'policyNumber' THEN policyNumber END ASC, CASE '${request.sortVal}' WHEN 'decreasedApi' THEN totalapidecreased END DESC , CASE '${request.sortVal}' WHEN 'lapsedApi' THEN totalapilapsed END DESC LIMIT CAST(:max AS NUMERIC ) offset CAST(:min AS NUMERIC ) """""" "
/client/findDataLastUpdate,No Input Parameters,No query
/base/Menu/getList,No Input Parameters,No query
/followup/findAgentTypeAfterDueDatePolicyInCancelPD,No Input Parameters," def query = """""" SELECT a.agent_type FROM ods.agent a INNER JOIN ( -- beforeduedate SELECT p.agent_number FROM ods.policy p LEFT JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'IF' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE) AND (CURRENT_DATE + INTERVAL '${paramBeforeDueDate} days') GROUP BY p.agent_number "
,, SELECT p.agent_number FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'IF' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE - INTERVAL '44 days') AND CURRENT_DATE GROUP BY p.agent_number UNION SELECT p.agent_number FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'LA' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE - INTERVAL '729 days') AND (CURRENT_DATE - INTERVAL '45 days') GROUP BY p.agent_number 
,, SELECT p.agent_number FROM ods.policy p LEFT JOIN ods.client c ON p.owner_number = c.client_number LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'IF' AND p.billing_channel = 'A' AND sc.key1 like 'POLICY_STATUS' GROUP BY p.agent_number 
/aobInterceptor/AobSqlAdapter/updateStatusPushNotificationStatement,No Input Parameters," String query = ""UPDATE pushnotification SET opened=true WHERE id = $params.id"" "
/client/findClientBirthdayThisMonth,No Input Parameters," String query = "" SELECT DISTINCT c.client_number AS client_number, c.client_name AS client_name, c.address1 as address1, n c.address2 as address2,c.address3 as address3,c.address4 as address4,c.address5 as address5, n CONCAT(address1,' ',address2,' ',address3,' ',address4,' ',address5) AS address, c.client_status AS client_status, n to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.policy p n INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE DATE_PART('month', c.date_of_birth) = Extract(month from CAST (CURRENT_DATE AS DATE)) n AND p.agent_number =:agentNumber"" "
/followup/findPolicyHolderPendingRequirementPD,No Input Parameters," def query = """""" SELECT t.agent_number, a.agent_type, c.client_name, SUM(t.fup_total) as total FROM ods.agent a INNER JOIN ( SELECT b.agent_number, b.policy_number, c.client_name, count(a.fup_key) as fup_total FROM ods.follow_up a LEFT JOIN ods.policy b ON a.policy_number = b.policy_number LEFT JOIN ods.client c ON b.owner_number = c.client_number LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' LEFT JOIN ods.alteration e ON a.alteration_number = e.alteration_number AND a.policy_number = e.policy_number LEFT JOIN ods.system_code f ON b.product_code = f.key2 AND f.key1 = 'PRODUCT' WHERE (b.agent_number IN (:queryUnit) OR (b.agent_number IN :imPruList AND b.reff_agent IN (:queryUnit))) AND b.valid_flag = '1' AND a.follow_up_status IN ('L','M','P','O') AND e.department = :department AND e.alteration_status IN ('O','F') AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop GROUP BY b.agent_number, b.policy_number, c.client_name ) AS t ON a.agent_number = t.agent_number LEFT JOIN ods.client c ON a.client_number = c.client_number """""" "
," query = query + ""WHERE a.agent_type = :filter "" } ",
/auth/Agent/verify,No Input Parameters,No query
/contest/ContestMaster/edit,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/cancelCandidate,"""pruforceId"":pruforceId,""npanumber"":npanumber,""recruiteragentcode"":recruiteragentcode"," String query = ""update pruaob.aobcandidate set activeflag = 'CANCELLED', updateBy = '$params.pruforceId' "" + ""where npanumber = '$params.npanumber' and recruiteragentcode = '$params.recruiteragentcode'"" "
/corp/BankUnit/getBankUnit,No Input Parameters,No query
/aobInterceptor/AobSqlAdapterX/getDataReligionStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/client/findStatusBirthdayListSeptember,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =9 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/aobConversion/AobSqlAdapter/checkAAJIValidStatement,No Input Parameters," String query = ""SELECT a.aajiexamexpireddate >= current_date as isvalidexpireddate, true as isvalidexamdate  FROM aobaajiexamschedule a  left join ref_aajiquotacount b  on a.aajiexamscheduleid=b.aajiexamscheduleid  where a.aajiexamscheduleid=$params.aajiexamscheduleid"" "
/corp/banner/getDetailPriority,No Input Parameters, select * from corporatebanner.t_banner 
/base/DroolsRule/processFacts,No Input Parameters,No query
/newods/Persistency/findByAgentNumberAndPrsctyCode ,No Input Parameters,No query
/publicInformation/Office/index,No Input Parameters," select officeName, officeAddr1,officeAddr2, officeAddr3, officePhone from Office as o where o.cityCode like :cityCode and validFlag = '1' and ( lower(o.officeName) like lower(:search) or lower(o.officeAddr1) like lower(:search) or lower(o.officeAddr2) like lower(:search) or lower(o.officeAddr3) like lower(:search) ) group by officeName, officeAddr1,officeAddr2, officeAddr3, officePhone order by officeName """""", [search:""%$search%"",cityCode:""$filterCity""]) "
/base/Agent/getAgentDetail,No Input Parameters," def query = ""SELECT agent_number, agent_type, office_code FROM ods.agent where agent_number = :agentNumber"" "
/contest/Completed/findContestDescription,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentType"":agentType,""contestCode"":contestCode",No query
/base/Processor/appLogList,No Input Parameters," def query = """"""SELECT a.createdDate, a.createdBy, a.message FROM AppLog a WHERE a.createdBy = '${data.createdBy}' AND reffId = '${data.reffId}'"""""" "
,," WHERE a.createdBy = '${data.createdBy}' AND reffId = '${data.reffId}'"""""" if(data.createdDateFilter || data.messageFilter){ query += "" AND"" count += "" AND"" if(data.createdDateFilter){ query += "" date(a.createdDate) = '${data.createdDateFilter}'"" count += "" date(a.createdDate) = '${data.createdDateFilter}'"" if(data.messageFilter){ query += "" AND"" count += "" AND"" } } if(data.messageFilter){ query += "" lower(a.message) LIKE '%${data.messageFilter.toLowerCase()}%'"" count += "" lower(a.message) LIKE '%${data.messageFilter.toLowerCase()}%'"" } } "
/newsUpdateNew/News/getLatestRow,No Input Parameters,No query
/newods/AgentHierarchy/findBySeniorUMNumber ,No Input Parameters," SELECT * FROM ods.agent_hierarchy WHERE leader_number = '${data.leaderNumber}' and (agent_type_original = 'AG' or agent_number = '${data.leaderNumber}') order by agent_number limit $max offset ${max*(page-1)} """""" return queryService.executeQueryTransform(query) } "
/newsUpdateNew/News/rejectNews,No Input Parameters,No query
/persistency/Newods/findPersistencyGraphCR,"""agentNumber"":agentNumber,""salesforceId"":salesforceId,""agentCode"":agentCode"," SELECT a.agent_number, CASE WHEN api_lapsed_current IS NULL THEN -1 ELSE api_lapsed_current END, CASE WHEN api_decreased_current IS NULL THEN -1 ELSE api_decreased_current END, CASE WHEN api_issued_current IS NULL THEN -1 ELSE api_issued_current END, CASE WHEN api_increased_current IS NULL THEN -1 ELSE api_increased_current END, CASE WHEN total_api_current IS NULL THEN -1 ELSE total_api_current END, CASE WHEN api_lapsed_rolling IS NULL THEN -1 ELSE api_lapsed_rolling END, CASE WHEN api_decreased_rolling IS NULL THEN -1 ELSE api_decreased_rolling END, CASE WHEN api_issued_rolling IS NULL THEN -1 ELSE api_issued_rolling END, CASE WHEN api_increased_rolling IS NULL THEN -1 ELSE api_increased_rolling END, CASE WHEN total_api_rolling IS NULL THEN -1 ELSE total_api_rolling END FROM ods.agent a LEFT JOIN (SELECT agent_number, api_lapsed as api_lapsed_current, api_decreased as api_decreased_current, api_issued as api_issued_current, api_increased as api_increased_current, total_prscty_api as total_api_current FROM ods.persistency WHERE prscty_code = :prsctyCode and to_char(period,'MM-YYYY') in (select to_char(max(date_period), 'MM-YYYY') from ods.controlfile_new where file_name = 'NEW_PERSISTENCY.TXT')) as p ON p.agent_number = a.agent_number LEFT JOIN (SELECT agent_number, api_lapsed as api_lapsed_rolling, api_decreased as api_decreased_rolling, api_issued as api_issued_rolling, api_increased as api_increased_rolling, total_prscty_api as total_api_rolling FROM ods.new_persistency WHERE prscty_code = :prsctyCode and to_char(period,'MM-YYYY') in (select to_char(max(date_period), 'MM-YYYY') from ods.controlfile_new where file_name = 'NEW_PERSISTENCY.TXT')) as np ON np.agent_number = a.agent_number WHERE a.agent_number = :agentNumber """""" "
/auth/ActivityLog/authorize,No Input Parameters,No query
/base/AgentType/getAgentTypeOds,No Input Parameters," def query = """""" SELECT desc2 as channel_type, key2 as agent_type FROM ods.system_code "
/client/findBirthdayListDaily,"""agentNumber"":agentNumber,""page"":page,""size"":size,""salesforceId"":pruforceId,""agentCode"":agentCode"," String query = ""SELECT DISTINCT c.client_number AS clientnumber,c.client_name AS clientname, n c.address1 as address1,c.address2 as address2,c.address3 as address3,c.address4 as address4,c.address5 as address5, n to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS dateofbirth,date_part('year',age(c.date_of_birth)) AS old FROM ods.policy p n INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CURRENT_DATE) n AND DATE_PART('month', date_of_birth) = date_part('month', CURRENT_DATE) AND p.agent_number =:agentNumber "" "
/base/RoleMobile/listMenu,No Input Parameters,No query
/proposal/NewOds/findPolicyData,"""policyNumber"":policyNumber,""type"":type,""salesforceId"":pruforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""pageType"":pageType"," def query = ""SELECT b.desc1 as product, e.desc1 as status, to_char(a.proposal_received_date, 'dd FMMonth YYYY') as proposal_received_date, d.client_name as main_life_assured, "" + ""f.desc1 as premium_status "" + policyColumn + ""FROM ods.policy a "" + ""LEFT JOIN ods.system_code b ON a.product_code = b.key2 AND b.key1 = 'PRODUCT' "" + ""LEFT JOIN ods.insured c ON a.policy_number = c.policy_number AND c.life_number = '01' "" + ""LEFT JOIN ods.client d ON c.client_number = d.client_number "" + ""LEFT JOIN ods.system_code e ON a.policy_status = e.key2 AND e.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.system_code f ON a.premium_status_code = f.key2 AND f.key1 = 'PREMIUM_STATUS' "" + ""WHERE a.policy_number = :policyNumber "" + ""AND (a.agent_number = :agentNumber OR (a.agent_number IN :imPruList AND a.reff_agent = :agentNumber)) "" "
,," query = ""SELECT b.client_name "" + ""FROM ods.insured a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.policy_number = :policyNumber "" + ""AND a.life_number <> '01' "" "
/aobInterceptor/AobSqlAdapter/insertPushNotificationStatement,"""userid"":userid,""alert"":alert,""payload"":payload,""opened"":opened,""signature"":signature"," sql.execute (""INSERT INTO pushnotification(userid, alert, payload, opened) VALUES ('$params.userid', '$params.alert', '$params.payload', $params.opened)"") return [message:""Success""] } "
/aobConversion/AobSqlAdapter/getCollectApplPackStatusData,No Input Parameters," SELECT a.result, a.createdate, a.description,a.headstatusid, a.tailstatusid,b.description as headstatus, c.description as tailstatus FROM aobapplicationpackstatus a left join aobdescriptionstatus b on b.statusid = a.headstatusid left join aobdescriptionstatus c on c.statusid = a.tailstatusid "
,," (SELECT candidateid FROM aobcandidate WHERE npanumber = '${params.npa}') ORDER by headstatusid asc, tailstatusid asc, createdate desc; """""" "
/aobConversion/AobSqlAdapter/getDataEducationStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/aobInterceptor/AobSqlAdapter/getReasonPendingDocStatement,"""npanumber"":npa"," String query = ""select reason from aobapplicationpendingstatus where aobapplicationpendingstatusid = (n select max(aobapplicationpendingstatusid) n from aobapplicationpendingstatus where candidateid = (n select candidateid from aobcandidate where npanumber = '$params.npanumber'))"" "
/contest/ContestMaster/findAll,No Input Parameters," SELECT contest_code, contest_parent n FROM contest.master n WHERE contest_parent is null n UNION ALL n SELECT a.contest_code, a.contest_parent n FROM contest.master a n JOIN children b ON(a.contest_parent = b.contest_code)) n SELECT b.contest_code, b.contest_parent, b.contest_name, b.publish_date_start, b.new_bussiness_trx_date_start, b.new_bussiness_trx_date_end, c.name as channel, b.non_new_bussiness_trx_date_start, b.non_new_bussiness_trx_date_end, b.created_by, b.contest_type_code, b.created_date, b.submission_date_start, b.submission_date_end, n b.contest_code_index n FROM ( SELECT contest_code, contest_parent n FROM contest.master n WHERE contest_parent is null n UNION n SELECT z.contest_code, z.contest_parent n FROM children z ) a, contest.master b, security.m_channel_type c n WHERE a.contest_code = b.contest_code n AND cast (b.channel as integer) = c.id n ORDER BY a.contest_code, a.contest_parent"" "
/base/MenuMobile/findMenuMobileByLogin,No Input Parameters," SELECT d.* FROM usermanagement.m_menu_mobile d WHERE d.name IN ( SELECT DISTINCT(c.menu_mobile_id) FROM usermanagement.m_role_menu_mobile c WHERE c.role_mobile_id IN ( SELECT DISTINCT(b.role_mobile_id) FROM security.m_agent_pattern_role_mobile b WHERE b.agent_pattern_id IN ( SELECT a.id FROM security.m_agent_pattern a WHERE (a.agent_number = :agentNumber OR a.agent_number IS NULL) AND (a.agent_type = :agentType OR a.agent_type IS NULL) AND (a.office_code = :officeCode OR a.office_code IS NULL) AND (LOWER(a.pruforce_id) = LOWER(:pruforceId) OR a.pruforce_id IS NULL) ))) AND d.is_admin = :isAdmin """""" "
/pushNotif/moduleList,No Input Parameters,No query
/auth/Menu/index,No Input Parameters,No query
/corp/banner/getListActiveBanner,No Input Parameters," select tb.id, tb.title, tb.start_publish_date, tb.end_publish_date, split_part(tb.image_name, '|', 2) as image_name from corporatebanner.t_banner tb left join file.common_file cf on split_part(tb.image_name, '|', 2) = cf.file_name and cf.module = 'corporatebanner' where tb.activated is true and tb.end_publish_date > cast(now() at time zone '${timeZone}' as date) and tb.start_publish_date <= cast(now() at time zone '${timeZone}' as date) and array['${channelType}'] && (regexp_split_to_array(regexp_replace(tb.inputer_code, '^s+', '', ''),';')) order by tb.is_priority desc, tb.start_publish_date desc, tb.created_date desc """""" "
/newods/Production/findAllByRangeTransactionDate,No Input Parameters," select distinct policy_number, agent_number from ods.production where date(transaction_date) = '${data.transactionDate}' order by policy_number limit $max offset ${max*(page-1)} """""" return queryService.executeQueryTransform(query) } "
,," select distinct policy_number, agent_number from ods.production where date(transaction_date) between '${data.periodStart}' and '${data.periodEnd}' order by policy_number limit $max offset ${max*(page-1)} """""" return queryService.executeQueryTransform(query) } "
/auth/AgentType/getAgentType,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/updateWidgetCollapseConfigStatement,"""collapseValue"":collapseValue,""userId"":userId,""widgetId"":widgetId"," def query = ""UPDATE mobilefirst.user_widget_toggle SET collapse_value = '$params.collapseValue' WHERE user_id = '$params.userId' AND widget_id = '$params.widgetId'"" "
/aobConversion/AobSqlAdapter/changeAAJIExamRegistrationByAgentCodeStatement,No Input Parameters, UPDATE aobaajiexamregistration 
,," WHERE agentCode = '$params.agentCode'"""""" "
/followup/findTotalInforceLapsedPoliciesByAgentNumber,No Input Parameters," String query = ""SELECT (total15.total) AS total_inforce15 ,(total30.total) AS total_inforce30,(total45.total) AS total_inforce45, (total63.total) AS total_inforce63 ,(totalLessThan2Years.total) AS total_less_than2_years FROM n ( (SELECT COUNT(c.client_number) as total FROM ods.policy p INNER JOIN ods.client c ON c.client_number = p.owner_number WHERE p.policy_status = 'IF' AND p.billing_channel != 'A' AND CAST(paid_to_date AS DATE) BETWEEN CAST(CURRENT_DATE -INTERVAL '14 days' AS DATE) AND CAST(CURRENT_DATE AS DATE) AND (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) ) AS total15 n CROSS JOIN (SELECT COUNT(p.policy_number) as total FROM ods.policy p INNER JOIN ods.client c ON c.client_number = p.owner_number WHERE p.policy_status = 'IF' AND p.billing_channel != 'A' AND CAST(paid_to_date AS DATE) BETWEEN CAST(CURRENT_DATE -INTERVAL '29 days' AS DATE) AND CAST(CURRENT_DATE -INTERVAL '15 days' AS DATE) AND (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) ) AS total30 n CROSS JOIN (SELECT COUNT(p.policy_number) as total FROM ods.policy p INNER JOIN ods.client c ON c.client_number = p.owner_number WHERE p.policy_status = 'IF' AND p.billing_channel != 'A' AND CAST(paid_to_date AS DATE) BETWEEN CAST(CURRENT_DATE -INTERVAL '44 days' AS DATE) AND CAST(CURRENT_DATE -INTERVAL '30 days' AS DATE) AND (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) ) AS total45 n CROSS JOIN (SELECT COUNT(p.policy_number) as total FROM ods.policy p INNER JOIN ods.client c ON c.client_number = p.owner_number WHERE p.policy_status = 'LA' AND p.billing_channel != 'A' AND CAST(paid_to_date AS DATE) BETWEEN CAST(CURRENT_DATE -INTERVAL '62 days' AS DATE) AND CAST(CURRENT_DATE -INTERVAL '45 days' AS DATE) AND (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) ) AS total63 n CROSS JOIN (SELECT COUNT(p.policy_number) as total FROM ods.policy p INNER JOIN ods.client c ON c.client_number = p.owner_number WHERE p.policy_status = 'LA' AND p.billing_channel != 'A' AND CAST(paid_to_date AS DATE) BETWEEN CAST(CURRENT_DATE -INTERVAL '729 days' AS DATE) AND CAST(CURRENT_DATE -INTERVAL '63 days' AS DATE) AND (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) ) AS totalLessThan2Years )"" "
/corp/banner/reviseBanner,No Input Parameters,No query
/lti/LongTermIncentives/findYearlySummary,No Input Parameters," query = ""SELECT m.acct_year AS year, cast(SUM(m.total_lti_achievement/lup.unit_price) as varchar) as entitlement, cast((y.mperiod+1) as varchar) AS year_release, n y.fund_type AS fund, cast(y.release_unit as varchar), cast((y.current_unit_balance - y.accumulate_release_unit) as varchar) AS unit_retained n FROM ods.lti_monthly_detail m INNER JOIN ods.lti_balance b on b.agent_number = m.leader_number n INNER JOIN ods.lti_yearly_upload y on y.agent_number = m.leader_number n INNER JOIN ods.lti_unit_price lup on lup.year = cast(m.acct_year as int) and lup.month = cast(m.acct_month as int) and lup.year = y.mperiod n WHERE m.leader_number = :agentNumber n GROUP BY m.acct_year, y.mperiod, y.fund_type, y.release_unit, y.current_unit_balance, y.accumulate_release_unit n ORDER BY m.acct_year DESC"" "
/followup/findNtuCasePD,No Input Parameters," def query = """""" SELECT t.agent_number, a.agent_type, c.client_name, SUM(t.fup_total) as total FROM ods.agent a INNER JOIN ( SELECT b.agent_number, b.policy_number, c.client_name, count(a.fup_key) as fup_total FROM ods.follow_up a LEFT JOIN ods.policy b ON a.policy_number = b.policy_number LEFT JOIN ods.client c ON b.owner_number = c.client_number LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' LEFT JOIN ods.system_code e ON b.product_code = e.key2 AND e.key1 = 'PRODUCT' WHERE (b.agent_number IN (:queryUnit) OR (b.agent_number IN :imPruList AND b.reff_agent IN (:queryUnit))) AND b.valid_flag = '3' AND a.follow_up_status IN ('L','M','P','O') AND b.policy_status IN (:statusList) and to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop GROUP BY b.agent_number, b.policy_number, c.client_name ) AS t ON a.agent_number = t.agent_number LEFT JOIN ods.client c ON a.client_number = c.client_number """""" "
," query = query + ""WHERE a.agent_type = :filter "" } ",
/base/ProxyInterceptor/before,No Input Parameters,No query
/corp/banner/getBannerImageList,No Input Parameters," SELECT end_publish_date,start_publish_date, title, updated_date, workflow_status, image_name FROM corporatebanner.t_banner where end_publish_date >= CURRENT_DATE order by start_publish_date limit 6 """""" return queryService.executeQueryTransform(query) "
/imageprofile/SecurityInterceptor/before,No Input Parameters,No query
/base/Request/getUserDetail,No Input Parameters,No query
/followup/findUnitList,No Input Parameters," def employeeQuery = ""SELECT a.agent_number, a.agent_type, b.client_name "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.agent_number IN (:toplist2) "" + ""AND a.agent_type = 'AG' "" + ""AND a.terminated_date IS NULL "" "
,," def leaderQuery = ""SELECT a.agent_number, a.agent_type, b.client_name "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.agent_number IN (:userId) "" + ""AND a.terminated_date IS NULL "" "
,," def managerQuery = ""SELECT a.agent_number, a.agent_type, b.client_name "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.agent_number IN (:userId) "" + ""AND a.agent_type = 'AM' "" + ""AND a.terminated_date IS NULL "" "
,," def query = ""SELECT agent.* "" + ""FROM ( "" + sourceQuery + "") as agent "" + ""ORDER BY "" + orderDir + ""agent.client_name ASC "" + ""LIMIT :size OFFSET :start "" "
/aobConversion/AobFuseAdapter/get,No Input Parameters,No query
/base/Processor/editProcessGroup,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/updateWidgetToggleConfigStatement,"""toggleValue"":toggleValue,""userId"":userId,""widgetId"":widgetId"," def query = ""UPDATE mobilefirst.user_widget_toggle SET toggle_value = '$params.toggleValue' WHERE user_id = '$params.userId' AND widget_id = '$params.widgetId'"" "
/auth/ActivityLogInterceptor/before,No Input Parameters,No query
/auth/Role/index,No Input Parameters,No query
/auth/Menu/editMenu,No Input Parameters,No query
/newsUpdateNew/NewsType/getNewsType,No Input Parameters,No query
/corp/banner/approveBanner,No Input Parameters,No query
/auth/Request/index,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getCountFastStartRegistrationStatement,No Input Parameters," String query = ""select count(*) from aobfaststartregistration where candidateid = (select candidateid from aobcandidate where npanumber = '$params.npanumber')"" "
/lti/LongTermIncentives/findLatestUpdate,No Input Parameters," query = ""select left(max(time_tracking),19) as latest from monitoring.execution_status where table_name in ('LTIBPF') and step_status = 'DONE'"" "
/auth/RoleMobile/putRoleMobile,No Input Parameters,No query
/corp/banner/submitBanner,No Input Parameters,No query
/base/DroolsRule/index,No Input Parameters,No query
/client/findStatusBirthdayListMarch,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =3 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/base/Role/index,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getAajiCanStm,No Input Parameters," select b.aajiexamlocation, b.aajiexamscheduleid, b.aajiexamdate, b.aajiexamstarttime, b.aajiexamendtime from aobaajiexamregistration a inner join aobaajiexamschedule b on a.aajiexamscheduleid = b.aajiexamscheduleid where a.aobaajiexamregistrationid = (select max(aobaajiexamregistrationid) from aobaajiexamregistration "
,, select candidateid from aobcandidate 
/contest/ContestMaster/checkDuplicateContestName,No Input Parameters," String query = ""SELECT COUNT(*) FROM contest.master m WHERE lower(m.contest_name) LIKE LOWER('${escapedContestName}')"" if (data.contestParent) query += "" AND m.contest_parent = '${data.contestParent}'"" else query += "" AND m.contest_parent IS NULL"" "
/followup/findTotalRecruitmentUnitList,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM notification.pushnotification pn "" + ""WHERE pn.userid in (:list) and pn.opened is FALSE "" "
/followup/findStatusPolicyHolderPendingRequirement,No Input Parameters," def query = ""SELECT distinct(p.policy_status) as key, sc.desc1 as description "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p on f.policy_number = p.policy_number "" + ""LEFT JOIN ods.client c on p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc on p.policy_status = sc.key2 "" + ""LEFT JOIN ods.alteration a on f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '1' AND sc.key1 LIKE 'POLICY_STATUS' "" + ""AND f.follow_up_status in ('L','M','P','O') AND lower(a.department) LIKE lower(:department) AND a.alteration_status in ('O','F') "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/corp/BannerType/deleteBannerType,No Input Parameters,No query
/corp/UploadImage/upload,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/findUserApplicationConfigStatement,"""userId"":userId"," def query = ""select * from mobilefirst.queryAppConfiguration('$params.userId')"" "
/productionHistory/NewOds/findUnitList,"""salesforceId"":salesforceId,""agentCode"":agentCode,""year"":year,""month"":month,""filterBy"":filterBy,""sortDir"":sortDir,""size"":size,""page"":page,""channelType"":channelType"," def query = ""SELECT c.client_name, c.client_number, a.agent_number, b.agent_type, $apeNet as total_ape "" + ""FROM ods.production_agent a "" + ""LEFT JOIN ods.agent b ON a.agent_number = b.agent_number "" + ""LEFT JOIN ods.client c ON b.client_number = c.client_number "" + ""WHERE a.leader_number = :agentNumber "" + ""AND a.period_month = :month AND a.period_year = :year $agentType "" + (filterStatus ? ""AND b.agent_type = :filterBy "" : """" ) + ""ORDER BY total_ape "" + sortDir + "" "" + ""LIMIT :size OFFSET :start "" "
/performanceMonitoring/PromotionChallenge/findAllPolicy,"""id"":id,""page"":page,""size"":size,""agentNumber"":agentNumber,""leaderNumber"":agentNumber,""searchBy"":searchBy,""searchVal"":searchVal,""searchBy2"":searchBy2,""searchVal2"":searchVal2,""orderBy"":orderBy,""direction"":direction,""salesforceId"":pruforceId,""agentCode"":agentCode"," def query = """""" SELECT * FROM (SELECT policy.policy_number policynumber, production.api_01 policyvalue, policy.productcode, policy.clientname, production.policystatus, production.transaction_date transactiondate FROM (SELECT production.api_01, production.agent_number, production.policy_number, cast(date(production.transaction_date) as varchar) transaction_date, sc.desc1 AS policyStatus FROM ods.production production INNER JOIN ods.system_code sc ON sc.key1 = 'TRAN_CODE' AND sc.key2 = production.transaction_code AND production.agent_number = '$agentNumber' AND production.transaction_date >= '${productionPeriod.periodStart}' AND production.transaction_date <= '${productionPeriod.periodStop}' ) production INNER JOIN (SELECT policy.policy_number, policy.product_code, policy.owner_number, sc.desc1 AS productCode, client.client_Name AS clientName FROM ods.policy policy INNER JOIN ods.system_code sc ON sc.key1 = 'PRODUCT' AND sc.key2 = policy.product_code INNER JOIN ods.client client ON policy.owner_number = client.client_number ) policy ON production.policy_number = policy.policy_number ) as p WHERE (lower(clientName) LIKE ${searchVal} OR policyNumber LIKE ${searchVal}) AND lower(policystatus) LIKE ${searchVal2} ORDER BY CASE '${data.orderBy}' WHEN 'clientNameAsc' THEN clientName END ASC, CASE '${data.orderBy}' WHEN 'clientNameDesc' THEN clientName END DESC, CASE '${data.orderBy}' WHEN 'policyNumberAsc' THEN policyNumber END ASC, CASE '${data.orderBy}' WHEN 'policyNumberDesc' THEN policyNumber END DESC, CASE '${data.orderBy}' WHEN 'transactionDateAsc' THEN transactionDate END ASC, CASE '${data.orderBy}' WHEN 'transactionDateDesc' THEN transactionDate END DESC LIMIT $max OFFSET ${(page - 1) * max} """""" "
/commonUtils/Approval/sendApproval,No Input Parameters,No query
/corp/BankUnit/deleteBankUnit,No Input Parameters,No query
/proposal/NewOds/findSubstandardData,"""policyNumber"":policyNumber,""salesforceId"":pruforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""pageType"":pageType"," def query1 = ""SELECT string_agg(substd_code, ' ') as substandard_rating "" + ""FROM ods.substandard WHERE policy_number = :policyNumber"" "
,," def query2 = ""SELECT STRING_AGG(CONCAT_WS(' ', "" + ""CASE WHEN (LEFT(exclusion_clauses_1,1) <> '*') AND (LEFT(exclusion_clauses_1,2) <> '**') THEN exclusion_clauses_1 END, "" + ""CASE WHEN (LEFT(exclusion_clauses_2,1) <> '*') AND (LEFT(exclusion_clauses_2,2) <> '**') THEN exclusion_clauses_2 END, "" + ""CASE WHEN (LEFT(exclusion_clauses_3,1) <> '*') AND (LEFT(exclusion_clauses_3,2) <> '**') THEN exclusion_clauses_3 END, "" + ""CASE WHEN (LEFT(exclusion_clauses_4,1) <> '*') AND (LEFT(exclusion_clauses_4,2) <> '**') THEN exclusion_clauses_4 END, "" + ""CASE WHEN (LEFT(exclusion_clauses_5,1) <> '*') AND (LEFT(exclusion_clauses_5,2) <> '**') THEN exclusion_clauses_5 END, "" + ""CASE WHEN (LEFT(exclusion_clauses_6,1) <> '*') AND (LEFT(exclusion_clauses_6,2) <> '**') THEN exclusion_clauses_6 END), ', ') as exclusion "" + ""FROM ods.exclusion WHERE policy_number = :policyNumber "" + ""AND follow_up_code IN ('XRT','MUR') "" "
/aobConversion/AobSqlAdapter/getAAJIScheduleIdByNPA,No Input Parameters," String query = ""SELECT max(aajiexamscheduleid) as scheduleid FROM aobaajiexamregistration where candidateid = (select candidateid from aobcandidate where npanumber='$params.npanumber')"" "
/base/RoleMobile/postRoleMobile,No Input Parameters,No query
/followup/findTotalBillingPendingRequirementUnitList,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND (to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop) "" "
/followup/findAgentTypeClaimPendingRequirementPD,No Input Parameters," def query = """""" SELECT a.agent_type FROM ods.agent a INNER JOIN ( SELECT b.agent_number FROM ods.follow_up a LEFT JOIN ods.policy b ON a.policy_number = b.policy_number LEFT JOIN ods.client c ON b.owner_number = c.client_number LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' LEFT JOIN ods.alteration e ON a.alteration_number = e.alteration_number AND a.policy_number = e.policy_number LEFT JOIN ods.system_code f ON b.product_code = f.key2 AND f.key1 = 'PRODUCT' WHERE (b.agent_number IN (:queryUnit) OR (b.agent_number IN :imPruList AND b.reff_agent IN (:queryUnit))) AND b.valid_flag = '1' AND a.follow_up_status IN ('L','M','P','O') AND e.department = :department AND e.alteration_status IN ('O','F') AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop GROUP BY b.agent_number ) AS t ON a.agent_number = t.agent_number GROUP BY a.agent_type """""" "
/contest/ContestMaster/editWithNoApproval,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getUnreadPushNotificationStatement,No Input Parameters," String query = ""SELECT id, userid, alert, payload, opened FROM pushnotification where opened = false AND userid = '$params.userid'"" "
/base/AgentType/getChannelType,No Input Parameters," select * from security.m_channel_type """""" return queryService.executeQueryTransform(query) } "
/auth/AgentPattern/checkRoleMobileBeforeUpload,No Input Parameters,No query
/auth/Agent/checkLeader,No Input Parameters," def query = ""SELECT agent_number FROM ods.agent WHERE agent_number = :agentNumber and leader_number = :leaderNumber"" "
/newods/AgentHierarchy/findAllTotalDirectUnit ,No Input Parameters," select leader_number as agent_number,count(*) as total from ods.agent_hierarchy where leader_number in ${queryService.convertListToString(data.agentNumberList)} and agent_type_original = 'AG' and agent_number != leader_number group by leader_number order by leader_number """""" return queryService.executeQueryTransform(query) } "
/newods/Query/findAllSQL ,No Input Parameters,No query
/aobConversion/AobSqlAdapter/findUserPermittedStatement,No Input Parameters," def query = ""SELECT CASE WHEN (SELECT COUNT(pruforceid) FROM mobilefirst.user_permitted) = 0 THEN true ELSE CASE WHEN count(pruforceid) > 0 THEN true ELSE false END END AS statuspermitted "" + ""FROM mobilefirst.user_permitted WHERE pruforceid = '$params.pruforceId'"" "
/followup/findTotalClaimUnitDetail,No Input Parameters," def query = ""SELECT count(*) as total, p.agent_number, ag.agent_type, b.client_name "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number "" + ""LEFT JOIN ods.client b ON ag.client_number = b.client_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND (to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop) "" + ""group by p.agent_number, ag.agent_type, b.client_name "" "
/aobInterceptor/AobSqlAdapter/seqPushNotificationStatement,No Input Parameters," String query = ""SELECT nextval('pruaob.pushnotification_id_seq')"" "
/base/ActivityLog/saveActivityLog,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/checkAAJIValidforAgentBeforeHourStatement,No Input Parameters," String query = ""SELECT a.aajiexamexpireddate >= current_date as isvalidexpireddate,  a.aajiexamdate >= current_date + 4 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT)  and a.aajiexamdate < current_date + 17 as isvalidexamdate  FROM aobaajiexamschedule a  left join ref_aajiquotacount b  on a.aajiexamscheduleid=b.aajiexamscheduleid  where a.aajiexamscheduleid=$params.aajiexamscheduleid"" "
/proposal/NewOds/findUnit,"""salesforceId"":salesforceId,""agentCode"":agentNumber,""type"":type,""filterBy"":filterBy,""sortDir"":orderBy,""size"":size,""page"":page,""channelType"":channelType"," def employeeQuery = ""SELECT a.agent_number, a.agent_type, b.client_name, "" + ""(SELECT COUNT (c.policy_number) FROM ods.policy c WHERE (c.agent_number = a.agent_number OR (c.agent_number IN :imPruList AND c.reff_agent = a.agent_number)) AND c.policy_status IN (:statusList)) AS total "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.leader_number = :agentNumber "" + ""AND a.agent_type IN (${getAgentType(""Individual"",channelType)})"" + ""AND a.terminated_date IS NULL "" "
,," def leaderQuery = ""SELECT a.agent_number, a.agent_type, b.client_name, "" + ""(SELECT COUNT (c.policy_number) FROM ods.policy c WHERE (c.agent_number = a.agent_number OR (c.agent_number IN :imPruList AND c.reff_agent = a.agent_number)) AND c.policy_status IN (:statusList)) AS total "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.agent_number = :agentNumber "" + ""AND a.terminated_date IS NULL "" "
,," def qry = ""SELECT agent_type FROM ods.agent WHERE agent_number = :agentNumber "" "
,," sourceQuery = ""SELECT a.agent_number, a.agent_type, b.client_name, "" + ""(SELECT COUNT (c.policy_number) FROM ods.policy c "" + ""WHERE (c.agent_number = a.agent_number OR (c.agent_number IN :imPruList AND c.reff_agent = a.agent_number)) "" + ""AND c.policy_status IN (:statusList)) AS total "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.leader_number = :agentNumber "" + ""AND a.agent_type = '$filterBy' "" + ""AND a.terminated_date IS NULL "" } "
,," def query = ""SELECT agent.* "" + ""FROM ( "" + sourceQuery + "") as agent "" + ""ORDER BY "" + orderDir + ""agent.client_name ASC "" + ""LIMIT :size OFFSET :start "" "
/contest/ContestMaster/findAllContestMasterNotInclParent,No Input Parameters," String query = ""SELECT a.contest_code, a.contest_name, a.created_date "" + ""FROM contest.master a, security.m_channel_type b "" + ""WHERE cast (a.channel as integer) = b.id AND CASE WHEN a.contest_type_code != 'P' THEN :contestRange END "" + ""ORDER BY a.contest_name ASC"" "
/followup/findTotalNewBusinessPending,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '3' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND p.policy_status in (:statusList) "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/aobInterceptor/AobSqlAdapter/checkAAJIQuotaStatement,No Input Parameters," SELECT ae.aajiexamscheduleid, rf.reserved, ae.aajiexamquota FROM ref_aajiquotacount rf RIGHT JOIN aobaajiexamschedule ae ON ae.aajiexamscheduleid = rf.aajiexamscheduleid WHERE ae.aajiexamscheduleid = '$params.aajiexamscheduleid' """""" "
/auth/Agent/getAgentScope,No Input Parameters," def query = ""SELECT id, scope, need_approval, channel FROM security.m_agent_type where name = :agentType"" "
/security/Request/getUserDetail,No Input Parameters,No query
/base/AgentType/saveAgentType,No Input Parameters,No query
/contest/ContestMaster/revise,No Input Parameters,No query
/newods/Policy/findAllByProposalDateAndAgent,No Input Parameters," select count(policy_number) from ods.policy where date(proposal_date) between '${data.proposalPeriodStart}' and '${data.proposalPeriodStop}' and agent_number = '${data.agentNumber}' """""" return queryService.executeQueryTransform(query) } "
/followup/findTotalAfterDueDateUnitList,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.policy p "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.policy_status = 'IF' "" + ""AND p.billing_channel = 'A' "" + ""AND sc.key1 like 'POLICY_STATUS' "" "
/followup/findTotalClaimPendingRequirementUnit,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/corp/BannerApproval/sendApproval,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getCountBpmProcessStatement,No Input Parameters," String query = ""select count(*) from aobbpmprocesslogstatus where npanumber = '$params.npanumber'"" return queryService.executeQuery(query) } "
/newsUpdateNew/NewsUpdateApproval/findAll,No Input Parameters,No query
/newsUpdateNew/News/getDataByPagination,No Input Parameters,No query
/corp/banner/getDetailBanner,No Input Parameters, select * from corporatebanner.t_banner 
/auth/Ldap/getUsernameList,No Input Parameters,No query
/base/ActivityLog/index,No Input Parameters," def query = ""SELECT a.username, a.ipOrigin, a.ipDestination, a.path, a.method, a.created FROM ActivityLog as a"" "
/base/MenuMobile/getMenuDetail,No Input Parameters,No query
/contest/MyContest/findAllBonanza,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""contestCode"":contestCode"," select * from contest.master where contest_type_code = 'B' and contest_parent = :contestparent order by contest_code """""" "
/followup/findTotalRecruitmentDetail,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getScoreRecExam,No Input Parameters," String query = ""select resultform from aobrecruitmentresult where candidateid = (select candidateid from aobcandidate where npanumber = '$params.npanumber')"" "
/proposal/NewOds/findPolicyByStatus,"""agentNumber"":agentNumber,""salesforceId"":pruforceId,""type"":type,""agentCode"":agentCode,""searchWords"":searchWords,""sortBy"":sortBy,""size"":size,""page"":page,""statusList"":statusList,""pageType"":PageType,"," def query = ""SELECT b.client_name as policy_holder_name, TO_CHAR(a.policy_issued_date,'YYYY-MM-DD') as policy_issued_date, a.proposal_number, a.policy_number, c.desc1 as product_name, d.desc1 as status "" + ""FROM ods.policy a "" + ""LEFT JOIN ods.client b ON a.owner_number = b.client_number "" + ""LEFT JOIN ods.system_code c ON a.product_code = c.key2 AND c.key1 = 'PRODUCT' "" + ""LEFT JOIN ods.system_code d ON a.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""WHERE (a.agent_number = :agentNumber OR (a.agent_number IN :imPruList AND a.reff_agent = :agentNumber)) "" + ""AND a.policy_status IN :statusList "" + ""AND (b.client_name ILIKE :searchWords OR "" + numberCol + "" ILIKE :searchWords) "" + ""ORDER BY "" + sortBy + ""LIMIT CAST(:size AS NUMERIC) OFFSET CAST(:start AS NUMERIC) "" "
/contest/Completed/getYears,No Input Parameters, select param_descrip as show_filter from general.global_param 
,," select distinct(extract(year from a.publish_date_start)) as year from contest.master a, contest.completed b where b.key2 = a.contest_code and a.contest_type_code = 'C' and a.publish_date_start is not null order by year desc $limit """""" return queryService.executeQueryTransform(queryDistinctYearCompleted).year } "
/contest/Monitoring/findContestDescription,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentType"":agentType,""contestCode"":contestCode",No query
/aobConversion/AobSqlAdapter/getDataReligionStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/newods/Policy/findAllPolicyListFromContestData,No Input Parameters," SELECT b.client_name as policy_holder_name, a.proposal_number, a.policy_number, c.desc1 as product_name, d.desc1 as status, a.proposal_received_date FROM ods.policy a LEFT JOIN ods.client b ON a.owner_number = b.client_number LEFT JOIN ods.system_code c ON a.product_code = c.key2 AND c.key1 = 'PRODUCT' LEFT JOIN ods.system_code d ON a.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' WHERE (b.client_name ILIKE '%$searchBy%' OR a.policy_number LIKE '%$searchBy%') AND a.policy_number in $policyNumberList $query2 $query3 ORDER by $orderBy $orderDir limit $max offset ${max * (page - 1)}; "
/contest/ContestMaster/reject,No Input Parameters,No query
/aobInterceptor/AobSqlAdapterX/getFastStartCityStatement,No Input Parameters," String query = ""SELECT DISTINCT(faststartlocation)  FROM aobfaststartschedule  where faststartenddate > current_date"" "
/persistency/SecurityInterceptor/before,No Input Parameters,No query
/security/Role/getRole,No Input Parameters,No query
/base/MenuMobile/checkDuplicateName,No Input Parameters,No query
/auth/RoleMobile/listMenu,No Input Parameters,No query
/contest/ContestMaster/findContestByName,No Input Parameters,No query
/client/findBirthdayListTodoWeekly,"""agentNumber"":agentNumber,""page"":page,""size"":size,""searchBy"":searchBy,""orderBy"":orderBy,""salesforceId"":salesforceId,""agentCode"":agentNumber"," String query = ""SELECT DISTINCT c.client_number AS client_number,c.client_name AS client_name, c.address1 as address1,sc.desc1 as client_status, n c.address2 as address2,c.address3 as address3,c.address4 as address4,c.address5 as address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, n date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN ods.policy p ON p.owner_number = c.client_number n LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 WHERE p.agent_number =:agentNumber n AND sc.key1 like 'CONTRACT_RELATION' AND right(to_char(date_of_birth,'yyyy-mm-dd'),5) in ( select right(to_char((generate_series(current_date, (current_date + 7), '1 day')),'yyyy-mm-dd'),5))"" "
/aobConversion/AobSqlAdapter/checkAAJIQuotaCandidateCountStatement,No Input Parameters," String query = ""SELECT COUNT(aajiexamscheduleid) from aobaajiexamregistration aer  where aer.aajiexamscheduleid = $params.aajiexamscheduleid;"" "
/corp/banner/getLatestRow,No Input Parameters,No query
/auth/AgentRole/putAgentRole,No Input Parameters,No query
/base/Proxy/index,No Input Parameters,No query
/proposal/NewOds/findFilterFollowUpStatus,"""salesforceId"":pruforceId,""agentCode"":agentNumber,""policyNumber"":policyNumber"," def query = ""SELECT DISTINCT(a.follow_up_status) as value, d.desc1 as name "" + ""FROM ods.follow_up a "" + ""LEFT JOIN ods.system_code d ON a.follow_up_status = d.key2 AND d.key1 = 'FLUP_CODE' "" + ""WHERE a.policy_number = :policyNumber "" + ""AND a.follow_up_status IN ('L','M','P','O') "" + ""ORDER BY a.follow_up_status ASC"" "
/contest/BackOfficeSecurityInterceptor/before,No Input Parameters,No query
/followup/findAgentTypeNtuCasePD,No Input Parameters," def query = """""" SELECT a.agent_type FROM ods.agent a INNER JOIN ( SELECT b.agent_number FROM ods.follow_up a LEFT JOIN ods.policy b ON a.policy_number = b.policy_number LEFT JOIN ods.client c ON b.owner_number = c.client_number LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' LEFT JOIN ods.system_code e ON b.product_code = e.key2 AND e.key1 = 'PRODUCT' WHERE (b.agent_number IN (:queryUnit) OR (b.agent_number IN :imPruList AND b.reff_agent IN (:queryUnit))) AND b.valid_flag = '3' AND a.follow_up_status IN ('L','M','P','O') AND b.policy_status IN (:statusList) and to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop GROUP BY b.agent_number ) AS t ON a.agent_number = t.agent_number GROUP BY a.agent_type """""" "
/aobConversion/AobSqlAdapter/changeAAJIExamRegistrationByNPAStatement,No Input Parameters, UPDATE aobaajiexamregistration 
,," WHERE candidateid = ( SELECT candidateid FROM aobcandidate WHERE npanumber = '$params.npanumber' )"""""" "
/base/AgentType/getChannelTypeById,No Input Parameters, select * from security.m_channel_type 
/base/Menu/editMenu,No Input Parameters,No query
/corp/banner/deleteBanner,No Input Parameters,No query
/followup/findStatusClaimPendingRequirement,No Input Parameters," def query = ""SELECT distinct(p.policy_status) as key, sc.desc1 as description "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p on f.policy_number = p.policy_number "" + ""LEFT JOIN ods.client c on p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc on p.policy_status = sc.key2 "" + ""LEFT JOIN ods.alteration a on f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '1' AND sc.key1 LIKE 'POLICY_STATUS' "" + ""AND f.follow_up_status in ('L','M','P','O') AND lower(a.department) LIKE lower(:department) AND a.alteration_status in ('O','F') "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/followup/findPolicyInCancelPeriod,No Input Parameters," def query = ""SELECT p.policy_number as policy_number, p.billing_channel, c.client_name as name, p.policy_status, sc.desc1 as desc2, "" + ""to_char(p.paid_to_date, 'dd FMMonth YYYY') AS paid_to_date, e.desc1 as product_name "" + ""FROM ods.policy p "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""LEFT JOIN ods.system_code e ON p.product_code = e.key2 AND e.key1 = 'PRODUCT' "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.policy_status = 'IF' AND p.billing_channel = 'A' AND sc.key1 like 'POLICY_STATUS' "" "
/newods/Policy/findAllPolicyStatus,No Input Parameters," String query = """"""select key2 as policy_status, desc1 as description from ods.system_code "
/auth/User/putUser,No Input Parameters,No query
/contest/MyContest/findPolicyListStatus,"""type"":""proposal"",""contestCode"":contestCode",No query
/auth/Menu/deleteMenu,No Input Parameters," return [message: ""Failed to delete menu ""+menu.name+"". It has been used by role(s)"",content:null, status:500] } MenuUrl.findAllByMenu(menu).each{it.delete()} deleteLinkToParent(id) menu.delete() return [message: ""Success delete menu with id: $id"",content:null, status:200] } "
/corp/banner/getDataByWorkflowStatus,No Input Parameters,No query
/base/Request/index,No Input Parameters,No query
/pushNotif/editEvent,No Input Parameters,No query
/base/Menu/findAllMenuParent,No Input Parameters,No query
/performanceMonitoring/Master/findAll,No Input Parameters,No query
/newsUpdateNew/MobileNews/getDetailPriority,No Input Parameters," select a.*, b.type_name, b.type_file from newsupdate.t_news a, newsupdate.m_news_type b where a.id = $Id and a.agent_type like '%$agentType%' and a.news_type_id = b.id """""" "
/pushNotif/saveEvent,No Input Parameters,No query
/client/findStatusBirthdayListApril,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =4 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/contest/Monitoring/findAll,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentType"":agentType,""max"":max,""page"":page"," select a.key2 as contest_code, date_part('day', age(cast(b.monitoring_period_end as timestamp), cast(b.monitoring_period_start as timestamp))) as days_left from contest.monitoring a, contest.master b "
/proposal/NewOds/findPremiumData,"""policyNumber"":policyNumber,""type"":type,""salesforceId"":pruforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""pageType"":pageType"," def query = ""SELECT a.instalment_premium, g.single_premium, ABS(d.current_balance_amount) as suspend_amount_premium, ABS(e.current_balance_amount) as suspend_amount_for_top_up, "" + ""to_char(a.paid_to_date, 'dd FMMonth YYYY') as premium_due_date, b.desc1 as payment_method, c.desc1 as payment_frequency, a.currency, f.client_name as payor, "" + ""CASE WHEN a.currency = 'IDR' THEN 'Rp' WHEN a.currency = 'USD' THEN 'US$' ELSE a.currency END as currency_symbol "" + policyColumn + ""FROM ods.policy a "" + ""LEFT JOIN ods.system_code b ON a.billing_channel = b.key2 AND b.key1 = 'BILL_CHANNEL' "" + ""LEFT JOIN ods.system_code c ON a.billing_frequency = c.key2 AND c.key1 = 'PAYMENT_FREQ' "" + ""LEFT JOIN ods.policy_values d ON a.policy_number = d.policy_number AND d.sub_account_code = 'LP' AND d.sub_account_type = 'S' AND a.currency = d.original_currency "" + ""LEFT JOIN ods.policy_values e ON a.policy_number = e.policy_number AND e.sub_account_code = 'LP' AND e.sub_account_type = 'TS' AND a.currency = e.original_currency "" + ""LEFT JOIN ods.component g ON a.policy_number = g.policy_number AND g.life_number = '01' AND g.coverage = '01' AND g.rider = '00' "" + ""JOIN ods.client_role h ON a.policy_number = h.policy_number "" + ""JOIN ods.client f ON h.client_number = f.client_number AND h.client_role_code = 'PY' "" + ""WHERE a.policy_number = :policyNumber "" + ""AND (a.agent_number = :agentNumber OR (a.agent_number IN :imPruList AND a.reff_agent = :agentNumber)) "" "
/aobConversion/AobSqlAdapter/updateWidgetToggleConfigStatement,No Input Parameters," def query = ""UPDATE mobilefirst.user_widget_toggle SET toggle_value = '$params.toggleValue' WHERE user_id = '$params.userId' AND widget_id = '$params.widgetId'"" "
/auth/AgentRole/postAgentRole,No Input Parameters,No query
/aobInterceptor/AobFuseAdapterX/get,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getCountReTakerAAJIStatement,No Input Parameters," String query = ""SELECT * FROM aobaajiexamregistration a WHERE to_char(a.aajiexamdate,'yyyymmdd') >= to_char(now(),'yyyymmdd') n AND (a.statusregister <> 'TIDAK TERDAFTAR' or a.statusregister is null) and not exists (select * from aobaajiexamresult b n where ((a.candidateid = b.candidateid) or (a.agentcode = b.agentCode)) and a.aajiexamscheduleid = b.aajiexamscheduleid ) n and a.statusagent = 'retaker' and a.agentcode = '$params.agentCode'"" "
/aobConversion/AobSqlAdapter/getCountAgentJourney,No Input Parameters," String query = ""select count(*)  from aobapplicationpackstatus  "
,, select candidateid  from aobcandidate  
/aobConversion/AobSqlAdapter/findUserApplicationConfigStatement,No Input Parameters," def query = ""select * from mobilefirst.queryAppConfiguration('$params.userId')"" "
/aobInterceptor/AobSqlAdapter/getAgentCodeAndReinstateStatement,No Input Parameters," String query = ""select agentcode, isreinstate from aobcandidate where npanumber='$params.npanumber';"" "
/contest/ContestMaster/findContestType,No Input Parameters," final String query = ""SELECT a.* FROM general.global_param a n WHERE a.condition = 'CONTEST_TYPE' n ORDER BY a.param_code DESC"" "
/newsUpdateNew/News/getNewsHome,No Input Parameters,No query
/auth/MenuMobile/checkDuplicateName,No Input Parameters,No query
/base/DroolsRule/findDroolsRule,No Input Parameters,No query
/base/Approval/findApprovalPropertiesByUri,No Input Parameters,No query
/base/Processor/editBatch,No Input Parameters,No query
/contest/MyContest/findBonanzaDescription,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""contestCode"":contestCode",No query
/newsUpdateNew/NewsType/getNewsTypeIcon,No Input Parameters,No query
/base/Processor/saveBatch,No Input Parameters,No query
/base/Agent/verify,No Input Parameters,No query
/contest/Base/save,No Input Parameters,No query
/pushNotif/deleteEvent,No Input Parameters,No query
/auth/AgentType/editAgentType,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/getNPAToken,No Input Parameters," String query = """""" INSERT INTO mobilefirst.npa_token values (:uid) """""" "
/agentprofile/SecurityInterceptor/before,No Input Parameters,No query
/base/DroolsRule/save,No Input Parameters,No query
/auth/AgentType/getChannelType,No Input Parameters," select * from security.m_channel_type """""" return queryService.executeQueryTransform(query) } "
/aobInterceptor/AobSqlAdapter/getCountAAJIRegistrationStatement,"""agentCode"":agentCode"," select a.aobaajiexamregistrationid from aobaajiexamregistration a, aobaajiexamresult b where a.statusregister = 'TERDAFTAR' and a.agentcode = b.agentcode and aajiexamresult <> 'PASS' and a.agentcode = '$params.agentCode'"""""" "
/auth/Role/getMenuUrl,No Input Parameters,No query
/contest/Batch/generateRule,No Input Parameters," log.error ""Failed to insert contest rule, status = $responseInsertRule.status"" throw new AppException(String.valueOf(responseInsertRule.status), ""Failed to insert contest rule"") } "
/production/Newods/findAllProductionUnitMonthly,"""agentType"":""%%"",""page"":page,""size"":size,""leaderNumber"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber,/*""orderBy"":orderBy,*/""direction"":direction,""searchBy"":searchBy,""searchVal"":searchVal,""channelType"":channelType"," def query = """""" SELECT clientname, clientnumber, agentnumber, agenttype, CAST(SUM(totnetapi) AS VARCHAR) totnetapi FROM (SELECT client.client_name clientname, client.client_number clientnumber, agent.agent_number agentnumber, agent.agent_type agenttype, CASE WHEN agenth_prod.total_ape is null THEN '0' ELSE agenth_prod.total_ape END AS totnetapi FROM (SELECT agenth.agent_number, prod.total_ape FROM ods.agent_hierarchy agenth LEFT JOIN (SELECT production_agent.agent_number, ${ape} as total_ape FROM ods.production_agent WHERE (CASE WHEN '${periodMonth}' is not null THEN (production_agent.period_month LIKE '${periodMonth}' AND production_agent.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_agent.period_year LIKE '${periodYear}' END) ) prod ON prod.agent_number = agenth.agent_number WHERE (agenth.leader_number = :leaderNumber AND agenth.agent_type_original IN (${getAgentType(""Individual"",""${channel}"")})) ${agentLeader} UNION SELECT production_agent.agent_number, ${ape} as total_ape FROM ods.production_agent WHERE (CASE WHEN '${periodMonth}' is not null THEN (production_agent.period_month LIKE '${periodMonth}' AND production_agent.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_agent.period_year LIKE '${periodYear}' END) AND production_agent.leader_number = :leaderNumber ) AS agenth_prod LEFT JOIN ods.agent ON agent.agent_number = agenth_prod.agent_number LEFT JOIN ods.client ON client.client_number = agent.client_number ) AS res WHERE lower(${searchBy}) LIKE '${searchVal}' GROUP BY clientname, clientnumber, agentnumber, agenttype ORDER BY CASE '${request.direction?.toLowerCase()}' WHEN 'asc' THEN SUM(totnetapi) END ASC, CASE '${request.direction?.toLowerCase()}' WHEN 'desc' THEN SUM(totnetapi) END DESC LIMIT CAST(:max AS NUMERIC) offset CAST(:min AS NUMERIC) """""" "
/client/findClientByAgentPD,"""agentNumber"":agentNumber,""page"":page,""size"":size,""searchBy"":searchBy,""salesforceId"":pruforceId,""agentCode"":agentCode,""pageType"":pageType"," String query = ""SELECT DISTINCT c.client_number AS client_number, c.client_name AS client_name, sc.desc1 as client_status, n c.address1 as address1,c.address2 as address2,c.address3 as address3,c.address4 as address4,c.address5 as address5, a.agent_number AS agent_code, c1.client_name AS agent_name FROM ods.policy p n INNER JOIN ods.client c ON p.owner_number = c.client_number INNER JOIN ods.system_code sc ON c.client_type = sc.key2 n LEFT JOIN ods.agent a ON p.agent_number = a.agent_number LEFT JOIN ods.client c1 ON a.client_number = c1.client_number n WHERE (p.agent_number IN :queryUnit OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND sc.key1 like 'CLIENT_TYPE'"" "
/proposal/NewOds/findTotalPolicyByType,"""agentNumber"":agentNumber,""type"":type,""salesforceId"":pruforceId,""agentCode"":agentCode,""pageType"":pageType"," def query = ""SELECT to_char(COUNT(policy_number), 'FM999999999999999999') AS total "" + ""FROM ods.policy "" + ""WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) "" + ""AND policy_status IN :statusList"" "
/client/findBirthdayListTodoDaily,"""agentNumber"":agentNumber,""page"":page,""size"":size,""searchBy"":searchBy,""orderBy"":orderBy,""salesforceId"":salesforceId,""agentCode"":agentNumber"," String query = ""SELECT DISTINCT c.client_number AS clientnumber,c.client_name AS clientname, sc.desc1 as client_status, n c.address1 as address1,c.address2 as address2,c.address3 as address3,c.address4 as address4,c.address5 as address5, n to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS dateofbirth,date_part('year',age(c.date_of_birth)) AS old FROM ods.policy p n INNER JOIN ods.client c ON p.owner_number = c.client_number LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number n lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 WHERE DATE_PART('day', date_of_birth) = date_part('day', CURRENT_DATE) n AND DATE_PART('month', date_of_birth) = date_part('month', CURRENT_DATE) AND p.agent_number =:agentNumber AND sc.key1 like 'CONTRACT_RELATION'"" "
/followup/findTotalPolicyHolderPendingRequirementUnitList,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND (to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop) "" "
/security/Request/getRoleList,No Input Parameters,No query
/contest/ContestMaster/findContestByCode,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getDataNPWPStatusStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/pushNotif/sendMessage,"""userid"":userid,""eventid"":eventid,""token"":token,""subtituteParam"":subtituteParamNew",No query
," return // insert data failed } log.error ""save success"" ",
, return // insert data failed } ,
/pushNotif/findReportByModule,No Input Parameters," String query1 = """"""SELECT x.agent_number, x.office_code FROM ods.agent x WHERE x.terminated_date IS NULL AND x.agent_number IN ('00001273','01004300','01005331')"""""" "
,," SELECT x.office_code, x.radd_code FROM ods.region x WHERE x.radd_code != '' """""" "
,," String query3 = """"""SELECT DISTINCT m.module_name AS module_name, pn.userid, '' as office_code, COUNT(DISTINCT pn.alert) AS total_text_sent, COUNT(pn.event_id) AS total_recipient, CASE WHEN pn.opened IS TRUE THEN COUNT(pn.opened) END AS total_read FROM notification.pushnotification pn LEFT JOIN notification.pushnotification_event pe on pn.event_id = pe.id LEFT JOIN notification.module m on pe.module_id = m.id WHERE date(pn.time_stamp) BETWEEN date(:fromDate) AND date(:toDate) AND pn.userid IN ('00001273','01004300','01005331') GROUP BY pn.opened, m.module_name, pn.event_id, pn.userid """""" "
/publicInformation/Office/getAllCity,," def query = ""select distinct(c.city_code) from publicinformation.region c where c.valid_flag = '1' order by c.city_code"" "
/aobConversion/AobSqlAdapter/getCountAAJIRegistrationStatement,No Input Parameters," select a.aobaajiexamregistrationid from aobaajiexamregistration a, aobaajiexamresult b where a.statusregister = 'TERDAFTAR' and a.agentcode = b.agentcode and aajiexamresult <> 'PASS' and a.agentcode = '$params.agentCode'"""""" "
/followup/findClaimPendingRequirement,No Input Parameters," def query = ""SELECT b.policy_number as policy_number, c.client_name as name, d.desc1 as policy_status, f.desc1 as product_name, "" + ""CASE WHEN count(a.fup_key) > 99 THEN '99+' ELSE to_char(count(a.fup_key), 'FM99') END as fup_total "" + ""FROM ods.follow_up a "" + ""LEFT JOIN ods.policy b ON a.policy_number = b.policy_number "" + ""LEFT JOIN ods.client c ON b.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.alteration e ON a.alteration_number = e.alteration_number AND a.policy_number = e.policy_number "" + ""LEFT JOIN ods.system_code f ON b.product_code = f.key2 AND f.key1 = 'PRODUCT' "" + ""WHERE (b.agent_number = :agentNumber OR (b.agent_number IN :imPruList AND b.reff_agent = :agentNumber)) "" + ""AND b.valid_flag = '1' "" + ""AND a.follow_up_status IN ('L','M','P','O') "" + ""AND e.department = :department "" + ""AND e.alteration_status IN ('O','F') "" + ""AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/client/findLastUpdateClient,"""salesforceId"":pruforceId,""agentCode"":agentCode"," String query = ""select to_char(to_date(max(time_tracking), 'YYYY-MM-DD HH24:MI:SS'),'FMDD FMMonth YYYY') as latest n from monitoring.execution_status where table_name in ('SCLNT') and step_status = 'DONE'"" "
/base/Approval/findAllHistory,No Input Parameters,No query
/performanceMonitoring/PromotionChallenge/findAll,"""agentType"":agentType"," select * from performancemonitoring.master a where localtimestamp between a.start_publish_date and a.end_publish_date --and date(a.start_time) <= date(localtimestamp) --and date(a.end_time) >= date(localtimestamp) and cast (array['${data.agentType}'] as text[]) && (regexp_split_to_array(regexp_replace(agent_type, '^s+', '', ''),',')) order by a.start_time desc """""" "
/corp/BankUnit/putBankUnit,No Input Parameters,No query
/pushNotif/findEvent,No Input Parameters,No query
/client/findBirthdayListToday,"""agentNumber"":agentNumber,""page"":page,""size"":size,""searchBy"":searchBy,""order"":orderBy,""filterByStatus"":filterBy,""salesforceId"":salesforceId,""agentCode"":agentCode,""pageType"":pageType"," whereClause= ""WHERE c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" } else if (months == 14){ whereClause = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) - interval '6 month')"" + "" AND c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""DESC"") orderBy = ""to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(date_of_birth, '-MM-DD') END,'YYYY-MM-DD') ${paramOrder}"" } else if (months == 15){ paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" whereClause = "" WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE))"" + "" AND date_of_birth IS NOT NULL "" } else if (months == 16){ whereClause = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) + interval '6 month') "" + "" AND c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(date_of_birth, '-MM-DD') END,'YYYY-MM-DD') ${paramOrder}"" } else { paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" whereClause = "" WHERE CAST(DATE_PART('month', date_of_birth) AS varchar) = :month"" + "" AND date_of_birth IS NOT NULL "" } "
,," String query = """""" select client_number, client_name, array_to_string(array_agg(distinct tmp.role),'; ') as client_status, to_char(date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(date_of_birth)) AS old, address1, address2, address3, address4, address5 from ( select distinct b.client_number, c.client_name, sc.desc1 as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5 from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.beneficiary b on b.policy_number = p.policy_number join ods.client c on c.client_number = b.client_number join ods.system_code sc on sc.key2 = 'BN' AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} union select distinct cr.client_number, c.client_name, array_to_string(array_agg(distinct sc.desc1),'; ') as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5 from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.client_role cr on cr.policy_number = p.policy_number join ods.client c on c.client_number = cr.client_number join ods.system_code sc on sc.key2 = cr.client_role_code AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} group by cr.client_number, date_of_birth, client_name, address1, address2, address3, address4, address5 ) tmp where client_name ILIKE ${paramsSearchBy} group by client_number, client_name, date_of_birth, address1, address2, address3, address4, address5 order by ${orderBy} LIMIT CAST(${max} AS NUMERIC ) OFFSET CAST(${min} AS NUMERIC) """""" "
/newods/AgentHierarchy/findAllAgentNumberGroupSU ,No Input Parameters," SELECT senior_um_number as agent_number, string_agg(agent_number,' ') as list_agent FROM ods.agent_hierarchy WHERE senior_um_number in ${queryService.convertListToString(data.agentNumberList)} and senior_um_number != agent_number group by senior_um_number order by senior_um_number """""" return queryService.executeQueryTransform(query) } "
/base/Agent/findHuda,No Input Parameters," def query = ""SELECT agent_number, agent_type, office_code FROM ods.agent where agent_number = :agentNumber"" "
/client/getTotalClientBirthDayTodoByAgentUnit,No Input Parameters," /* String query = ""SELECT DISTINCT COUNT(*) AS total, p.agent_number as userId FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number n WHERE DATE_PART('day', date_of_birth) = date_part('day', CURRENT_DATE) AND DATE_PART('month', date_of_birth) = date_part('month', CURRENT_DATE) n AND p.agent_number IN (:list) GROUP BY p.agent_number""*/ "
,," SELECT COUNT(DISTINCT(client_number)) AS total, agent_number as userId FROM ( "
,," SELECT DISTINCT b.client_number , p.agent_number FROM ( SELECT policy_number, agent_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.beneficiary b on b.policy_number = p.policy_number JOIN ods.client c on c.client_number = b.client_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) "
,," SELECT DISTINCT cr.client_number, p.agent_number FROM ( SELECT policy_number, agent_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.client_role cr on cr.policy_number = p.policy_number JOIN ods.client c on c.client_number = cr.client_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) GROUP BY cr.client_number, p.agent_number ) as tmp group by agent_number """""" "
/followup/findTotalRecruitmentUnit,No Input Parameters," def query = ""SELECT pn.userid as userId "" + ""FROM notification.pushnotification pn "" + ""WHERE pn.userid in (:list) and pn.opened is FALSE"" "
/bonus/SecurityInterceptor/before,No Input Parameters,No query
/aobInterceptor/SecurityInterceptor/checkRecruiterLeader,No Input Parameters,No query
/followup/findTotalPolicyInCancelPeriod,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.policy p "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.policy_status = 'IF' "" + ""AND p.billing_channel = 'A' "" + ""AND sc.key1 like 'POLICY_STATUS' "" "
/newods/Production/findAllByTransactionDate,No Input Parameters,No query
/aobInterceptor/AobSqlAdapterX/getTglTrainingPrufastAgentStm,No Input Parameters," select a.aobfaststartregistrationid, b.faststartscheduleid,b.faststartstartdate, b.faststartenddate,b.faststartstarttime,b.faststartendtime,b.faststartlocation, extract(epoch from (b.faststartenddate - b.faststartstartdate))/(3600*24) as selisih, case when (b.faststartenddate - b.faststartstartdate) >= 2 then 'sun' else 'moon' end as keterangan from aobfaststartregistration a inner join aobfaststartschedule b on b.faststartscheduleid = a.faststartscheduleid where a.aobfaststartregistrationid = (select max(aobfaststartregistrationid) from aobfaststartregistration "
/auth/User/postUser,No Input Parameters,No query
/corp/MobileSecurityInterceptor/before,No Input Parameters,No query
/newsUpdateNew/NewsType/postNewsTypeIcon,No Input Parameters,No query
/aobConversion/AobSqlAdapter/checkAAJIQuotaByNPA,No Input Parameters," def query = ""SELECT max(aajiexamscheduleid) as scheduleid FROM aobaajiexamregistration where candidateid = (select candidateid from aobcandidate where npanumber='$params.npanumber')"" "
,," query = ""SELECT aajiexamdate FROM aobaajiexamschedule where aajiexamscheduleid = '$scheduleid'"" "
/newsUpdateNew/NewsUpdateApproval/sendApproval,No Input Parameters," String query = ""select instance_id from general.approval order by dcision_date desc limit 1"" processInstanceId = queryService.executeQueryTransform(query).get(0).instanceId processInstanceId = Integer.parseInt(processInstanceId)+1 taskId = ""1"" taskApproval = new TaskApproval(instanceId: processInstanceId,trxNo : data.id, role:""ROLE_NEWS_AGENT_REVIEWER"").save(flush:true) } role = ""ROLE_NEWS_AGENT_CREATOR"" taskRole = ""ROLE_NEWS_AGENT_REVIEWER"" approvalStatus = NewsupdateApprovalStatusEnum.WAITING1.id break case ""approvalBySpv"": "
/base/Processor/deleteProcessGroup,No Input Parameters,No query
/corp/BannerApproval/findAll,No Input Parameters,No query
/contest/Base/update,No Input Parameters,No query
/aobInterceptor/AobSqlAdapterX/getAAJIExamStatement,No Input Parameters," SELECT a.* FROM pruaob.aobaajiexamschedule a left join ref_aajiquotacount b on a.aajiexamscheduleid=b.aajiexamscheduleid where aajiexamdate > current_date + 5 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT) and aajiexamdate < current_date + 17 and (b.reserved is null or cast(b.reserved as int)<a.aajiexamquota ) and a.activeflag = 'Y' ORDER BY aajiexamdate ASC, aajiexamsession ASC """""" return queryService.executeQuery(query) } "
/newods/AgentHierarchy/findAllTotalPersistencyIndividu ,No Input Parameters," select agent_number, total_prscty_api as total from ods.persistency where agent_number in ${queryService.convertListToString(data.agentNumberList)} and prscty_code = 'I' order by agent_number """""" return queryService.executeQueryTransform(query) } "
/followup/findDetailByPolicyNumber,No Input Parameters," String query = ""SELECT b.client_number as client_number, a.policy_number as policy_number, b.client_name as client_name, to_char(a.paid_to_date, 'FMDD FMMonth YYYY') AS paid_to_date, "" + ""b.mobile_number_1 as mobile_number1, b.home_phone as mobile_number2, b.office_phone as mobile_number3, ABS(c.current_balance_amount) as suspend, "" + ""a.instalment_premium as instalment_premium, e.desc1 AS policy_status, d.desc1 AS payment_method, a.currency as currency, "" + ""CASE WHEN a.currency = 'IDR' THEN 'Rp' WHEN a.currency = 'USD' THEN 'US$' ELSE a.currency END as currency_symbol "" + ""FROM ods.policy a "" + ""LEFT JOIN ods.client b ON a.owner_number = b.client_number "" + ""LEFT JOIN ods.policy_values c ON a.policy_number = c.policy_number AND c.sub_account_code = 'LP' AND c.sub_account_type = 'S' AND a.currency = c.original_currency "" + ""LEFT JOIN ods.system_code d ON a.billing_channel = d.key2 AND d.key1 = 'BILL_CHANNEL' "" + ""LEFT JOIN ods.system_code e ON a.policy_status = e.key2 AND e.key1 = 'POLICY_STATUS' "" + ""WHERE a.policy_number = :policyNumber and a.agent_number = :agentNumber"" "
/client/findBirthdayListAugust,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 8 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/aobInterceptor/AobSqlAdapter/getAAJIExamResultStatement,No Input Parameters," String query = ""select aajiexamresult from aobaajiexamresult where agentcode = '$params.agentCode'"" "
/proposal/NewOds/findFundAllocation,"""policyNumber"":policyNumber,""salesforceId"":pruforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""pageType"":pageType"," def query = ""SELECT c.desc1 as fund_name, c.key2, "" + ""CASE WHEN c.key2 = b.fund_type1 THEN b.fund_percentage1 "" + ""WHEN c.key2 = b.fund_type2 THEN b.fund_percentage2 "" + ""WHEN c.key2 = b.fund_type3 THEN b.fund_percentage3 "" + ""WHEN c.key2 = b.fund_type4 THEN b.fund_percentage4 "" + ""WHEN c.key2 = b.fund_type5 THEN b.fund_percentage5 "" + ""WHEN c.key2 = b.fund_type6 THEN b.fund_percentage6 "" + ""WHEN c.key2 = b.fund_type7 THEN b.fund_percentage7 "" + ""WHEN c.key2 = b.fund_type8 THEN b.fund_percentage8 "" + ""WHEN c.key2 = b.fund_type9 THEN b.fund_percentage9 "" + ""WHEN c.key2 = b.fund_type10 THEN b.fund_percentage10 END as fund_percentage "" + ""FROM ods.fund_allocation b "" + ""RIGHT JOIN ods.system_code c ON c.key2 IN (b.fund_type1, b.fund_type2, b.fund_type3, b.fund_type4, b.fund_type5, b.fund_type6, b.fund_type7, b.fund_type8, b.fund_type9, b.fund_type10) "" + ""AND c.key1 = 'FUND' AND c.key2 <> ''"" + ""RIGHT JOIN ods.system_code d ON d.key2 IN (b.fund_type1, b.fund_type2, b.fund_type3, b.fund_type4, b.fund_type5, b.fund_type6, b.fund_type7, b.fund_type8, b.fund_type9, b.fund_type10) "" + ""AND d.key1 = 'FUND_PRICE'"" + ""LEFT JOIN ods.policy e ON b.policy_number = e.policy_number "" + ""WHERE b.policy_number = :policyNumber "" + ""GROUP BY c.desc1, c.key2, fund_percentage "" "
/aobInterceptor/AobSqlAdapter/getSosmedCanStm,"""npanumber"":npa"," String query = ""select candidateid ,aobsocialnetworkid, socialnetworktype, accountname  from aobsocialnetwork  "
,, select candidateid  from aobcandidate  
/newsUpdateNew/News/getDataByWorkflowStatus,No Input Parameters,No query
/base/AgentPattern/checkRoleMobileBeforeUpload,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/getCountRexExam,"""npanumber"":npa"," String query = ""select count(*) from aobrecruitmentresult where candidateid = (select candidateid from aobcandidate where npanumber = '$params.npanumber')"" "
/auth/AgentRole/listAgentRole,No Input Parameters," select distinct role_id from security.M_AGENT_ROLE """""" queryService.executeQueryTransform(query).roleId.each { retVal << getRole(Role.get(it)) } "
/performanceMonitoring/PromotionChallenge/downloadDetailSummaryReport,No Input Parameters,No query
/newsUpdateNew/BankUnit/putBankUnit,No Input Parameters,No query
/persistency/Newods/findAllPersistencyCR,"""page"":page,""size"":size,""agentNumber"":agentNumber,""leaderNumber"":leaderNumber,""filterBy"":filterBy,""filterVal"":filterVal,""searchVal"":searchVal,""sortBy"":sortBy,""sortVal"":sortVal,""salesforceId"":salesforceId,""agentCode"":agentCode,""persistencyCode"":persistencyCode,""period"":period,""channelType"":channelType"," query = """""" SELECT * FROM ( SELECT DISTINCT a.agent_number, a.agent_type, c.client_name, CASE WHEN p.total_prscty_api IS NULL THEN -1 ELSE p.total_prscty_api END as total_prscty_api_current, CASE WHEN p.api_issued IS NULL THEN -1 ELSE p.api_issued END as api_issued_current, CASE WHEN p.api_lapsed IS NULL THEN -1 ELSE p.api_lapsed END as api_lapsed_current, CASE WHEN p.api_increased IS NULL THEN -1 ELSE p.api_increased END as api_increased_current, CASE WHEN p.api_decreased IS NULL THEN -1 ELSE p.api_decreased END as api_decreased_current, CASE WHEN np.total_prscty_api IS NULL THEN -1 ELSE np.total_prscty_api END as total_prscty_api_rolling, CASE WHEN np.api_issued IS NULL THEN -1 ELSE np.api_issued END as api_issued_rolling, CASE WHEN np.api_lapsed IS NULL THEN -1 ELSE np.api_lapsed END as api_lapsed_rolling, CASE WHEN np.api_increased IS NULL THEN -1 ELSE np.api_increased END as api_increased_rolling, CASE WHEN np.api_decreased IS NULL THEN -1 ELSE np.api_decreased END as api_decreased_rolling FROM ods.agent a LEFT JOIN (SELECT agent_number as agent_number_current, total_prscty_api, api_issued, api_lapsed, api_increased, api_decreased FROM ods.persistency WHERE prscty_code = 'I' AND to_char(period,'MM-YYYY') = '${request.period}') as p ON a.agent_number = p.agent_number_current LEFT JOIN (SELECT agent_number as agent_number_rolling, total_prscty_api, api_issued, api_lapsed, api_increased, api_decreased FROM ods.new_persistency WHERE prscty_code = 'I' AND to_char(period,'MM-YYYY') = '${request.period}') as np ON a.agent_number = np.agent_number_rolling ,ods.client c WHERE a.client_number = c.client_number AND a.agent_number IN ( SELECT ah.agent_number FROM ods.persistency_detail p, ods.agent_hierarchy ah WHERE p.agent_number = ah.agent_number AND ((ah.leader_number = :agentNumber AND ah.agent_type_original IN (${getAgentType(""Individual"",""${channel}"")})) $agentLeader) AND to_char(p.period,'MM-YYYY') = '${request.period}' GROUP BY ah.agent_number ) ) as ag WHERE (${filterVal}) AND (client_name LIKE '%${request.searchVal.toUpperCase()}%' OR agent_number LIKE '%${request.searchVal}%') ORDER BY CASE '${request.sortVal}' WHEN 'totalPrsctyApiCurrentAsc' THEN total_prscty_api_current END ASC, CASE '${request.sortVal}' WHEN 'totalPrsctyApiCurrentDesc' THEN total_prscty_api_current END DESC, CASE '${request.sortVal}' WHEN 'apiDecreasedCurrent' THEN api_decreased_current END DESC, CASE '${request.sortVal}' WHEN 'apiLapsedCurrent' THEN api_lapsed_current END DESC, CASE '${request.sortVal}' WHEN 'totalPrsctyApiRollingAsc' THEN total_prscty_api_rolling END ASC, CASE '${request.sortVal}' WHEN 'totalPrsctyApiRollingDesc' THEN total_prscty_api_rolling END DESC, CASE '${request.sortVal}' WHEN 'apiDecreasedRolling' THEN api_decreased_rolling END DESC, CASE '${request.sortVal}' WHEN 'apiLapsedRolling' THEN api_lapsed_rolling END DESC LIMIT CAST(:max AS NUMERIC ) offset CAST(:min AS NUMERIC) """""" } } else { if(request.persistencyCode == ""U""){ query = """""" SELECT * FROM ( select a.agent_number, a.agent_type, c.client_name, CASE WHEN p.total_prscty_api IS NULL THEN -1 ELSE p.total_prscty_api END as total_prscty_api_current, CASE WHEN p.api_issued IS NULL THEN -1 ELSE p.api_issued END as api_issued_current, CASE WHEN p.api_lapsed IS NULL THEN -1 ELSE p.api_lapsed END as api_lapsed_current, CASE WHEN p.api_increased IS NULL THEN -1 ELSE p.api_increased END as api_increased_current, CASE WHEN p.api_decreased IS NULL THEN -1 ELSE p.api_decreased END as api_decreased_current, CASE WHEN np.total_prscty_api IS NULL THEN -1 ELSE np.total_prscty_api END as total_prscty_api_rolling, CASE WHEN np.api_issued IS NULL THEN -1 ELSE np.api_issued END as api_issued_rolling, CASE WHEN np.api_lapsed IS NULL THEN -1 ELSE np.api_lapsed END as api_lapsed_rolling, CASE WHEN np.api_increased IS NULL THEN -1 ELSE np.api_increased END as api_increased_rolling, CASE WHEN np.api_decreased IS NULL THEN -1 ELSE np.api_decreased END as api_decreased_rolling from ods.agent_hierarchy ah left join ods.agent a on a.agent_number = ah.agent_number left join ods.persistency p on p.agent_number = ah.agent_number and to_char(p.period,'MM-YYYY') in (select to_char(max(date_period), 'MM-YYYY') from ods.controlfile_new where file_name = 'NEW_PERSISTENCY.TXT') and p.prscty_code = 'I' left join ods.new_persistency np on np.agent_number = ah.agent_number and to_char(np.period,'MM-YYYY') in (select to_char(max(date_period), 'MM-YYYY') from ods.controlfile_new where file_name = 'NEW_PERSISTENCY.TXT') and np.prscty_code = 'I' join ods.client c on c.client_number = a.client_number where ((ah.leader_number = :agentNumber and ah.agent_type_original IN (${getAgentType(""Individual"",""${channel}"")})) $agentLeader) ) as ag WHERE (${filterVal}) AND (client_name LIKE '%${request.searchVal.toUpperCase()}%' OR agent_number LIKE '%${request.searchVal}%') ORDER BY CASE WHEN '${request.sortVal}' = 'totalPrsctyApiCurrentAsc' AND total_prscty_api_current <> -1 THEN total_prscty_api_current END ASC, CASE WHEN '${request.sortVal}' = 'totalPrsctyApiCurrentDesc' THEN total_prscty_api_current END DESC, CASE WHEN '${request.sortVal}' = 'apiDecreasedCurrent' THEN api_decreased_current END DESC, CASE WHEN '${request.sortVal}' = 'apiLapsedCurrent' THEN api_lapsed_current END DESC, CASE WHEN '${request.sortVal}' = 'totalPrsctyApiRollingAsc' AND total_prscty_api_rolling <> -1 THEN total_prscty_api_rolling END ASC, CASE WHEN '${request.sortVal}' = 'totalPrsctyApiRollingDesc' THEN total_prscty_api_rolling END DESC, CASE WHEN '${request.sortVal}' = 'apiDecreasedRolling' THEN api_decreased_rolling END DESC, CASE WHEN '${request.sortVal}' = 'apiLapsedRolling' THEN api_lapsed_rolling END DESC LIMIT CAST(:max AS NUMERIC ) offset CAST(:min AS NUMERIC) """""" "
,," query = """""" SELECT a.agent_type FROM ods.agent a WHERE a.agent_number = :leaderNumber """""" "
,," query = """""" SELECT * FROM ( select a.agent_number, a.agent_type, c.client_name, CASE WHEN p.total_prscty_api IS NULL THEN -1 ELSE p.total_prscty_api END as total_prscty_api_current, CASE WHEN p.api_issued IS NULL THEN -1 ELSE p.api_issued END as api_issued_current, CASE WHEN p.api_lapsed IS NULL THEN -1 ELSE p.api_lapsed END as api_lapsed_current, CASE WHEN p.api_increased IS NULL THEN -1 ELSE p.api_increased END as api_increased_current, CASE WHEN p.api_decreased IS NULL THEN -1 ELSE p.api_decreased END as api_decreased_current, CASE WHEN np.total_prscty_api IS NULL THEN -1 ELSE np.total_prscty_api END as total_prscty_api_rolling, CASE WHEN np.api_issued IS NULL THEN -1 ELSE np.api_issued END as api_issued_rolling, CASE WHEN np.api_lapsed IS NULL THEN -1 ELSE np.api_lapsed END as api_lapsed_rolling, CASE WHEN np.api_increased IS NULL THEN -1 ELSE np.api_increased END as api_increased_rolling, CASE WHEN np.api_decreased IS NULL THEN -1 ELSE np.api_decreased END as api_decreased_rolling from ods.agent_hierarchy ah left join ods.agent a on a.agent_number = ah.agent_number left join ods.persistency p on p.agent_number = ah.agent_number and to_char(p.period,'MM-YYYY') in (select to_char(max(date_period), 'MM-YYYY') from ods.controlfile_new where file_name = 'NEW_PERSISTENCY.TXT') and p.prscty_code = 'I' left join ods.new_persistency np on np.agent_number = ah.agent_number and to_char(np.period,'MM-YYYY') in (select to_char(max(date_period), 'MM-YYYY') from ods.controlfile_new where file_name = 'NEW_PERSISTENCY.TXT') and np.prscty_code = 'I' join ods.client c on c.client_number = a.client_number where ${agentTypeNumber} ) as ag WHERE (${filterVal}) AND (client_name LIKE '%${request.searchVal.toUpperCase()}%' OR agent_number LIKE '%${request.searchVal}%') ORDER BY CASE WHEN '${request.sortVal}' = 'totalPrsctyApiCurrentAsc' AND total_prscty_api_current <> -1 THEN total_prscty_api_current END ASC, CASE WHEN '${request.sortVal}' = 'totalPrsctyApiCurrentDesc' THEN total_prscty_api_current END DESC, CASE WHEN '${request.sortVal}' = 'apiDecreasedCurrent' THEN api_decreased_current END DESC, CASE WHEN '${request.sortVal}' = 'apiLapsedCurrent' THEN api_lapsed_current END DESC, CASE WHEN '${request.sortVal}' = 'totalPrsctyApiRollingAsc' AND total_prscty_api_rolling <> -1 THEN total_prscty_api_rolling END ASC, CASE WHEN '${request.sortVal}' = 'totalPrsctyApiRollingDesc' THEN total_prscty_api_rolling END DESC, CASE WHEN '${request.sortVal}' = 'apiDecreasedRolling' THEN api_decreased_rolling END DESC, CASE WHEN '${request.sortVal}' = 'apiLapsedRolling' THEN api_lapsed_rolling END DESC LIMIT CAST(:max AS NUMERIC ) offset CAST(:min AS NUMERIC) """""" "
,," query = """""" select a.agent_number, a.agent_type, c.client_name, p.total_prscty_api as total_prscty_api_current, p.api_issued as api_issued_current, p.api_lapsed as api_lapsed_current, p.api_increased as api_increased_current, p.api_decreased as api_decreased_current, np.total_prscty_api as total_prscty_api_rolling, np.api_issued as api_issued_rolling, np.api_lapsed as api_lapsed_rolling, np.api_increased as api_increased_rolling , np.api_decreased as api_decreased_rolling from ods.agent_hierarchy ah left join ods.agent a on a.agent_number = ah.agent_number left join ods.persistency p on p.agent_number = ah.agent_number and to_char(p.period,'MM-YYYY') in (select to_char(max(date_period), 'MM-YYYY') from ods.controlfile_new where file_name = 'NEW_PERSISTENCY.TXT') and p.prscty_code = 'I' left join ods.new_persistency np on np.agent_number = ah.agent_number and to_char(np.period,'MM-YYYY') in (select to_char(max(date_period), 'MM-YYYY') from ods.controlfile_new where file_name = 'NEW_PERSISTENCY.TXT') and np.prscty_code = 'I' join ods.client c on c.client_number = a.client_number where a.agent_number = :agentNumber """""" } } "
/aobInterceptor/AobSqlAdapter/getCountFastStartRegistrationStatement,"""npanumber"":npa"," String query = ""select count(*) from aobfaststartregistration where candidateid = (select candidateid from aobcandidate where npanumber = '$params.npanumber')"" "
/base/Processor/findAllBatch,No Input Parameters,No query
/client/findStatusBirthdayListPD,"""month"":month,""agentNumber"":agentNumber,""salesforceId"":salesforceId,""agentCode"":agentCode,""pageType"":pageType"," filter = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) - interval '6 month') "" } else if (params.month.toString().equalsIgnoreCase(""15"")){ filter = "" WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) "" } else if (params.month.toString().equalsIgnoreCase(""16"")){ filter = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) + interval '6 month') "" } else { filter = "" WHERE CAST(DATE_PART('month', date_of_birth) AS varchar) = :month "" } "
,," select sc.key2 as client_status_code, sc.desc1 as client_status from ( select distinct 'BN' as role from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number IN :queryUnit OR (agent_number IN :imPruList AND reff_agent IN (:queryUnit))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.beneficiary b on b.policy_number = p.policy_number join ods.client c on c.client_number = b.client_number ${filter} union select distinct client_role_code as role from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number IN :queryUnit OR (agent_number IN :imPruList AND reff_agent IN (:queryUnit))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.client_role cr on cr.policy_number = p.policy_number join ods.client c on c.client_number = cr.client_number ${filter} ) tmp join ods.system_code sc on sc.key2 = tmp.role where sc.key1 like 'CONTRACT_RELATION' group by sc.key2, sc.desc1 order by sc.key2 """""" "
/auth/MenuMobile/findMenuMobileByLogin,No Input Parameters," SELECT d.* FROM usermanagement.m_menu_mobile d WHERE d.name IN ( SELECT DISTINCT(c.menu_mobile_id) FROM usermanagement.m_role_menu_mobile c WHERE c.role_mobile_id IN ( SELECT DISTINCT(b.role_mobile_id) FROM security.m_agent_pattern_role_mobile b WHERE b.agent_pattern_id IN ( SELECT a.id FROM security.m_agent_pattern a WHERE (a.agent_number = :agentNumber OR a.agent_number IS NULL) AND (a.agent_type = :agentType OR a.agent_type IS NULL) AND (a.office_code = :officeCode OR a.office_code IS NULL) AND (LOWER(a.pruforce_id) = LOWER(:pruforceId) OR a.pruforce_id IS NULL) ))) AND d.is_admin = :isAdmin """""" "
/base/AgentPattern/putAgentPattern,No Input Parameters,No query
/auth/RoleMobile/deleteRoleMobile,No Input Parameters,No query
/security/Role/deleteRole,No Input Parameters," return [message: ""Failed to delete role "" + role.authority + "". It has been used by user(s)"", content: null, status: 500] } "
/auth/Request/deleteRequest,No Input Parameters,No query
/production/Newods/findAllPolicyStatusYearly,"""agentNumber"":agentNumber,""leaderNumber"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber"," def query = """""" SELECT DISTINCT on (p.transaction_code) p.transaction_code as key, sc.desc1 as value FROM ods.production p LEFT JOIN ods.system_code sc on p.transaction_code = sc.key2 WHERE p.agent_number = :agentNumber and p.transaction_date >= '${productionPeriod.periodStart}' AND p.transaction_date <= '${productionPeriod.periodStop}' AND sc.key1 = 'TRAN_CODE' """""" "
/auth/AuditLog/detail,No Input Parameters," def query = """""" SELECT a.persistedObjectId, a.propertyName, a.oldValue, a.newValue FROM AuditLog a WHERE a.persistedObjectId like '${data.objectIdFilter}' """""" "
/auth/Menu/getMenuDetail,No Input Parameters," final String query = ""select menu_children_id from usermanagement.m_menu_m_menu where menu_id = '$id';"" "
/base/Role/getRole,No Input Parameters,No query
/auth/Role/checkAuthority,No Input Parameters," final String query = ""SELECT COUNT(*) FROM security.m_role m WHERE m.authority LIKE '${authority}'"" "
/corp/BannerType/putBannerType,No Input Parameters,No query
/newsUpdateNew/MobileNews/getDetailNews,No Input Parameters, select * from newsupdate.t_news 
/contest/ContestReport/findAllBatchDateByContestCode,No Input Parameters," final String query = """"""SELECT distinct(key1) FROM contest.summary_history "
/aobConversion/AobSqlAdapter/updateWidgetCollapseConfigStatement,No Input Parameters," def query = ""UPDATE mobilefirst.user_widget_toggle SET collapse_value = '$params.collapseValue' WHERE user_id = '$params.userId' AND widget_id = '$params.widgetId'"" "
/newods/AgentHierarchy/findByUnitManagerNumber ,No Input Parameters," SELECT * FROM ods.agent_hierarchy WHERE unit_manager_number = '${data.leaderNumber}' order by agent_number limit $max offset ${max*(page-1)} """""" return queryService.executeQueryTransform(query) } "
/base/User/getUsernamesByRole,No Input Parameters," final String query = ""SELECT a.username "" + ""FROM security.m_user a "" + ""JOIN security.m_user_role b on a.id = b.user_id "" + ""JOIN security.m_role c on c.id = b.role_id "" + ""WHERE c.authority = '$roleName'"" "
/contest/ContestReport/resultSummaryReport,No Input Parameters,No query
/pushNotif/getDeviceSetting,"""userid"":userid",No query
/followup/findNtuCase,No Input Parameters," def query = ""SELECT b.policy_number as policy_number, c.client_name as name, b.proposal_number as proposal_number, d.desc1 as policy_status, e.desc1 as product_name, "" + ""CASE WHEN count(a.fup_key) > 99 THEN '99+' ELSE to_char(count(a.fup_key), 'FM99') END as fup_total "" + ""FROM ods.follow_up a "" + ""LEFT JOIN ods.policy b ON a.policy_number = b.policy_number "" + ""LEFT JOIN ods.client c ON b.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.system_code e ON b.product_code = e.key2 AND e.key1 = 'PRODUCT' "" + ""WHERE (b.agent_number = :agentNumber OR (b.agent_number IN :imPruList AND b.reff_agent = :agentNumber)) "" + ""AND b.valid_flag = '3' "" + ""AND a.follow_up_status IN ('L','M','P','O') "" + ""AND b.policy_status IN :statusList "" + ""AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/contest/AllContest/time,No Input Parameters,No query
/corp/UploadImage/download,No Input Parameters,No query
/corp/banner/postBanner,No Input Parameters,No query
/base/Role/postRole,No Input Parameters,No query
/approval/startProcess,No Input Parameters,No query
/base/Processor/runBatchNow,No Input Parameters,No query
/client/findStatusBirthdayListMay,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =5 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/aobInterceptor/AobSqlAdapter/getUnreadPushNotificationStatementNew,"""userid"":agentCode,""filterBy"":filterBy,""size"":size,""page"":page"," SELECT a.id, a.userid, a.alert, a.payload, a.opened, a.time_stamp, c.module_name FROM notification.pushnotification a LEFT JOIN notification.pushnotification_event b ON a.event_id = b.id INNER JOIN notification.module c ON b.module_id = c.id WHERE a.userid = :userid $filterQuery AND date(a.time_stamp) > (CURRENT_DATE - (interval '1 day' * b.max_period)) AND (a.opened is FALSE OR b.request_id NOT ILIKE 'INFO') ORDER BY a.time_stamp DESC LIMIT :size OFFSET :start """""" "
/contest/ContestMaster/findAllContestMasterApproval,No Input Parameters,No query
/newods/AgentHierarchy/findAllAgentNumberGroupAM ,No Input Parameters," SELECT agency_manager_number as agent_number, string_agg(agent_number,' ') as list_agent FROM ods.agent_hierarchy WHERE agency_manager_number in ${queryService.convertListToString(data.agentNumberList)} and agency_manager_number != agent_number and agent_type_original != 'AM' group by agency_manager_number order by agency_manager_number """""" return queryService.executeQueryTransform(query) } "
/contest/Completed/findAll,"""salesforceId"":salesforceid,""agentNumber"":agentNumber,""agentType"":agentType,""max"":max,""page"":page,""year"":year,""searchBy"":searchBy,""orderBy"":orderBy"," select b.* from contest.completed a, contest.master b where a.key2 = b.contest_code and a.key1 = '${data.agentNumber}' and b.contest_name ilike '%$searchBy%' $queryYear $orderBy limit ${max} offset ${(page - 1) * max} """""" "
/aobConversion/AobSqlAdapter/getAgentCodeAndReinstateStatement,No Input Parameters," String query = ""select agentcode, isreinstate from aobcandidate where npanumber='$params.npanumber';"" "
/aobConversion/AobSqlAdapter/getDateAgentJourney,No Input Parameters," String query = ""select distinct createdate from aobapplicationpackstatus where headstatusid = '50' and candidateid = (select candidateid from aobcandidate where npanumber = '$params.npanumber')"" "
/base/AgentPattern/findAllAgentPattern,No Input Parameters,No query
/auth/Ldap/getUserAttribute,No Input Parameters,No query
/corp/BankUnit/postBankUnit,No Input Parameters,No query
/auth/AgentPattern/getAgentPattern,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getFastStartCanStm,No Input Parameters," select a.faststarttype, b.faststartlocation, b.faststartscheduleid, b.faststartcoursecode, b.faststartcourse, b.faststartstartdate, b.faststartenddate, b.faststartstarttime, b.faststartendtime from aobfaststartregistration a inner join aobfaststartschedule b on a.faststartscheduleid = b.faststartscheduleid where a.aobfaststartregistrationid = (select max(aobfaststartregistrationid) from aobfaststartregistration "
/auth/Agent/listAgentType,No Input Parameters," def query = """"""select name from security.m_agent_type $condition1 """""" "
/base/AuditLog/detail,No Input Parameters," def query = """""" SELECT a.persistedObjectId, a.propertyName, a.oldValue, a.newValue FROM AuditLog a WHERE a.persistedObjectId like '${data.objectIdFilter}' """""" "
/contest/AllContest/findAll,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentType"":agentType,""max"":max,""page"":page"," final String queryBak = """""" select a.contest_code, a.contest_name, b.content as description, case when c.agent_number is not null then true else false end as favorite from contest.master a left join contest.favorite c on a.contest_code = c.contest_code and c.agent_number = '$data.agentNumber', contest.attribute b where a.contest_code = b.contest_code and localtimestamp between a.publish_date_start and a.publish_date_end and ( date(a.submission_date_start) <= date(localtimestamp) or date(a.non_new_bussiness_trx_date_start) <= date(localtimestamp) or date(a.new_bussiness_trx_date_start) <= date(localtimestamp) ) and ( date(a.submission_date_end) >= date(localtimestamp) or date(a.non_new_bussiness_trx_date_end) >= date(localtimestamp) or date(a.new_bussiness_trx_date_end) >= date(localtimestamp) ) and a.contest_type_code = 'C' and b.type = 'ATT07' and a.channel = '${getContestChannel(data.agentType)}' order by a.publish_date_start desc limit ${max} offset ${(page - 1) * max} """""" "
,," final String query = """"""select a.contest_code, a.contest_name, b.content as description, case when c.agent_number is not null then true else false end as favorite, case when date(a.submission_date_start) is not null and date(a.new_bussiness_trx_date_start) is not null and date(a.non_new_bussiness_trx_date_start) is not null then case when date(a.submission_date_start) > date(a.new_bussiness_trx_date_start) then case when date(a.new_bussiness_trx_date_start) > date(a.non_new_bussiness_trx_date_start) then date(a.non_new_bussiness_trx_date_start) else date(a.new_bussiness_trx_date_start) end else date(a.submission_date_start) end when date(a.submission_date_start) is not null and date(a.new_bussiness_trx_date_start) is not null and date(a.non_new_bussiness_trx_date_start) is null then case when date(a.submission_date_start) > date(a.new_bussiness_trx_date_start) then date(a.new_bussiness_trx_date_start) else date(a.submission_date_start) end when date(a.submission_date_start) is not null and date(a.new_bussiness_trx_date_start) is null and date(a.non_new_bussiness_trx_date_start) is not null then case when date(a.submission_date_start) > date(a.non_new_bussiness_trx_date_start) then date(a.non_new_bussiness_trx_date_start) else date(a.submission_date_start) end when date(a.submission_date_start) is null and date(a.new_bussiness_trx_date_start) is not null and date(a.non_new_bussiness_trx_date_start) is not null then case when date(a.new_bussiness_trx_date_start) > date(a.non_new_bussiness_trx_date_start) then date(a.non_new_bussiness_trx_date_start) else date(a.new_bussiness_trx_date_start) end when date(a.submission_date_start) is not null and date(a.new_bussiness_trx_date_start) is null and date(a.non_new_bussiness_trx_date_start) is null then date(a.submission_date_start) when date(a.submission_date_start) is null and date(a.new_bussiness_trx_date_start) is not null and date(a.non_new_bussiness_trx_date_start) is null then date(a.new_bussiness_trx_date_start) when date(a.submission_date_start) is null and date(a.new_bussiness_trx_date_start) is null and date(a.non_new_bussiness_trx_date_start) is not null then date(a.non_new_bussiness_trx_date_start) end as period_start from contest.master a left join contest.favorite c on a.contest_code = c.contest_code and c.agent_number = '$data.agentNumber', contest.attribute b where a.contest_code = b.contest_code and localtimestamp between a.publish_date_start and a.publish_date_end and ( date(a.submission_date_start) <= date(localtimestamp) or date(a.non_new_bussiness_trx_date_start) <= date(localtimestamp) or date(a.new_bussiness_trx_date_start) <= date(localtimestamp) ) --and ( -- date(a.submission_date_end) >= date(localtimestamp) or -- date(a.non_new_bussiness_trx_date_end) >= date(localtimestamp) or -- date(a.new_bussiness_trx_date_end) >= date(localtimestamp) -- ) and a.contest_type_code = 'C' and b.type = 'ATT07' and a.channel = '${getContestChannel(data.agentType)}' order by period_start desc, contest_code limit ${max} offset ${(page - 1) * max} """""" "
/client/findBirthdayListMarch,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 3 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/pushNotif/requestList,No Input Parameters,No query
/performanceMonitoring/Master/findOne,No Input Parameters,No query
/client/findStatusBirthdayListOctober,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =10 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/base/Processor/deleteBatch,No Input Parameters,No query
/performanceMonitoring/Master/save,No Input Parameters,No query
/followup/findFilterFollowUpStatus,No Input Parameters," query = ""SELECT DISTINCT(a.follow_up_status) as value, d.desc1 as name "" + ""FROM ods.follow_up a "" + ""LEFT JOIN ods.policy b ON a.policy_number = b.policy_number "" + ""LEFT JOIN ods.alteration c ON a.alteration_number = c.alteration_number AND a.policy_number = c.policy_number "" + ""LEFT JOIN ods.system_code d ON a.follow_up_status = d.key2 AND d.key1 = 'FLUP_CODE' "" + ""WHERE a.policy_number = :policyNumber "" + ""AND a.follow_up_status IN ('L','M','P','O') "" + ""AND b.valid_flag = '1' "" + ""AND c.department = :department "" + ""AND c.alteration_status in ('O','F') "" + ""AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" + ""ORDER BY a.follow_up_status ASC"" param << [department: department] } else { query = ""SELECT DISTINCT(a.follow_up_status) as value, d.desc1 as name "" + ""FROM ods.follow_up a "" + ""LEFT JOIN ods.system_code d ON a.follow_up_status = d.key2 AND d.key1 = 'FLUP_CODE' "" + ""LEFT JOIN ods.policy b ON a.policy_number = b.policy_number "" + ""WHERE a.policy_number = :policyNumber "" + ""AND a.follow_up_status IN ('L','M','P','O') "" + ""AND b.valid_flag = '3' "" + ""AND b.policy_status IN ('PS','UW') "" + ""AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" + ""ORDER BY a.follow_up_status ASC"" } "
/aobConversion/AobSqlAdapter/inputAAJIExamRegistrationStatement,No Input Parameters," INSERT INTO aobaajiexamregistration(candidateid, aajiexamscheduleid, agentcode, aajiexamdate, statusagent, licensetype, createdate) VALUES ( (SELECT candidateid FROM aobcandidate WHERE npanumber = '$params.npanumber') ,'$params.aajiexamscheduleid', '$params.agentCode', '$params.aajiexamdate' ,'$params.statusagent', '$params.licensetype', localtimestamp)"""""" "
/auth/Agent/getAgentDetail,No Input Parameters," def query = ""SELECT agent_number, agent_type, office_code FROM ods.agent where agent_number = :agentNumber"" "
/aobConversion/AobSqlAdapter/getDataGenderStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/base/RoleMobile/deleteRoleMobile,No Input Parameters,No query
/production/Newods/findAllAgentTypeYearly,"""agentNumber"":agentNumber,""leaderNumber"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber,""channelType"":channelType"," def query = """""" SELECT ag.agent_type as key, sc.desc1 as value FROM (SELECT DISTINCT agent.agent_type FROM (SELECT ah.agent_number FROM ods.agent_hierarchy as ah LEFT JOIN (SELECT production_agent.agent_number FROM ods.production_agent WHERE (CASE WHEN '${periodMonth}' is not null THEN (production_agent.period_month LIKE '${periodMonth}' AND production_agent.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_agent.period_year LIKE '${periodYear}' END) ) prod ON prod.agent_number = ah.agent_number WHERE (ah.leader_number = :agentNumber AND ah.agent_type_original IN (${getAgentType(""Individual"",""${channel}"")})) $agentLeader UNION SELECT production_agent.agent_number FROM ods.production_agent WHERE (CASE WHEN '${periodMonth}' is not null THEN (production_agent.period_month LIKE '${periodMonth}' AND production_agent.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_agent.period_year LIKE '${periodYear}' END) AND production_agent.leader_number = :agentNumber ) AS agents LEFT JOIN ods.agent ON agent.agent_number = agents.agent_number ) AS ag LEFT JOIN ods.system_code sc on sc.key2 = ag.agent_type WHERE sc.key1 = 'AGENT_TYPE_CHANNEL' """""" "
/auth/Policy/checkPolicyAgent,No Input Parameters," def query = """""" SELECT policy_number FROM ods.policy WHERE policy_number = :policyNumber AND (agent_number IN (SELECT agent_number from ods.agent WHERE leader_number = :agentNumber) OR agent_number = :agentNumber) """""" "
/production/Newods/findAllProductionYearly,"""min"":0,""max"":0,""page"":page,""size"":size,""agentNumber"":agentNumber,""leaderNumber"":agentNumber,""searchBy"":searchBy,""searchVal"":searchVal,""orderBy"":orderBy,""direction"":direction,""salesforceId"":pruforceId,""agentCode"":agentNumber"," def query = """""" SELECT * FROM ( select client.client_name clientname, agent.agent_type agenttype, agent.agent_number agentnumber, client.client_number clientnumber, agents_summary.total totnetapi from (select production_summary.agent_number, agents.agent_type, sum(tot_net_wape75)as total from ods.production_summary inner join (select agent_type_original, agent_number from ods.agent_hierarchy where (leader_number= :leaderNumber and agent_type_original IN (${getAgentType(""Individual"",""${channel}"")})) $agentLeader ) as agents on production_summary.agent_number = agents.agent_number where date_period >= '${productionPeriod.periodStart}' and date_period <= '${productionPeriod.periodStop}' group by production_summary.agent_number, agents.agent_type) as agents_summary inner join ods.agent on agent.agent_number=agents_summary.agent_number inner join ods.client on client.client_number=agent.client_number ) as ps where lower(${searchBy}) like '${searchVal}' order by case '${direction}' when 'asc' then totNetApi end asc, case '${direction}' when 'desc' then totNetApi end desc limit cast(:max as numeric) offset cast(:min as numeric) """""" "
/base/User/deleteUser,No Input Parameters," final String query = ""SELECT COUNT(*) FROM contest.contest_master c WHERE c.created_by = '${user.username}'"" "
," return [message: ""Failed to delete user "" + user.username + "". It has been used by contest(s)"", content: null, status: 500] } } ",
/base/AgentPattern/listAgentPattern,No Input Parameters,No query
/security/Request/authorize,No Input Parameters,No query
/corp/banner/getBannerHome,No Input Parameters,No query
/contest/Parameter/findParameterValue,No Input Parameters,No query
/aobInterceptor/AobSqlAdapterX/getDataMaritalStatusStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/contest/ContestMaster/save,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getAAJIExamResultStatement,No Input Parameters," String query = ""select aajiexamresult from aobaajiexamresult where agentcode = '$params.agentCode'"" "
/base/User/postUser,No Input Parameters,No query
/auth/User/getUser,No Input Parameters,No query
/newods/Component/findAllByPolicyNumberList,No Input Parameters," select policy_number,component_code,life_number, coverage,rider from ods.component where policy_number in $policyNumberList order by policy_number """""" return queryService.executeQueryTransform(query) } "
/persistency/Newods/findAllPolicyRolling,"""page"":page,""size"":size,""agentNumber"":agentNumber,""filterBy"":filterBy,""filterVal"":filterVal,""searchVal"":searchVal,""sortVal"":sortVal,""salesforceId"":salesforceId,""agentCode"":agentCode,""period"":period"," query = """""" SELECT * FROM (SELECT p.policy_no policynumber, p.total_api_issued totalapiissued, p.total_api_lapsed totalapilapsed, p.total_api_increased totalapiincreased, p.total_api_decreased totalapidecreased, c.client_name clientname, pol.policy_status policycode, pols.desc2 policystatus, prod.desc1 productcode FROM ${table} p, ods.client c, ods.policy pol, ods.system_code pols, ods.system_code prod WHERE p.agent_number = :agentNumber AND c.client_number = pol.owner_number AND p.policy_no = pol.policy_number AND prod.key1 = 'PRODUCT' AND prod.key2 = pol.product_code AND pols.key1 = 'POLICY_STATUS' AND pols.key2 = pol.policy_status ${period} ) as p WHERE (${filterVal}) AND (clientname LIKE '%${request.searchVal.toUpperCase()}%' OR policynumber LIKE '%${request.searchVal}%') ORDER BY CASE '${request.sortVal}' WHEN 'clientName' THEN clientname END ASC, CASE '${request.sortVal}' WHEN 'policyNumber' THEN policyNumber END ASC, CASE '${request.sortVal}' WHEN 'decreasedApi' THEN totalapidecreased END DESC , CASE '${request.sortVal}' WHEN 'lapsedApi' THEN totalapilapsed END DESC LIMIT CAST(:max AS NUMERIC ) offset CAST(:min AS NUMERIC ) """""" "
/client/findBirthdayListJanuary,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 1 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/proposal/NewOds/findTotalPolicyByTypePD,"""agentNumber"":agentNumber,""type"":""proposalHome"",""salesforceId"":pruforceId,""agentCode"":agentNumber"," def query = ""SELECT to_char(COUNT(policy_number), 'FM999999999999999999') AS total "" + ""FROM ods.policy "" + ""WHERE (agent_number IN :queryUnit OR (agent_number IN :imPruList AND reff_agent IN (:queryUnit))) "" + ""AND policy_status IN :statusList"" "
/commonUtils/Approval/findAllHistory,No Input Parameters,No query
/newods/Agent/findAgentDetail,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/updateStatusPushNotificationStatementNew,"""id"":id", * NEW UPDATE PUSH NOTIF * */ 
,," String query = ""UPDATE notification.pushnotification SET opened=true WHERE id = $params.id"" "
/contest/ContestMaster/sendApproval1,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getAAJIExamCityStatement,No Input Parameters," String query = ""SELECT DISTINCT(a.aajiexamlocation)  FROM aobaajiexamschedule a  left join ref_aajiquotacount b  on a.aajiexamscheduleid=b.aajiexamscheduleid  where aajiexamdate > current_date + 5 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT)  and aajiexamdate < current_date + 17  and (b.reserved is null or cast(b.reserved as int)< a.aajiexamquota )"" "
/proposal/NewOds/findProductList,"""policyNumber"":policyNumber,""type"":type,""salesforceId"":pruforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""pageType"":pageType"," def query = ""SELECT a.component_code as id, a.life_number, b.desc1 as name "" + ""FROM ods.component a "" + ""LEFT JOIN ods.system_code b ON a.component_code = b.key2 AND b.key1 = 'COMPONENT' "" + ""WHERE a.policy_number = :policyNumber "" "
/contest/ContestMaster/sendApproval2,No Input Parameters,No query
/base/Processor/findProcessGroup,No Input Parameters,No query
/newsUpdateNew/News/approveNews,No Input Parameters,No query
/auth/AgentRole/deleteAgentRole,No Input Parameters,No query
/corp/banner/getBanner,No Input Parameters," final String query = ""SELECT n.id::text, n.title, t.description, n.start_publish_date, n.end_publish_date, n.workflow_status, n.created_by, n.created_by_id, n.created_date, n.modified_by, n.modified_by_id, n.updated_date, n.inputer_code "" + ""FROM corporatebanner.t_banner n, corporatebanner.m_banner_type t "" + ""WHERE n.banner_type_id = t.id"" "
/client/findAllBirthdayListByMonthPD,"""agentNumber"":agentNumber,""page"":page,""size"":size,""month"":month,""searchBy"":searchBy,""order"":orderBy,""filterByStatus"":filterBy,""salesforceId"":salesforceId,""agentCode"":agentCode,""pageType"":pageType"," whereClause= ""WHERE c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" } else if (months == 14){ whereClause = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) - interval '6 month')"" + "" AND c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""DESC"") orderBy = ""to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(date_of_birth, '-MM-DD') END,'YYYY-MM-DD') ${paramOrder}"" } else if (months == 15){ paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" whereClause = "" WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE))"" + "" AND date_of_birth IS NOT NULL "" } else if (months == 16){ whereClause = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) + interval '6 month') "" + "" AND c.date_of_birth IS NOT NULL "" paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(date_of_birth, '-MM-DD') END,'YYYY-MM-DD') ${paramOrder}"" } else { paramOrder = (paramOrder ? paramOrder : ""ASC"") orderBy = ""extract(month from date_of_birth) ${paramOrder}, extract(day from date_of_birth) ${paramOrder} "" whereClause = "" WHERE CAST(DATE_PART('month', date_of_birth) AS varchar) = :month"" + "" AND date_of_birth IS NOT NULL "" } "
,," String query = """""" select client_number, client_name, array_to_string(array_agg(distinct tmp.role),'; ') as client_status, to_char(date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(date_of_birth)) AS old, address1, address2, address3, address4, address5, agent_number AS agent_code, agent_name from ( select distinct b.client_number, c.client_name, sc.desc1 as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5, p.agent_number, p.client_name AS agent_name from ( SELECT p1.agent_number, policy_number, c1.client_name FROM ods.policy p1 JOIN ods.agent a1 on p1.agent_number = a1.agent_number JOIN ods.client c1 on a1.client_number = c1.client_number WHERE (p1.agent_number IN :queryUnit OR (p1.agent_number IN :imPruList AND p1.reff_agent IN (:queryUnit))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.beneficiary b on b.policy_number = p.policy_number join ods.client c on c.client_number = b.client_number join ods.system_code sc on sc.key2 = 'BN' AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} union select distinct cr.client_number, c.client_name, array_to_string(array_agg(distinct sc.desc1),'; ') as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5, p.agent_number, p.client_name from ( SELECT p1.agent_number, policy_number, c1.client_name FROM ods.policy p1 JOIN ods.agent a1 on p1.agent_number = a1.agent_number JOIN ods.client c1 on a1.client_number = c1.client_number WHERE (p1.agent_number IN :queryUnit OR (p1.agent_number IN :imPruList AND p1.reff_agent IN (:queryUnit))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.client_role cr on cr.policy_number = p.policy_number join ods.client c on c.client_number = cr.client_number join ods.system_code sc on sc.key2 = cr.client_role_code AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} group by cr.client_number, date_of_birth, c.client_name, address1, address2, address3, address4, address5, agent_number, p.client_name ) tmp where client_name ILIKE ${paramsSearchBy} OR agent_name ILIKE ${paramsSearchBy} group by client_number, client_name, date_of_birth, address1, address2, address3, address4, address5, agent_number, agent_name order by ${orderBy} LIMIT CAST(${max} AS NUMERIC ) OFFSET CAST(${min} AS NUMERIC) """""" "
/pushNotif/setDeviceSetting,"""userid"":userid,""allowNotification"":allowNotification,""modules"":module,",No query
/base/DroolsRule/searchQuery,No Input Parameters," def psql = ""SELECT id, name FROM DroolsRule WHERE lower(name) like '%${name.toLowerCase()}%' ORDER BY name ASC"" return DroolsRule.executeQuery(psql, [max: max, offset: 0]).collect { [class: DroolsRule.class, id: it[0], value: it[1]] } } "
/auth/Role/deleteRole,No Input Parameters," return [message: ""Failed to delete role "" + role.authority + "". It has been used by user(s)"", content: null, status: 500] } "
/proposal/NewOds/findFundHolding,"""policyNumber"":policyNumber,""type"":""policy"",""salesforceId"":pruforceId,""agentCode"":agentNumber"," def query = ""SELECT a.fund_type, sum(a.current_unit_balance) as unit_balance, c.desc1 as fund_name, d.value1 as unit_price, "" + ""round((sum(a.current_unit_balance) * d.value1),5) as unit_value, to_char(d.date1, 'dd FMMonth YYYY') as pricing_date, "" + ""CASE WHEN e.currency = 'IDR' THEN 'Rp' WHEN e.currency = 'USD' THEN 'US$' ELSE e.currency END as currency_symbol "" + ""FROM ods.fund_holding a "" + ""LEFT JOIN ods.system_code c ON a.fund_type = c.key2 AND c.key1 = 'FUND' "" + ""LEFT JOIN ods.system_code d ON a.fund_type = d.key2 AND d.key1 = 'FUND_PRICE' "" + ""LEFT JOIN ods.policy e ON a.policy_number = e.policy_number "" + ""WHERE a.policy_number = :policyNumber "" + ""AND a.current_unit_balance > 0 "" + ""GROUP BY a.fund_type, c.desc1, d.value1, d.date1,e.currency "" "
/production/Newods/findAllPolicyYearly,"""page"":page,""size"":size,""agentNumber"":agentNumber,""leaderNumber"":agentNumber,""searchBy"":searchBy,""searchVal"":searchVal,""searchBy2"":searchBy2,""searchVal2"":searchVal2,""orderBy"":orderBy,""direction"":direction,""salesforceId"":pruforceId,""agentCode"":agentCode",No query
/followup/findTotalBillingPendingRequirementUnitCustom,No Input Parameters," def query = ""SELECT DISTINCT p.agent_number as userId "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND (to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop) "" "
/client/getTotalClientByAgent,"""agentNumber"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber"," String query = ""SELECT DISTINCT COUNT(*) AS totalClient FROM ods.policy p n INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE p.agent_number=:agentNumber"" "
/aobConversion/AobSqlAdapter/getAAJILicenseStatement,No Input Parameters," String query = ""select aajilicensecode from aobaajiexamresult where agentcode = '$params.agentCode'"" "
/base/Query/editQuery,No Input Parameters,No query
/contest/MyContest/findContestDescription,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentType"":agentType,""contestCode"":contestCode",No query
/productionHistory/NewOds/findPolicyFilter,"""salesforceId"":salesforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""year"":year,""month"":month"," def query = ""SELECT DISTINCT(b.desc1) as name, a.transaction_code as value "" + ""FROM ods.production a "" + ""LEFT JOIN ods.system_code b ON a.transaction_code = b.key2 AND b.key1 = 'TRAN_CODE' "" + ""LEFT JOIN ods.policy c ON a.policy_number = c.policy_number "" + ""LEFT JOIN ods.client e ON c.owner_number = e.client_number "" + ""WHERE a.agent_number = :agentNumber "" + ""AND a.transaction_date >= :startDate AND a.transaction_date <= :endDate "" "
/auth/AgentType/getAgentTypeOds,No Input Parameters," def query = """""" SELECT desc2 as channel_type, key2 as agent_type FROM ods.system_code "
/newods/Production/findAllApiPolicyDetail,No Input Parameters,No query
/corp/banner/rejectBanner,No Input Parameters,No query
/aobConversion/AobSqlAdapter/checkAAJIQuotaCandidateQuotaStatement,No Input Parameters," String query = ""SELECT aes.aajiexamquota  FROM aobaajiexamschedule aes  where aes.aajiexamscheduleid = $params.aajiexamscheduleid"" "
/persistency/Newods/findAllPersistencyHistoryDetail,"""agentNumber"":agentNumber,""persistencyCode"":persistencyCode,""salesforceId"":salesforceId,""agentCode"":agentCode"," query = """""" SELECT * FROM mobilefirst.application_parameters where param = 'persistency_history_end' """""" "
,," query = """""" SELECT listperiod.*, CASE WHEN p.total_api_current IS NULL THEN -1 ELSE p.total_api_current END, CASE WHEN p.api_lapsed_current IS NULL THEN -1 ELSE p.api_lapsed_current END, CASE WHEN p.api_decreased_current IS NULL THEN -1 ELSE p.api_decreased_current END, CASE WHEN p.api_issued_current IS NULL THEN -1 ELSE p.api_issued_current END, CASE WHEN np.total_api_rolling IS NULL THEN -1 ELSE np.total_api_rolling END, CASE WHEN np.api_lapsed_rolling IS NULL THEN -1 ELSE np.api_lapsed_rolling END, CASE WHEN np.api_decreased_rolling IS NULL THEN -1 ELSE np.api_decreased_rolling END,CASE WHEN np.api_issued_rolling IS NULL THEN -1 ELSE np.api_issued_rolling END FROM (SELECT to_char((generate_series(((current_date - interval '1 day') - interval '${periodEnd} month'), ((current_date - interval '1 day') - interval '1 month'), '1 month')),'MM-YYYY') as period) as listperiod LEFT JOIN (SELECT to_char(period,'MM-YYYY') as period, api_lapsed as api_lapsed_current, api_decreased as api_decreased_current, api_issued as api_issued_current, total_prscty_api as total_api_current FROM ods.persistency WHERE agent_number = :agentNumber AND prscty_code = :prsctyCode) AS p ON listperiod.period = p.period LEFT JOIN (SELECT to_char(period,'MM-YYYY') as period, api_lapsed as api_lapsed_rolling, api_decreased as api_decreased_rolling, api_issued as api_issued_rolling, total_prscty_api as total_api_rolling FROM ods.new_persistency WHERE agent_number = :agentNumber AND prscty_code = :prsctyCode) AS np ON listperiod.period = np.period ORDER BY RIGHT(listperiod.period,4) DESC, LEFT(listperiod.period,2) DESC """""" "
/followup/findStatusBillingPendingRequirement,No Input Parameters," def query = ""SELECT distinct(p.policy_status) as key, sc.desc1 as description "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p on f.policy_number = p.policy_number "" + ""LEFT JOIN ods.client c on p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc on p.policy_status = sc.key2 "" + ""LEFT JOIN ods.alteration a on f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '1' AND sc.key1 LIKE 'POLICY_STATUS' "" + ""AND f.follow_up_status in ('L','M','P','O') AND lower(a.department) LIKE lower(:department) AND a.alteration_status in ('O','F') "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/contest/MyContest/findPolicyList,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""filterPolicyStatus"":filterPolicyStatus,""contestCode"":contestCode,""searchBy"":searchBy,""orderBy"":orderBy,""orderDirection"":orderDirection,""max"":max,""page"":page,""type"":""proposal""",No query
/corp/banner/getDataByPagination,No Input Parameters,No query
/performanceMonitoring/PromotionChallenge/downloadSummaryReport,No Input Parameters," def query = """""" select * from performancemonitoring.summary_history where batch_date = (select max(batch_date) from performancemonitoring.summary_history where date_part('month', batch_date) = ${data.month ?: 0} ) and master_id = $data.masterId order by master_id, nett_api desc """""" "
/production/Newods/findProduction,No Input Parameters," def query = ""select * from ""+ ""(select sum(total_api_01) api_mtd, sum(total_spi) spi_mtd, sum(total_topup) topup_mtd, sum(total_saver) saver_mtd, sum(total_ape) ape_mtd, agent_number as agent_number_mtd from ods.production_agent ""+ ""where agent_number = (:agentCode) ""+ ""and period_year = to_char(now(), 'YYYY') ""+ ""and to_number(period_month,'99') = to_number(to_char(now(),'mm'),'99') ""+ ""group by agent_number) p_mtd, ""+ ""(select sum(total_api_01) api_ytd, sum(total_spi) spi_ytd, sum(total_topup) topup_ytd, sum(total_saver) saver_ytd, sum(total_ape) ape_ytd, agent_number as agent_number_ytd from ods.production_agent ""+ ""where agent_number = (:agentCode) ""+ ""and period_year = to_char(now(), 'YYYY') ""+ ""group by agent_number) p_ytd ""+ ""where p_mtd.agent_number_mtd = p_ytd.agent_number_ytd"" "
,," query = ""select * from ""+ ""(select sum(total_api_01) api_mtd, sum(total_spi) spi_mtd, sum(total_topup) topup_mtd, sum(total_saver) saver_mtd, sum(total_ape) ape_mtd, leader_number as leader_number_mtd from ods.production_leader ""+ ""where leader_number = (:agentCode) ""+ ""and period_year = to_char(now(), 'YYYY') ""+ ""and to_number(period_month,'99') = to_number(to_char(now(),'mm'),'99') ""+ ""group by leader_number) p_mtd, ""+ ""(select sum(total_api_01) api_ytd, sum(total_spi) spi_ytd, sum(total_topup) topup_ytd, sum(total_saver) saver_ytd, sum(total_ape) ape_ytd, leader_number as leader_number_ytd from ods.production_leader ""+ ""where leader_number = (:agentCode) ""+ ""and period_year = to_char(now(), 'YYYY') ""+ ""group by leader_number) p_ytd ""+ ""where p_mtd.leader_number_mtd = p_ytd.leader_number_ytd "" "
/corp/banner/reviewBanner,No Input Parameters,No query
/auth/Agent/checkRecruiter,No Input Parameters," query = ""SELECT recruiteragentcode FROM pruaob.aobcandidate WHERE npanumber = :npaNumber AND recruiteragentcode = :agentCode"" param = [npaNumber: params.npaNumber, agentCode: params.agentCode] } else { query = ""SELECT recruiteragentcode FROM pruaob.aobcandidate WHERE npanumber = :npaNumber"" param = [npaNumber: params.npaNumber] } "
/client/findBirthdayListJuly,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 7 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/auth/AgentPattern/listAgentPattern,No Input Parameters,No query
/base/Query/searchQuery,No Input Parameters,No query
/newods/Agent/findAllByAgentNumberList,No Input Parameters," select agent_number, client_number, agent_type, leader_number, office_code from ods.agent where agent_number in $policyList order by agent_number """""" return queryService.executeQueryTransform(query) } "
/client/findBirthdayListJune,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 6 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/pushNotif/before,No Input Parameters,No query
/followup/updateStatusPushNotificationStatementNew,No Input Parameters," String query = ""UPDATE notification.pushnotification SET opened = true WHERE id = $params.id"" "
/aobInterceptor/AobSqlAdapter/getTglTrainingAajiAgentStm,No Input Parameters," String query = ""select a.aobaajiexamregistrationid, b.aajiexamscheduleid, b.aajiexamdate, b.aajiexamexpireddate, b.aajiexamstarttime, b.aajiexamendtime, b.aajiexamlocation  from aobaajiexamregistration a  inner join aobaajiexamschedule b  on b.aajiexamscheduleid = a.aajiexamscheduleid  where a.aobaajiexamregistrationid = ( select max(aobaajiexamregistrationid)  from aobaajiexamregistration  "
/production/Newods/findAllPolicyMonthly,"""page"":page,""size"":size,""agentNumber"":agentNumber,""leaderNumber"":agentNumber,""searchBy"":searchBy,""searchVal"":searchVal,""searchBy2"":searchBy2,""searchVal2"":searchVal2,""orderBy"":orderBy,""direction"":direction,""salesforceId"":pruforceId,""agentCode"":agentCode",No query
/client/findStatusBirthdayList,"""month"":month,""agentNumber"":agentNumber,""salesforceId"":salesforceId,""agentCode"":agentCode,""pageType"":pageType"," filter = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) < extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) -1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) - interval '6 month') "" } else if (params.month.toString().equalsIgnoreCase(""15"")){ filter = "" WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) "" } else if (params.month.toString().equalsIgnoreCase(""16"")){ filter = "" WHERE to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)"" + "" AND to_date(CASE WHEN extract(MONTH FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) > extract(MONTH FROM c.date_of_birth) THEN extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) +1 ELSE extract(YEAR FROM CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) END || CASE WHEN to_char(c.date_of_birth, '-MM-DD') = '-02-29' THEN '-02-28' ELSE to_char(c.date_of_birth, '-MM-DD') END,'YYYY-MM-DD') < (CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE) + interval '6 month') "" } else { filter = "" WHERE CAST(DATE_PART('month', date_of_birth) AS varchar) = :month "" } "
,," select sc.key2 as client_status_code, sc.desc1 as client_status from ( select distinct 'BN' as role from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.beneficiary b on b.policy_number = p.policy_number join ods.client c on c.client_number = b.client_number ${filter} union select distinct client_role_code as role from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number = :agentNumber OR (agent_number IN :imPruList AND reff_agent = :agentNumber)) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.client_role cr on cr.policy_number = p.policy_number join ods.client c on c.client_number = cr.client_number ${filter} ) tmp join ods.system_code sc on sc.key2 = tmp.role where sc.key1 like 'CONTRACT_RELATION' group by sc.key2, sc.desc1 order by sc.key2 """""" "
/base/Approval/sendApproval,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getCountRexExam,No Input Parameters," String query = ""select count(*) from aobrecruitmentresult where candidateid = (select candidateid from aobcandidate where npanumber = '$params.npanumber')"" "
/pushNotif/findReportByText,No Input Parameters," SELECT x.agent_number, x.office_code FROM ods.agent x WHERE x.terminated_date IS NULL """""" "
,," SELECT x.office_code, x.radd_code FROM ods.region x WHERE x.radd_code != '' """""" "
,," String query3 = """"""SELECT DISTINCT pn.alert, pn.userid, '' as office_code, COUNT(pn.event_id) AS total_recipient, CASE pn.opened WHEN TRUE THEN COUNT(pn.opened) END AS total_read FROM notification.pushnotification pn LEFT JOIN notification.pushnotification_event pe on pn.event_id = pe.id LEFT JOIN notification.module m on pe.module_id = m.id WHERE date(pn.time_stamp) BETWEEN date(:fromDate) AND date(:toDate) AND m.id = :module AND pn.userid IN ('00001273','01004300','01005331') GROUP BY pn.opened, pn.userid,pn.alert """""" "
/productionHistory/SecurityInterceptor/before,No Input Parameters,No query
/commission/SecurityInterceptor/before,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/getCollectApplPackStatusData,No Input Parameters," SELECT a.result, a.createdate, a.description,a.headstatusid, a.tailstatusid,b.description as headstatus, c.description as tailstatus FROM aobapplicationpackstatus a left join aobdescriptionstatus b on b.statusid = a.headstatusid left join aobdescriptionstatus c on c.statusid = a.tailstatusid "
,," (SELECT candidateid FROM aobcandidate WHERE npanumber = '${params.npa}') ORDER by headstatusid asc, tailstatusid asc, createdate desc; """""" "
/base/Request/getRoleList,No Input Parameters,No query
/base/Processor/findAllProcessGroup,No Input Parameters,No query
/followup/findAllUnitAgentNumberOnly,No Input Parameters," def employeeQuery = ""SELECT a.agent_number "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.leader_number = :agentNumber "" + ""AND a.agent_type IN (${getAgentType(""Individual"",""${channel}"")}) "" + ""AND a.terminated_date IS NULL "" "
,," def leaderQuery = ""SELECT a.agent_number "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.agent_number = :agentNumber "" + ""AND a.terminated_date IS NULL "" "
,," def query = ""SELECT agent.* "" + ""FROM ( "" + sourceQuery + "") as agent "" "
/followup/findNewBusinessPendingPD,No Input Parameters," def query = """""" SELECT t.agent_number, a.agent_type, c.client_name, SUM(t.fup_total) as total FROM ods.agent a INNER JOIN ( SELECT b.agent_number, b.policy_number, c.client_name, count(a.fup_key) as fup_total FROM ods.follow_up a LEFT JOIN ods.policy b ON a.policy_number = b.policy_number LEFT JOIN ods.client c ON b.owner_number = c.client_number LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' LEFT JOIN ods.system_code e ON b.product_code = e.key2 AND e.key1 = 'PRODUCT' WHERE (b.agent_number IN (:queryUnit) OR (b.agent_number IN :imPruList AND b.reff_agent IN (:queryUnit))) AND b.valid_flag = '3' AND a.follow_up_status IN ('L','M','P','O') AND b.policy_status IN (:statusList) and to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop GROUP BY b.agent_number, b.policy_number, c.client_name ) AS t ON a.agent_number = t.agent_number LEFT JOIN ods.client c ON a.client_number = c.client_number """""" "
,," query = query + ""WHERE a.agent_type = :filter "" } "
/aobInterceptor/AobSqlAdapter/findUserWidgetToggleStatement,"""userId"":userId"," def query = ""select * from mobilefirst.queryWidget('$params.userId') ORDER BY value_sort ASC"" "
/followup/findBillingPendingRequirement,No Input Parameters," def query = ""SELECT b.policy_number as policy_number, c.client_name as name, d.desc1 as policy_status, f.desc1 as product_name, "" + ""CASE WHEN count(a.fup_key) > 99 THEN '99+' ELSE to_char(count(a.fup_key), 'FM99') END as fup_total "" + ""FROM ods.follow_up a "" + ""LEFT JOIN ods.policy b ON a.policy_number = b.policy_number "" + ""LEFT JOIN ods.client c ON b.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.alteration e ON a.alteration_number = e.alteration_number AND a.policy_number = e.policy_number "" + ""LEFT JOIN ods.system_code f ON b.product_code = f.key2 AND f.key1 = 'PRODUCT' "" + ""WHERE (b.agent_number = :agentNumber OR (b.agent_number IN :imPruList AND b.reff_agent = :agentNumber)) "" + ""AND b.valid_flag = '1' "" + ""AND a.follow_up_status IN ('L','M','P','O') "" + ""AND e.department = :department "" + ""AND e.alteration_status IN ('O','F') "" + ""AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/newsUpdateNew/News/reviewNews,No Input Parameters,No query
/base/Menu/index,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getAAJIExamStatement,No Input Parameters," SELECT a.* FROM pruaob.aobaajiexamschedule a left join ref_aajiquotacount b on a.aajiexamscheduleid=b.aajiexamscheduleid where aajiexamdate > current_date + 5 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT) and aajiexamdate < current_date + 17 and (b.reserved is null or cast(b.reserved as int)<a.aajiexamquota ) and a.activeflag = 'Y' ORDER BY aajiexamdate ASC, aajiexamsession ASC """""" return queryService.executeQuery(query) } "
/security/User/postUser,No Input Parameters,No query
/base/Menu/checkMenuAction,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/changeAAJIExamRegistrationByAgentCodeStatement,No Input Parameters, UPDATE aobaajiexamregistration 
," WHERE agentCode = '$params.agentCode'"""""" ",
/proposal/NewOds/findFilterFundHistoryStatus,"""salesforceId"":pruforceId,""agentCode"":agentNumber,""policyNumber"":policyNumber,""searchWords"":searchWords"," def query = ""SELECT d.transaction_code FROM mobilefirst.fund_transaction_hist_filter d"" "
,," query = ""SELECT DISTINCT(a.transaction_code) as value, c.desc1 as name "" + ""FROM ods.fund_transaction_history a "" + ""INNER JOIN ods.transaction_history d ON a.policy_number = d.policy_number AND a.tranno = d.tranno AND a.transaction_code = d.transaction_code "" + ""LEFT JOIN ods.system_code b ON a.fund_type = b.key2 AND b.key1 = 'FUND' "" + ""LEFT JOIN ods.system_code c ON a.transaction_code = c.key2 AND c.key1 = 'TRAN_CODE' "" + ""WHERE a.policy_number = :policyNumber "" + ""AND a.transaction_code IN :transactionCode "" + ""AND d.valid_flag <> '2' "" + ""AND b.desc1 ILIKE '%%' "" + ""ORDER BY c.desc1 ASC "" "
/auth/AgentType/findAgentTypeByScope,No Input Parameters," select name from security.m_agent_type a $condition """""" return queryService.executeQueryTransform(query).collect { it.name } } "
/aobInterceptor/AobSqlAdapterX/getSecurityQuestion,No Input Parameters," String query = ""SELECT aobsystemcodeid, aobitem, aobdescriptionind  FROM aobsystemcode  "
/aobConversion/AobSqlAdapter/getDocByNPAStatement,No Input Parameters," String query = ""select b.npanumber, c.documentname, encode(a.documentfile,'base64') n from aobcandidatesupportingdocument a left join aobcandidate b n on a.candidateid = b.candidateid left join aobsupportingdocument c n on a.documentid = c.documentid where b.npanumber='$params.npanumber'"" "
/publicInformation/Hospital/index,No Input Parameters,No query
/production/Newods/findAllProductionMonthly,"""min"":0,""max"":0,""page"":page,""size"":size,""agentNumber"":agentNumber,""leaderNumber"":agentNumber,""searchBy"":searchBy,""searchVal"":searchVal,""orderBy"":orderBy,""direction"":direction,""salesforceId"":pruforceId,""agentCode"":agentNumber"," def query = """""" SELECT * FROM ( select client.client_name clientname, agent.agent_type agenttype, agent.agent_number agentnumber, client.client_number clientnumber, agents_summary.total totnetapi from (select production_summary.agent_number, agents.agent_type, sum(tot_net_wape75)as total from ods.production_summary inner join (select agent_type_original, agent_number from ods.agent_hierarchy where (leader_number= :leaderNumber and agent_type_original IN (${getAgentType(""Individual"",""${channel}"")})) $agentLeader ) as agents on production_summary.agent_number = agents.agent_number where date_period >= '${productionPeriod.periodStart}' and date_period <= '${productionPeriod.periodStop}' group by production_summary.agent_number, agents.agent_type) as agents_summary inner join ods.agent on agent.agent_number=agents_summary.agent_number inner join ods.client on client.client_number=agent.client_number ) as ps where lower(${searchBy}) like '${searchVal}' order by case '${direction}' when 'asc' then totNetApi end asc, case '${direction}' when 'desc' then totNetApi end desc limit cast(:max as numeric) offset cast(:min as numeric) """""" "
/aobConversion/AobSqlAdapter/insertPushNotificationStatement,No Input Parameters," sql.execute (""INSERT INTO pushnotification(userid, alert, payload, opened) VALUES ('$params.userid', '$params.alert', '$params.payload', $params.opened)"") return [message:""Success""] } "
/aobInterceptor/AobSqlAdapter/getDataEducationStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/performanceMonitoring/Master/delete,No Input Parameters,No query
/auth/RoleMobile/postRoleMobile,No Input Parameters,No query
/auth/Menu/getList,No Input Parameters,No query
/newsUpdateNew/NewsUpdateApproval/findAllNewsHistory,No Input Parameters,No query
/base/AgentPattern/postAgentPattern,No Input Parameters,No query
/base/Role/checkAuthority,No Input Parameters," final String query = ""SELECT COUNT(*) FROM security.m_role m WHERE m.authority LIKE '${authority}'"" "
/contest/Parameter/findAllByParent,No Input Parameters," final String query = ""SELECT a.* FROM contest.master_parameter a n WHERE a.param_code not in (""+params+"") n AND a.param_type_code = 'P' n AND a.param_parent = '""+paramParent+""'n ORDER BY a.param_code, a.param_sequence"" "
/performanceMonitoring/PromotionChallenge/findApiDetail,"""id"":id,""max"":max,""page"":page,""filterBy"":directUnit,""orderBy"":orderBy"," select detail.*, client.client_name as agent_name from ( select * from ( VALUES ${getListValue(listDetail)} ) as temp (master_id, leader_number, agent_number, agent_type, type, api) ) as detail left join ods.agent agent on agent.agent_number = detail.agent_number left join ods.client client on client.client_number = agent.client_number $condition $order limit $max offset ${(page - 1) * max} """""" return newOdsQueryService.executeQueryList(query) } "
/approval/findAllTasks,No Input Parameters,No query
/base/Processor/findAllProcessGroupId,No Input Parameters," return ProcessGroup.executeQuery(""SELECT processGroupId FROM ProcessGroup ORDER BY processGroupId ASC"").collect { [class: ProcessGroup.class, processGroupId: it] } } "
/auth/Role/putRole,No Input Parameters,No query
/followup/findTotalNtuCase,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '3' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND p.policy_status in (:statusList) "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/followup/findNewBusinessPending,No Input Parameters," def query = ""SELECT b.policy_number as policy_number, c.client_name as name, b.proposal_number as proposal_number, d.desc1 as policy_status, e.desc1 as product_name, "" + ""CASE WHEN count(a.fup_key) > 99 THEN '99+' ELSE to_char(count(a.fup_key), 'FM99') END as fup_total "" + ""FROM ods.follow_up a "" + ""LEFT JOIN ods.policy b ON a.policy_number = b.policy_number "" + ""LEFT JOIN ods.client c ON b.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.system_code e ON b.product_code = e.key2 AND e.key1 = 'PRODUCT' "" + ""WHERE (b.agent_number = :agentNumber OR (b.agent_number IN :imPruList AND b.reff_agent = :agentNumber)) "" + ""AND b.valid_flag = '3' "" + ""AND a.follow_up_status IN ('L','M','P','O') "" + ""AND b.policy_status IN :statusList "" + ""AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/base/Request/authorize,No Input Parameters,No query
/contest/AllContest/saveContestFavorite,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""contestCode"":contestCode,""agentType"":agentType",No query
/newods/Policy/findAllByProposalDate,No Input Parameters," select * from ods.policy where date(proposal_date) between '${data.proposalPeriodStart}' and '${data.proposalPeriodStop}' order by policy_number limit $max offset ${max * (page - 1)} """""" return queryService.executeQueryTransform(query) } "
/newsUpdateNew/News/deletePdf,No Input Parameters,No query
/base/AgentType/editAgentType,No Input Parameters,No query
/followup/findTotalRecruitmentNew,No Input Parameters," SELECT count(a.id) as total FROM notification.pushnotification a LEFT JOIN notification.pushnotification_event b ON a.event_id = b.id INNER JOIN notification.module c ON b.module_id = c.id WHERE a.userid = :agentNumber AND a.opened is FALSE AND date(a.time_stamp) > (CURRENT_DATE - (interval '1 day' * b.max_period)) AND c.module_name ilike 'RECRUITMENT' """""" "
/base/RoleMobile/getRoleMobile,No Input Parameters,No query
/auth/MenuMobile/deleteMenu,No Input Parameters," return [content:null, status:200,message:""Successed delete menu mobile with id: $data.name ""] } "
/contest/ContestMaster/findAllContestParent,No Input Parameters," def String query = """"""SELECT a.contest_code, a.contest_name, a.submission_date_start, a.submission_date_end, a.new_bussiness_trx_date_start, a.new_bussiness_trx_date_end, a.non_new_bussiness_trx_date_start, a.non_new_bussiness_trx_date_end FROM contest.master a WHERE a.contest_type_code = '$type' AND a.channel = '$channel' :contestRange ORDER BY a.contest_name"""""" "
/aobConversion/AobSqlAdapter/updateSettingsConfigStatement,No Input Parameters," def query = ""UPDATE mobilefirst.user_application_configuration SET value = '$params.value' WHERE user_id = '$params.userId' AND app_conf_id = '$params.appConfId'"" "
/client/getTotalClientBirthDayTodoByAgentUnitList,No Input Parameters," /* String query = ""SELECT DISTINCT COUNT(*) AS total FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number n WHERE DATE_PART('day', date_of_birth) = date_part('day', CURRENT_DATE) AND DATE_PART('month', date_of_birth) = date_part('month', CURRENT_DATE) n AND p.agent_number IN (:list)"" "
,," String query = """""" SELECT COUNT(DISTINCT(client_number)) AS total FROM ( SELECT DISTINCT b.client_number FROM ( SELECT policy_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.beneficiary b on b.policy_number = p.policy_number JOIN ods.client c on c.client_number = b.client_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) union SELECT DISTINCT cr.client_number FROM ( SELECT policy_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.client_role cr on cr.policy_number = p.policy_number JOIN ods.client c on c.client_number = cr.client_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) GROUP BY cr.client_number ) as tmp """""" "
/client/findStatusBirthdayListFebruary,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =2 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/aobInterceptor/AobSqlAdapter/getTotalUnreadPushNotificationNew,"""userid"":agentCode,""filterBy"":filterBy"," SELECT count(a.id) as total FROM notification.pushnotification a LEFT JOIN notification.pushnotification_event b ON a.event_id = b.id INNER JOIN notification.module c ON b.module_id = c.id WHERE a.userid = :userid $filterQuery AND date(a.time_stamp) > (CURRENT_DATE - (interval '1 day' * b.max_period)) AND (a.opened is FALSE OR b.request_id NOT ILIKE 'INFO') """""" "
/newsUpdateNew/NewsType/postNewsType,No Input Parameters,No query
/productionHistory/NewOds/findPolicyList,"""salesforceId"":salesforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""year"":year,""month"":month,""searchWords"":searchWords,""filterBy"":filterBy,""sortBy"":sortBy,""sortDir"":sortDir,""size"":size,""page"":page,""pageType"":pageType,""channelType"":channelType"," def query = ""SELECT c.policy_number, $api as api, d.desc1 as product_code, e.client_name, b.desc1 as transaction_type, "" + ""to_char(a.transaction_date,'YYYY-MM-DD') as transaction_date "" + ""FROM ods.production a "" + ""LEFT JOIN ods.system_code b ON a.transaction_code = b.key2 AND b.key1 = 'TRAN_CODE' "" + ""LEFT JOIN ods.policy c ON a.policy_number = c.policy_number "" + ""LEFT JOIN ods.system_code d ON c.product_code = d.key2 AND d.key1 = 'PRODUCT' "" + ""LEFT JOIN ods.client e ON c.owner_number = e.client_number "" + ""WHERE a.agent_number = :agentNumber "" + ""AND a.transaction_date >= :startDate AND a.transaction_date <= :endDate "" + ""AND (c.policy_number ILIKE :searchWords OR e.client_name ILIKE :searchWords) "" + (filterStatus ? ""AND a.transaction_code = :filterBy "" : """" ) + ""ORDER BY "" + sortBy + sortDir + "" "" + ""LIMIT :size OFFSET :start "" "
/auth/RoleMobile/checkAuthority,No Input Parameters,No query
/auth/SecUtil/logout,"""userid"":agentCode",No query
/followup/findTotalClaimPendingRequirementUnitList,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND (to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop) "" "
/base/ActivityLog/authorize,No Input Parameters,No query
/client/findStatusBirthdayListJanuary,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =1 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/proposal/NewOds/findPersonalData,"""policyNumber"":policyNumber,""salesforceId"":pruforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""pageType"":pageType"," def query = ""SELECT a.proposal_number, a.policy_number, b.client_name as policy_holder_name, b.id_number, b.address1, b.address2, b.address3, b.address4, "" + ""b.address5, b.email_address as email, b.mobile_number_1 as mobile_phone, b.home_phone, b.office_phone, b.client_number "" + ""FROM ods.policy a "" + ""LEFT JOIN ods.client b ON a.owner_number = b.client_number "" + ""WHERE a.policy_number = :policyNumber "" + ""AND (a.agent_number = :agentNumber OR (a.agent_number IN :imPruList AND a.reff_agent = :agentNumber)) "" "
/auth/MenuMobile/listMenu,No Input Parameters,No query
/agentprofile/findByAgentNumber,"""agentNumber"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber"," query = ""SELECT c.id_number, a.agent_number, a.agent_type, a.client_number, c.client_name, to_char(c.date_of_birth,'yyyy-mm-dd') as date_of_birth, n (SELECT desc1 FROM ods.system_code where key1 = 'MARITAL' and key2 = a.agent_married_indicator) as marriage_status, n a.agent_address1, a.agent_address2, a.agent_address3, a.agent_address4, a.agent_address5, n a.agent_email_address, a.licence_number, a.agent_mobilephone1 as mobile_phone, a.agent_mobilephone2 as home_phone, a.agent_mobilephone3 as office_phone, to_char(a.appointed_date,'yyyy-mm-dd') as join_date, to_char(a.licence_expiry_date,'yyyy-mm-dd') as licence_expiry_date, n (SELECT coalesce(office_name, '') || ' ' || coalesce(office_addr1, '') || ' ' || coalesce(office_addr2, '') || ' ' || coalesce(office_addr3,'') from ods.region where office_code = a.office_code) as office, a.leader_number as unit_code, n (SELECT client_name FROM ods.client WHERE client_number = (select client_number from ods.agent where agent_number = a.leader_number)) as unit_name, n (SELECT count(agent_number) FROM ods.agent_sanction_history n WHERE agent_number = :agentNumber and offence_date between '$periodStart' and '$periodStop') as current_year_sanction, n (SELECT count(agent_number) FROM ods.agent_sanction_history WHERE agent_number = :agentNumber) as overall_sanction n FROM ods.agent a n LEFT JOIN ods.client c on c.client_number = a.client_number WHERE a.agent_number = :agentNumber "" "
/aobConversion/AobSqlAdapter/getListCandidateStatement,No Input Parameters," select a.*, (SELECT b.aajilicensecode FROM pruaob.aobaajiexamresult b WHERE b.agentcode = a.agentcode AND b.aajiexamresult = 'PASS' ORDER BY b.createdate ASC LIMIT 1) as licence from aobcandidate a where a.recruiteragentcode = '$params.recruiteragentcode' and a.activeflag is null and a.manualpack is false order by a.createdate desc limit $max offset ${max*(page-1)} """""" "
/base/Agent/listAgentType,No Input Parameters," def query = """"""select name from security.m_agent_type $condition1 """""" "
/auth/Role/postRole,No Input Parameters,No query
/base/AgentRole/putAgentRole,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getNpaNumberStatement,No Input Parameters," String query = ""SELECT npanumber  FROM aobcandidate "
, select * from aobcandidate ,
," select candidateid, agentcode, aajiexamresult, aajilicensecode from pruaob.aobaajiexamresult ",
/client/findBirthdayListFebruary,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 2 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/proposal/SecurityInterceptor/before,No Input Parameters,No query
/aobConversion/AobSqlAdapter/checkAAJIQuotaCandidate,No Input Parameters,No query
/client/findBirthdayListMay,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 5 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/contest/Completed/findAllByYear,No Input Parameters," select b.contest_code, b.contest_name, b.alias, b.monitoring_period_end,b.new_bussiness_trx_date_start,b.non_new_bussiness_trx_date_start,b.submission_date_start, b.new_bussiness_trx_date_end,b.non_new_bussiness_trx_date_end,b.submission_date_end, case when a.achievement_sts = '0' then false else true end as achieved, a.completed_date from contest.contest_completed a, contest.contest_master b where agent_number = '${data.agentNumber}' and a.contest_code = b.contest_code "
/auth/AgentType/checkDuplicateName,No Input Parameters," final String query = ""SELECT COUNT(*) FROM security.m_agent_type m WHERE upper(m.name) = upper('${name}')"" "
/newsUpdateNew/NewsUpdateApproval/findAllTaskNewsApproval,No Input Parameters,No query
/proposal/NewOds/findFilterPolicyStatusPD,"""salesforceId"":pruforceId,""agentNumber"":agentNumber,""agentCode"":agentCode,""statusList"":statusList,""pageType"":PageType,""type"":type"," def query = ""SELECT DISTINCT(d.desc1) as name, a.policy_status as value "" + ""FROM ods.policy a "" + ""LEFT JOIN ods.client b ON a.owner_number = b.client_number "" + ""LEFT JOIN ods.system_code d ON a.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""WHERE (a.agent_number IN :queryUnit OR (a.agent_number IN :imPruList AND a.reff_agent IN (:queryUnit))) "" + ""AND a.policy_status IN :statusList "" + ""ORDER BY d.desc1 ASC "" "
/auth/AgentType/deleteAgentType,No Input Parameters,No query
/corp/banner/deleteImage,No Input Parameters,No query
/base/RoleMobile/roleMobileList ,No Input Parameters,No query
/aobInterceptor/AobFuseAdapter/index,No Input Parameters,No query
/followup/findUnit,No Input Parameters," def employeeQuery = ""SELECT a.agent_number, a.agent_type, b.client_name "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.leader_number = :agentNumber "" + ""AND a.agent_type IN (${getAgentType(""Individual"",""${channel}"")}) "" + ""AND a.terminated_date IS NULL "" "
,," def leaderQuery = ""SELECT a.agent_number, a.agent_type, b.client_name "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.agent_number = :agentNumber "" + ""AND a.terminated_date IS NULL "" "
,," def qry = ""SELECT agent_type FROM ods.agent WHERE agent_number = :agentNumber "" "
,," sourceQuery = ""SELECT a.agent_number, a.agent_type, b.client_name "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.agent_number = :agentNumber "" + ""AND a.agent_type = '$filterBy' "" + ""AND a.terminated_date IS NULL "" } else { sourceQuery = ""SELECT a.agent_number, a.agent_type, b.client_name "" + ""FROM ods.agent a "" + ""LEFT JOIN ods.client b ON a.client_number = b.client_number "" + ""WHERE a.leader_number = :agentNumber "" + ""AND a.agent_type = '$filterBy' "" + ""AND a.terminated_date IS NULL "" } "
,," def query = ""SELECT agent.* "" + ""FROM ( "" + sourceQuery + "") as agent "" + ""ORDER BY "" + orderDir + ""agent.client_name ASC "" + ""LIMIT :size OFFSET :start "" "
/base/Query/saveQuery,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/getNpaNumberStatement,No Input Parameters," String query = ""SELECT npanumber  FROM aobcandidate "
,, select * from aobcandidate 
,," select candidateid, agentcode, aajiexamresult, aajilicensecode from pruaob.aobaajiexamresult "
/aobConversion/AobSqlAdapter/checkAAJIValidforAgentAfterHourStatement,No Input Parameters," String query = ""SELECT a.aajiexamexpireddate >= current_date as isvalidexpireddate,  a.aajiexamdate >= current_date + 5 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT)  and a.aajiexamdate < current_date + 17 as isvalidexamdate  FROM aobaajiexamschedule a  left join ref_aajiquotacount b  on a.aajiexamscheduleid=b.aajiexamscheduleid  where a.aajiexamscheduleid=$params.aajiexamscheduleid"" "
/auth/AgentPattern/postAgentPattern,No Input Parameters,No query
/aobInterceptor/AobSqlAdapterX/getDataNPWPStatusStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/followup/findTotalAfterDueDateUnitDetail,No Input Parameters," /*String query = ""select userId, sum(total) as total from ( "" + ""SELECT COUNT(p.policy_number) as total, p.agent_number as userId "" + ""FROM ods.policy p "" + ""WHERE p.policy_status = 'IF' AND p.billing_channel != 'A' "" + ""AND p.paid_to_date BETWEEN (CURRENT_DATE -INTERVAL '44 days') AND CURRENT_DATE "" + ""AND (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) group by p.agent_number "" + ""UNION ALL "" + ""SELECT COUNT(p.policy_number) as total, p.agent_number as userId "" + ""FROM ods.policy p "" + ""WHERE p.policy_status = 'LA' AND p.billing_channel != 'A' "" + ""AND p.paid_to_date BETWEEN (CURRENT_DATE -INTERVAL '729 days') AND (CURRENT_DATE-INTERVAL '45 days') "" + ""AND (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) group by p.agent_number "" + ""UNION ALL "" + ""SELECT count(*) as total, p.agent_number as userId "" + ""FROM ods.policy p "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.policy_status = 'IF' "" + ""AND p.billing_channel = 'A' "" + ""AND sc.key1 like 'POLICY_STATUS' group by p.agent_number "" + "")policy group by userId ""*/ /* "
,," select agent_number, sum(total) as total, agent_type from ( SELECT COUNT(p.policy_number) as total, p.agent_number, ag.agent_type FROM ods.policy p LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number WHERE p.policy_status = 'IF' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE -INTERVAL '44 days') AND CURRENT_DATE AND (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) group by p.agent_number, ag.agent_type UNION ALL SELECT COUNT(p.policy_number) as total, p.agent_number, ag.agent_type FROM ods.policy p LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number WHERE p.policy_status = 'LA' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE -INTERVAL '729 days') AND (CURRENT_DATE-INTERVAL '45 days') AND (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) group by p.agent_number, ag.agent_type UNION ALL SELECT count(*) as total, p.agent_number, ag.agent_type FROM ods.policy p LEFT JOIN ods.client c ON p.owner_number = c.client_number LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) AND p.policy_status = 'IF' AND p.billing_channel = 'A' AND sc.key1 like 'POLICY_STATUS' group by p.agent_number, ag.agent_type )policy group by agent_number, agent_type "
,," select agent_number, sum(total) as total, agent_type, client_name from ( SELECT COUNT(p.policy_number) as total, p.agent_number, ag.agent_type, c.client_name FROM ods.policy p LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number LEFT JOIN ods.client c on ag.client_number = c.client_number WHERE p.policy_status = 'IF' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE -INTERVAL '44 days') AND CURRENT_DATE AND (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) group by p.agent_number, ag.agent_type, c.client_name UNION ALL SELECT COUNT(p.policy_number) as total, p.agent_number, ag.agent_type, c.client_name FROM ods.policy p LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number LEFT JOIN ods.client c on ag.client_number = c.client_number WHERE p.policy_status = 'LA' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE -INTERVAL '729 days') AND (CURRENT_DATE-INTERVAL '45 days') AND (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) group by p.agent_number, ag.agent_type, c.client_name UNION ALL SELECT count(*) as total, p.agent_number, ag.agent_type, c.client_name FROM ods.policy p LEFT JOIN ods.client c ON p.owner_number = c.client_number LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) AND p.policy_status = 'IF' AND p.billing_channel = 'A' AND sc.key1 like 'POLICY_STATUS' group by p.agent_number, ag.agent_type, c.client_name )policy group by agent_number, agent_type, client_name "
,," select agent_number, sum(total) as total, agent_type, client_name from ( SELECT COUNT(p.policy_number) as total, p.agent_number, ag.agent_type, c.client_name FROM ods.policy p LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number LEFT JOIN ods.client c on ag.client_number = c.client_number WHERE p.policy_status = 'IF' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE -INTERVAL '44 days') AND CURRENT_DATE AND (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) group by p.agent_number, ag.agent_type, c.client_name UNION ALL SELECT COUNT(p.policy_number) as total, p.agent_number, ag.agent_type, c.client_name FROM ods.policy p LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number LEFT JOIN ods.client c on ag.client_number = c.client_number WHERE p.policy_status = 'LA' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE -INTERVAL '729 days') AND (CURRENT_DATE-INTERVAL '45 days') AND (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) group by p.agent_number, ag.agent_type, c.client_name UNION ALL SELECT count(*) as total, p.agent_number, ag.agent_type, c2.client_name FROM ods.policy p LEFT JOIN ods.client c ON p.owner_number = c.client_number LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number LEFT JOIN ods.client c2 ON ag.client_number = c2.client_number WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) AND p.policy_status = 'IF' AND p.billing_channel = 'A' AND sc.key1 like 'POLICY_STATUS' group by p.agent_number, ag.agent_type, c2.client_name )policy group by agent_number, agent_type, client_name "
/bonus/NewOds/findPolicyList,"""salesforceId"":salesforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""filterBy"":filterBy,""searchWords"":searchWords,""periodFrom"":periodFrom,""periodTo"":periodTo,""sortBy"":sortBy,""sortDir"":sortDir,""size"":size,""page"":page"," def query = ""SELECT cut_off_date, policy_duration FROM mobilefirst.bonus3_plus WHERE valid_flag = '1' and current_date BETWEEN period_from AND period_to"" "
,," query = ""SELECT b.client_name as policy_holder_name, a.policy_number, c.desc1 as product_name, "" + ""CASE WHEN a.currency = 'IDR' THEN 'Rp' WHEN a.currency = 'USD' THEN 'US$' ELSE a.currency END as currency, round(a.instalment_premium,2) as premium_amount, "" + ""to_char(a.paid_to_date, 'dd FMMonth YYYY') as due_date, e.desc1 as payment_type, "" + ""to_char(a.original_commencement_date, 'dd FMMonth YYYY') as occ_date, f.desc1 as payment_frequency, d.desc1 as status "" + ""FROM ods.policy a "" + ""LEFT JOIN ods.client b ON a.owner_number = b.client_number "" + ""LEFT JOIN ods.system_code c ON a.product_code = c.key2 AND c.key1 = 'PRODUCT' "" + ""LEFT JOIN ods.system_code d ON a.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.system_code e ON a.billing_channel = e.key2 AND e.key1 = 'BILL_CHANNEL' "" + ""LEFT JOIN ods.system_code f ON a.billing_frequency = f.key2 AND f.key1 = 'PAYMENT_FREQ' "" + ""WHERE (a.agent_number = :agentNumber OR (a.agent_number IN :imPruList AND a.reff_agent = :agentNumber)) "" + ""AND a.policy_status IN :statusList "" + ""AND (b.client_name ILIKE '%"" + searchWords + ""%' OR a.policy_number LIKE '%"" + searchWords + ""%') "" + ""AND to_char(a.paid_to_date, 'YYYY-MM') >= :periodFrom AND to_char(a.paid_to_date, 'YYYY-MM') <= :periodTo "" + ""AND e.key2 IN :paymentType "" + ""AND age('"" + resultSetting[0].cutOffDate + ""', a.original_commencement_date) > (interval '"" + resultSetting[0].policyDuration + "" months') "" + ""ORDER BY "" + sortBy + "" "" + sortDir + "" "" + ""LIMIT CAST(:size AS NUMERIC) OFFSET CAST(:start AS NUMERIC) "" "
/security/Role/index,No Input Parameters,No query
/client/findBirthdayListSeptember,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 9 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/followup/findAgentTypePolicyHolderPendingRequirementPD,No Input Parameters," def query = """""" SELECT a.agent_type FROM ods.agent a INNER JOIN ( SELECT b.agent_number FROM ods.follow_up a LEFT JOIN ods.policy b ON a.policy_number = b.policy_number LEFT JOIN ods.client c ON b.owner_number = c.client_number LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' LEFT JOIN ods.alteration e ON a.alteration_number = e.alteration_number AND a.policy_number = e.policy_number LEFT JOIN ods.system_code f ON b.product_code = f.key2 AND f.key1 = 'PRODUCT' WHERE (b.agent_number IN (:queryUnit) OR (b.agent_number IN :imPruList AND b.reff_agent IN (:queryUnit))) AND b.valid_flag = '1' AND a.follow_up_status IN ('L','M','P','O') AND e.department = :department AND e.alteration_status IN ('O','F') AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop GROUP BY b.agent_number ) AS t ON a.agent_number = t.agent_number GROUP BY a.agent_type """""" "
/base/MenuMobile/saveMenu,No Input Parameters,No query
/followup/findFollowUpNew,No Input Parameters," def query = ""SELECT a.owner_number as client_number, b.client_name "" + ""FROM ods.policy a "" + ""LEFT JOIN ods.client b ON a.owner_number = b.client_number "" + ""WHERE a.policy_number = :policyNumber "" + ""AND (a.agent_number = :agentNumber OR (a.agent_number IN :imPruList AND a.reff_agent = :agentNumber)) "" "
/persistency/Newods/findAllPolicyLapsed,No Input Parameters," query = """""" SELECT * FROM (SELECT p.policy_no policynumber, c.client_name clientname, pols.desc2 policystatus, prod.desc1 productcode FROM ods.persistency_detail p, ods.client c, ods.policy pol, ods.system_code pols, ods.system_code prod WHERE p.agent_number = :agentNumber AND c.client_number = pol.owner_number AND p.policy_no = pol.policy_number AND prod.key1 = 'PRODUCT' AND prod.key2 = pol.product_code AND pols.key1 = 'POLICY_STATUS' AND pols.key2 = pol.policy_status AND pol.policy_status = 'LA') as p WHERE lower(policystatus) LIKE '%${request?.searchVal.toLowerCase()}%' AND (clientname LIKE '%${request.searchVal2.toUpperCase()}%' OR policynumber LIKE '%${request.searchVal2}%') ORDER BY CASE '${request.orderBy}' WHEN 'clientName' THEN clientname END ASC, CASE '${request.orderBy}' WHEN 'policyNumber' THEN policyNumber END ASC LIMIT CAST(:max AS NUMERIC) offset CAST(:min AS NUMERIC) """""" "
/aobConversion/AobSqlAdapter/checkAAJIQuotaStatement,No Input Parameters," SELECT ae.aajiexamscheduleid, rf.reserved, ae.aajiexamquota FROM ref_aajiquotacount rf RIGHT JOIN aobaajiexamschedule ae ON ae.aajiexamscheduleid = rf.aajiexamscheduleid WHERE ae.aajiexamscheduleid = '$params.aajiexamscheduleid' """""" "
/base/Menu/getMenuDetail,No Input Parameters," final String query = ""select menu_children_id from usermanagement.m_menu_m_menu where menu_id = '$id';"" "
/client/findProfileClient,"""clientNumber"":clientNumber,""salesforceId"":pruforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""pageType"":pageType"," String query = ""SELECT c.client_name AS client_name,c.client_number AS client_number, c.country_code AS nationality,  c.religion AS religion, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_Of_Birth, CASE c.married_indicator  WHEN 'M' THEN 'Married' ELSE 'Single' END AS marital_status, CASE c.gender WHEN 'M' THEN 'Male' WHEN 'F' THEN 'Female' END AS gender,  c.email_address as email_address, c.mobile_number_1 AS mobile_number1, c.mobile_number_2 AS mobile_number2, c.mobile_number_3 AS mobile_number3,  c.address1 as address1, c.address2 as address2,c.address3 as address3,c.address4 as address4, c.address5 as address5 FROM ods.client c WHERE client_number =:clientNumber"" "
/pushNotif/list,No Input Parameters," String query = """"""SELECT a.id AS ""eventId"", b.module_name AS ""moduleName"", a.message, a.max_period AS ""maxPeriod"", c.id AS ""reqId"" FROM notification.pushnotification_event a, notification.module b, notification.request c WHERE a.module_id = b.id AND a.request_id = c.id AND"""""" "
/newsUpdateNew/News/getNewsTitle,No Input Parameters,No query
/followup/findAgentTypeNewBusinessPendingPD,No Input Parameters," def query = """""" SELECT a.agent_type FROM ods.agent a INNER JOIN ( SELECT b.agent_number FROM ods.follow_up a LEFT JOIN ods.policy b ON a.policy_number = b.policy_number LEFT JOIN ods.client c ON b.owner_number = c.client_number LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' LEFT JOIN ods.system_code e ON b.product_code = e.key2 AND e.key1 = 'PRODUCT' WHERE (b.agent_number IN (:queryUnit) OR (b.agent_number IN :imPruList AND b.reff_agent IN (:queryUnit))) AND b.valid_flag = '3' AND a.follow_up_status IN ('L','M','P','O') AND b.policy_status IN (:statusList) and to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop GROUP BY b.agent_number ) AS t ON a.agent_number = t.agent_number GROUP BY a.agent_type """""" "
/base/Role/deleteRole,No Input Parameters," return [message: ""Failed to delete role "" + role.authority + "". It has been used by user(s)"", content: null, status: 500] } "
/production/Newods/findAllProductionUnitYearly,"""agentType"":""%%"",""page"":page,""size"":size,""leaderNumber"":agentNumber,""salesforceId"":pruforceId,""agentCode"":agentNumber,/*""orderBy"":orderBy,*/""direction"":direction,""searchBy"":searchBy,""searchVal"":searchVal,""channelType"":channelType"," def query = """""" SELECT clientname, clientnumber, agentnumber, agenttype, CAST(SUM(totnetapi) AS VARCHAR) totnetapi FROM (SELECT client.client_name clientname, client.client_number clientnumber, agent.agent_number agentnumber, agent.agent_type agenttype, CASE WHEN agenth_prod.total_ape is null THEN '0' ELSE agenth_prod.total_ape END AS totnetapi FROM (SELECT agenth.agent_number, prod.total_ape FROM ods.agent_hierarchy agenth LEFT JOIN (SELECT production_agent.agent_number, ${ape} as total_ape FROM ods.production_agent WHERE (CASE WHEN '${periodMonth}' is not null THEN (production_agent.period_month LIKE '${periodMonth}' AND production_agent.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_agent.period_year LIKE '${periodYear}' END) ) prod ON prod.agent_number = agenth.agent_number WHERE (agenth.leader_number = :leaderNumber AND agenth.agent_type_original IN (${getAgentType(""Individual"",""${channel}"")})) ${agentLeader} UNION SELECT production_agent.agent_number, ${ape} as total_ape FROM ods.production_agent WHERE (CASE WHEN '${periodMonth}' is not null THEN (production_agent.period_month LIKE '${periodMonth}' AND production_agent.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_agent.period_year LIKE '${periodYear}' END) AND production_agent.leader_number = :leaderNumber ) AS agenth_prod LEFT JOIN ods.agent ON agent.agent_number = agenth_prod.agent_number LEFT JOIN ods.client ON client.client_number = agent.client_number ) AS res WHERE lower(${searchBy}) LIKE '${searchVal}' GROUP BY clientname, clientnumber, agentnumber, agenttype ORDER BY CASE '${request.direction?.toLowerCase()}' WHEN 'asc' THEN SUM(totnetapi) END ASC, CASE '${request.direction?.toLowerCase()}' WHEN 'desc' THEN SUM(totnetapi) END DESC LIMIT CAST(:max AS NUMERIC) offset CAST(:min AS NUMERIC) """""" "
/client/findOneMonthsPreviousBirthday,"""agentNumber"":agentNumber,""page"":page,""size"":size,""salesforceId"":pruforceId,""agentCode"":agentCode"," String query = ""SELECT DISTINCT c.client_number AS client_number,c.client_name AS client_name, n CONCAT(address1,' ',address2,' ',address3,' ',address4,' ',address5) AS address, c.client_status AS client_status, n to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old n FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE n DATE_PART('month', c.date_of_birth) = Extract(month from CAST(CURRENT_DATE AS DATE) - Interval '1 Month') n AND p.agent_number =:agentNumber LIMIT CAST(${max} AS NUMERIC ) OFFSET CAST(${min} AS NUMERIC)"" "
/aobInterceptor/SecurityInterceptor/checkRecruiter,No Input Parameters,No query
/newsUpdateNew/News/getNews,No Input Parameters," final String query = ""SELECT n.id::text, n.title, t.type_name, n.start_publish_date, n.end_publish_date, n.workflow_status, n.created_by, n.created_by_id, n.created_date, n.modified_by, n.modified_by_id, n.updated_date "" + ""FROM newsupdate.t_news n, newsupdate.m_news_type t "" + ""WHERE n.news_type_id = t.id"" "
/base/Query/getQuery,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getSystemCodeStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/followup/findTotalClaimPendingRequirement,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/newods/Policy/findAllByPolicyNumberList,No Input Parameters," select policy_number,agent_number,proposal_received_date,policy_issued_date,product_code,owner_number,billing_channel,reff_bank,reff_agent from ods.policy where policy_number in $policyNumberList order by policy_number """""" return queryService.executeQueryTransform(query) } "
/aobConversion/AobSqlAdapter/cancelCandidate,No Input Parameters," String query = ""update pruaob.aobcandidate set activeflag = 'CANCELLED', updateBy = '$params.pruforceId' "" + ""where npanumber = '$params.npanumber' and recruiteragentcode = '$params.recruiteragentcode'"" "
/followup/findAfterDueDateData,No Input Parameters," def query = ""SELECT c.client_number, c.client_name, p.policy_number, d.desc1 AS policy_status, to_char(p.paid_to_date, 'dd FMMonth YYYY') AS paid_to_date, e.desc1 as product_name "" + ""FROM ods.policy p "" + ""INNER JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code d ON p.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.system_code e ON p.product_code = e.key2 AND e.key1 = 'PRODUCT' "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.policy_status = :policyStatus "" + ""AND p.billing_channel != 'A' "" + ""AND p.paid_to_date BETWEEN (CURRENT_DATE - INTERVAL '""+ endDay +"" days') AND (CURRENT_DATE - INTERVAL '""+ startDay +"" days') "" + ""AND (c.client_name ILIKE :searchWords OR p.policy_number LIKE :searchWords) "" + ""ORDER BY "" + sort + "" LIMIT CAST(:size AS NUMERIC) OFFSET CAST(:start AS NUMERIC) "" println query "
/newsUpdateNew/BankUnit/postBankUnit,No Input Parameters,No query
/base/Query/deleteQuery,No Input Parameters,No query
/newods/Policy/findAllPolicyByTimestamp,No Input Parameters," select distinct policy_number, agent_number from ods.policy where date(time_stamp) = '${data.timeStamp}' and policy_status in ('IF','PS') order by policy_number limit $max offset ${max * (page - 1)} """""" return queryService.executeQueryTransform(query) } "
/auth/Request/getUserDetail,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/checkAAJIValidStatement,No Input Parameters," String query = ""SELECT a.aajiexamexpireddate >= current_date as isvalidexpireddate, true as isvalidexamdate  FROM aobaajiexamschedule a  left join ref_aajiquotacount b  on a.aajiexamscheduleid=b.aajiexamscheduleid  where a.aajiexamscheduleid=$params.aajiexamscheduleid"" "
/newods/AgentHierarchy/findAllAgentNumberAMOnAM ,No Input Parameters," SELECT agency_manager_number as agent_number, string_agg(agent_number,' ') as list_agent FROM ods.agent_hierarchy WHERE agency_manager_number in ${queryService.convertListToString(data.agentNumberList)} and agency_manager_number != agent_number group by agency_manager_number order by agency_manager_number """""" return queryService.executeQueryTransform(query) } "
/security/Request/editRequest,No Input Parameters,No query
/base/AgentRole/postAgentRole,No Input Parameters,No query
/auth/MenuMobile/findAll,No Input Parameters,No query
/aobInterceptor/AobSqlAdapterX/getDataGenderStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/client/findBirthdayListApril,No Input Parameters," String query = ""select distinct c.*, sc.desc1 as client_status from ( select * from(SELECT c.client_number AS client_number,c.client_name AS client_name,c.address1 AS address1,c.address2 AS address2,c.address3 AS address3, c.address4 AS address4,c.address5 AS address5,to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) = 4 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/newods/AgentHierarchy/findByAgencyManagerNumber ,No Input Parameters,No query
/contest/ContestMaster/findContestParameters,No Input Parameters,No query
/auth/Request/getRoleList,No Input Parameters,No query
/followup/findTotalBillingPendingRequirement,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/base/AgentRole/deleteAgentRole,No Input Parameters,No query
/proposal/NewOds/findFollowUpNew,"""policyNumber"":policyNumber,""salesforceId"":pruforceId,""agentCode"":agentCode,""size"":size,""page"":page,""sortBy"":sortBy,""sortDir"":sortDir,""statusList"":statusList,""type"":type,""agentNumber"":agentNumber,""pageType"":pageType"," def query = ""SELECT a.owner_number as client_number, b.client_name "" + ""FROM ods.policy a "" + ""LEFT JOIN ods.client b ON a.owner_number = b.client_number "" + ""WHERE a.policy_number = :policyNumber "" + ""AND (a.agent_number = :agentNumber OR (a.agent_number IN :imPruList AND a.reff_agent = :agentNumber)) "" "
/followup/findTotalClaimPendingRequirementUnitCustom,No Input Parameters," def query = ""SELECT DISTINCT p.agent_number as userId "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND (to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop) "" "
/aobConversion/AobFuseAdapter/index,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getEmailExisting,No Input Parameters," String query = ""SELECT candidateemail ,candidatecellularno1  FROM aobcandidate "
/contest/MobileSecurityInterceptor/before,No Input Parameters,No query
/auth/AuditLog/index,No Input Parameters," def query = ""SELECT a.actor, a.className, a.persistedObjectId, a.eventName, MIN(a.dateCreated) as dateCreated FROM AuditLog a"" if(data.actorFilter || data.classNameFilter || data.eventNameFilter || data.objectIdFilter || data.createdFilter) { query += "" WHERE"" if(data.actorFilter) { query += "" lower(a.actor) like '%${data.actorFilter.toLowerCase()}%'"" if(data.classNameFilter || data.eventNameFilter || data.objectIdFilter || data.createdFilter) { query += "" AND"" } } if(data.classNameFilter) { query += "" lower(a.className) like '%${data.classNameFilter.toLowerCase()}%'"" if(data.eventNameFilter || data.objectIdFilter || data.createdFilter) { query += "" AND"" } } if(data.eventNameFilter) { query += "" lower(a.eventName) like '%${data.eventNameFilter.toLowerCase()}%'"" if(data.objectIdFilter || data.createdFilter) { query += "" AND"" } } if(data.objectIdFilter) { query += "" lower(a.persistedObjectId) like '%${data.objectIdFilter.toLowerCase()}%'"" if(data.createdFilter) { query += "" AND"" } } if(data.createdFilter) { query += "" date(a.dateCreated) = '$data.createdFilter'"" } } "
/followup/findStatusPolicyInCancelPeriod,No Input Parameters," def query = ""SELECT distinct(p.policy_status) as key, sc.desc1 as description "" + ""FROM ods.policy p "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.policy_status = 'IF' AND p.billing_channel = 'A' AND sc.key1 like 'POLICY_STATUS' "" "
/newsUpdateNew/MobileNews/newsListPriority,No Input Parameters," SELECT a.id, a.title, a.start_publish_date, a.end_publish_date, a.description, a.news_type_id, a.agent_type, a.image_name, a.file_name, b.type_name, b.type_file FROM newsupdate.t_news a, newsupdate.m_news_type b WHERE activated is true and cast (array['${agentTypeId}'] as text[]) && (regexp_split_to_array(regexp_replace(agent_type, '^', '', ''),',')) and end_publish_date > cast(now() at time zone '${ timeZone }' as date) and is_priority = 'true' and start_publish_date <= cast(now() at time zone '${timeZone}' as date) and a.news_type_id = b.id order by a.start_publish_date desc, a.created_date desc limit 3 offset ${max * (page - 1)} """""" "
/contest/ContestMaster/findContestChannel,No Input Parameters," final String query = ""SELECT a.* FROM general.global_param a n WHERE a.condition = 'CONTEST_CHANNEL' n ORDER BY a.param_code"" "
/newsUpdateNew/NewsType/putNewsType,No Input Parameters,No query
/pushNotif/generateReportByModule,No Input Parameters,No query
/approval/findUserTasks,No Input Parameters,No query
/proposal/NewOds/findProductData,"""policyNumber"":policyNumber,""productCode"":productCode,""salesforceId"":pruforceId,""agentCode"":agentNumber,""lifeNumber"":lifeNumber"," def query = ""SELECT e.desc1 as product_name, a.component_code as product_code, c.client_name as life_assured, a.sum_assured, a.instalment_premium as premium, f.desc1 as status, "" + ""to_char(a.premium_cessation_date, 'dd FMMonth YYYY') as premium_cessation_date, to_char(a.risk_cessation_date, 'dd FMMonth YYYY') as risk_cessation_date, "" + ""g.desc1 as premium_status, to_char(a.risk_commencement_date, 'dd FMMonth YYYY') as risk_commencement_date, a.single_premium, "" + ""CASE WHEN a.premium_currency = 'IDR' THEN 'Rp' WHEN a.premium_currency = 'USD' THEN 'US$' ELSE a.premium_currency END as currency_symbol "" + ""FROM ods.component a "" + ""LEFT JOIN ods.insured b ON a.life_number = b.life_number AND a.policy_number = b.policy_number "" + ""LEFT JOIN ods.client c ON b.client_number = c.client_number "" + ""LEFT JOIN ods.system_code e ON a.component_code = e.key2 AND e.key1 = 'COMPONENT' "" + ""LEFT JOIN ods.system_code f ON a.component_status = f.key2 AND f.key1 = 'POLICY_STATUS' "" + ""LEFT JOIN ods.system_code g ON a.premium_status = g.key2 AND g.key1 = 'PREMIUM_STATUS' "" + ""WHERE a.policy_number = :policyNumber "" + ""AND a.component_code = :productCode "" + ""AND a.life_number = :lifeNumber "" "
/base/Menu/deleteMenu,No Input Parameters," return [message: ""Failed to delete menu ""+menu.name+"". It has been used by role(s)"",content:null, status:500] } MenuUrl.findAllByMenu(menu).each{it.delete()} deleteLinkToParent(id) menu.delete() return [message: ""Success delete menu with id: $id"",content:null, status:200] } "
/newsUpdateNew/MobileNews/getNewsTypeFilter,No Input Parameters," select distinct on (a.id) CAST(a.id AS varchar(20)), a.type_name, a.type_icon, a.type_src, a.type_file, a.description, a.created_by, a.created_date, a.updated_by, a.updated_date from newsupdate.m_news_type a inner join newsupdate.t_news b on a.id = b.news_type_id where b.activated is true and cast (array['${agentTypeId}'] as text[]) && (regexp_split_to_array(regexp_replace(b.agent_type, '^', '', ''),',')) and b.end_publish_date > cast(now() at time zone '${timeZone}' as date) and b.start_publish_date <= cast(now() at time zone '${timeZone}' as date)"""""" "
/base/Query/index,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/getAAJIExamCityAfterHourStatement,No Input Parameters," String query = ""SELECT DISTINCT(a.aajiexamlocation)  FROM aobaajiexamschedule a  left join ref_aajiquotacount b  on a.aajiexamscheduleid=b.aajiexamscheduleid  where aajiexamdate > current_date + 4 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT)  and aajiexamdate < current_date + 17  and (b.reserved is null or cast(b.reserved as int)<a.aajiexamquota )"" "
/aobInterceptor/AobSqlAdapter/checkAAJIQuotaCandidateCountStatement,No Input Parameters," String query = ""SELECT COUNT(aajiexamscheduleid) from aobaajiexamregistration aer  where aer.aajiexamscheduleid = $params.aajiexamscheduleid;"" "
/production/Newods/findIndividuPdMonthly,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentCode"":agentCode,"," def query = """""" select CAST(sum(total_ape_02) AS varchar(20)) AS total_ape, CAST(sum(total_api_02) AS varchar(20)) AS api, CAST(sum(total_saver_02) AS varchar(20)) AS saver, CAST(sum(total_topup_02) AS varchar(20)) AS topup, CAST(sum(total_spi_02) AS varchar(20)) AS spi from ods.production_agent where agent_number = :agentNumber AND CASE WHEN '${periodMonth}' is not null THEN (production_agent.period_month LIKE '${periodMonth}' AND production_agent.period_year LIKE '${periodYear}') WHEN '${periodMonth}' LIKE '%%' THEN production_agent.period_year LIKE '${periodYear}' END """""" "
/auth/RoleMobile/getRoleMobile,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/updateWidgetSortingConfigStatement,"""sortValue"":sortValue,""userId"":userId,""widgetId"":widgetId"," def query = ""UPDATE mobilefirst.user_widget_toggle SET sort_value = '$params.sortValue' WHERE user_id = '$params.userId' AND widget_id = '$params.widgetId'"" "
/client/findClientBirthdayAfterThreeMonths,No Input Parameters,No query
/auth/AgentPattern/findAllAgentPattern,No Input Parameters,No query
/aobInterceptor/AobSqlAdapterX/getDataOfficeCodeStatement,No Input Parameters," String query = ""SELECT officecode,gafullname FROM aobofficecentraladmin where activeflag = '1'"" "
/base/Approval/myTaskList,No Input Parameters," String query = """"""SELECT a.trxNo, a.dcisionDate, a.description, a.module, a.pageState, a.approvalSts FROM Approval a WHERE a.dcisionDate = (SELECT MAX(b.dcisionDate) FROM Approval b WHERE a.trxNo = b.trxNo) AND a.decisionBy = '${data.username}'"""""" if(data.descriptionFilter || data.moduleFilter || data.decisionDateFilter || data.approvalStsFilter){ query += "" AND"" if(data.descriptionFilter) { query += "" lower(a.description) like '%${data.descriptionFilter.toLowerCase()}%'"" if(data.ipOriginFilter || data.decisionDateFilter || data.approvalStsFilter) { query += "" AND"" } } if(data.moduleFilter) { query += "" lower(a.module) like '%${data.moduleFilter.toLowerCase()}%'"" if(data.decisionDateFilter || data.approvalStsFilter) { query += "" AND"" } } if(data.decisionDateFilter) { query += "" date(a.dcisionDate) = '$data.decisionDateFilter'"" if(data.approvalStsFilter) { query += "" AND"" } } if(data.approvalStsFilter) { query += "" lower(a.approvalSts) like '%${data.approvalStsFilter.toLowerCase()}%'"" } } "
/aobInterceptor/AobSqlAdapter/getCountReTakerAAJIStatement,"""agentCode"":agentCode"," String query = ""SELECT * FROM aobaajiexamregistration a WHERE to_char(a.aajiexamdate,'yyyymmdd') >= to_char(now(),'yyyymmdd') n AND (a.statusregister <> 'TIDAK TERDAFTAR' or a.statusregister is null) and not exists (select * from aobaajiexamresult b n where ((a.candidateid = b.candidateid) or (a.agentcode = b.agentCode)) and a.aajiexamscheduleid = b.aajiexamscheduleid ) n and a.statusagent = 'retaker' and a.agentcode = '$params.agentCode'"" "
/pushNotif/removeDevice,"""uuid"":uuid",No query
/followup/findRecruitmentForUnit,No Input Parameters," def query = ""SELECT pn.* "" + ""FROM notification.pushnotification pn "" + ""WHERE pn.userid = :agentNumber AND pn.opened is FALSE "" + ""ORDER BY pn.id desc "" "
/auth/AgentPattern/batchSave,No Input Parameters,No query
/auth/ActivityLog/saveActivityLog,No Input Parameters,No query
/aobConversion/AobSqlAdapter/findUserWidgetToggleStatement,No Input Parameters," def query = ""select * from mobilefirst.queryWidget('$params.userId') ORDER BY value_sort ASC"" "
/pushNotif/generateReportByText,No Input Parameters,No query
/security/Request/saveRequest,No Input Parameters,No query
/aobInterceptor/AobSqlAdapterX/checkAAJIQuotaCandidate,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getFastStartCityStatement,No Input Parameters," String query = ""SELECT DISTINCT(faststartlocation)  FROM aobfaststartschedule  where faststartenddate > current_date"" "
/auth/User/checkUsername,No Input Parameters," final String query = ""SELECT COUNT(*) FROM security.m_user m WHERE m.username LIKE '${username}'"" "
/proposal/NewOds/findFilterPolicyStatus,"""salesforceId"":pruforceId,""agentNumber"":agentNumber,""agentCode"":agentCode,""statusList"":statusList,""pageType"":PageType,""type"":type"," def query = ""SELECT DISTINCT(d.desc1) as name, a.policy_status as value "" + ""FROM ods.policy a "" + ""LEFT JOIN ods.client b ON a.owner_number = b.client_number "" + ""LEFT JOIN ods.system_code d ON a.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' "" + ""WHERE (a.agent_number = :agentNumber OR (a.agent_number IN :imPruList AND a.reff_agent = :agentNumber)) "" + ""AND a.policy_status IN (:statusList) "" + ""ORDER BY d.desc1 ASC "" "
/base/Menu/saveMenu,No Input Parameters,No query
/contest/AllContest/findAllBigContest,"""salesforceId"":salesforceId,""agentNumber"":agentNumber,""agentType"":agentType"," select * from contest.master where slide_show_flag = '1' and contest_type_code in ('P','C') "
/auth/User/getUsernamesByRole,No Input Parameters," final String query = ""SELECT a.username "" + ""FROM security.m_user a "" + ""JOIN security.m_user_role b on a.id = b.user_id "" + ""JOIN security.m_role c on c.id = b.role_id "" + ""WHERE c.authority = '$roleName'"" "
/client/findPolicylistByClientNumber,"""clientNumber"":clientNumber,""salesforceId"":pruforceId,""agentCode"":agentCode,""agentNumber"":agentCode"," String query = ""SELECT p.policy_number AS policy_number, p.owner_number AS client_number, n (SELECT desc1 FROM ods.system_code WHERE key1 like 'POLICY_STATUS' AND key2 = p.policy_status)AS policy_status, n (SELECT desc1 FROM ods.system_code WHERE key1 like 'PRODUCT' AND key2 = p.product_code)AS product_code FROM ods.policy p n WHERE p.policy_status in('DH','CC','CF','IF','MA','RD','SU','TP','TR','VF','LA') AND owner_number =:clientNumber"" "
/aobConversion/AobSqlAdapter/updateStatusPushNotificationStatement,No Input Parameters," String query = ""UPDATE pushnotification SET opened=true WHERE id = $params.id"" "
/auth/AgentPattern/deleteAgentPattern,No Input Parameters,No query
/followup/SecurityInterceptor/before,No Input Parameters,No query
/corp/banner/getBannerTitle,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/checkAAJIQuotaByNPA,"""npanumber"":npa"," def query = ""SELECT max(aajiexamscheduleid) as scheduleid FROM aobaajiexamregistration where candidateid = (select candidateid from aobcandidate where npanumber='$params.npanumber')"" "
,," query = ""SELECT aajiexamdate FROM aobaajiexamschedule where aajiexamscheduleid = '$scheduleid'"" "
/newsUpdateNew/News/getAgentType,No Input Parameters,No query
/followup/findTotalBillingUnitDetail,No Input Parameters," def query = ""SELECT count(*) as total, p.agent_number, ag.agent_type, b.client_name "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number "" + ""LEFT JOIN ods.client b ON ag.client_number = b.client_number "" + ""WHERE (p.agent_number IN (:list) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:list))) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND (to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop) "" + ""group by p.agent_number, ag.agent_type, b.client_name "" "
/client/findClientBirthdayAfterFourMonths,No Input Parameters,No query
/followup/findParamValue,No Input Parameters," def query = ""SELECT * FROM general.global_param where param_code = :code "" "
/base/MenuMobile/listMenu,No Input Parameters,No query
/base/User/getCurrentUser,No Input Parameters,No query
/auth/User/postUserRandomPassword,No Input Parameters,No query
/client/findProposallistByClientNumber,"""clientNumber"":clientNumber,""salesforceId"":pruforceId,""agentCode"":agentCode,""agentNumber"":agentCode"," String query = "" SELECT p.policy_number AS proposal_number, p.owner_number AS client_number, n (SELECT desc1 FROM ods.system_code WHERE key1 like 'POLICY_STATUS' AND key2 = p.policy_status)AS policy_status, n (SELECT desc1 FROM ods.system_code WHERE key1 like 'PRODUCT' AND key2 = p.product_code)AS product_code FROM ods.policy p n WHERE p.policy_status in('PR','PS','UW','DC','PO','WD') AND owner_number =:clientNumber"" "
/contest/ContestMaster/delete,No Input Parameters," if (contestMasterChild) return [message: ""Contest master with contestCode: ${data.contestCode} is contest parent and have contest, cannot delete it!"", status: 500] "
/approval/findUserTasksInProcess,No Input Parameters,No query
/newods/Production/findApiPolicyDetail,No Input Parameters," select 'reguler', sum(api_01) as api from ods.production where transaction_date between '$transactionDateStart' and '$transactionDateEnd' and policy_number = '$policyNumber' and premium_category = 'R' and billing_frequency != '00' group by policy_number union select 'single', sum(api_01) from ods.production where transaction_date between '$transactionDateStart' and '$transactionDateEnd' and policy_number = '$policyNumber' and premium_category = 'S' and billing_frequency = '00' and policy_count != 0 group by policy_number union select 'topup', sum(api_01) from ods.production where transaction_date between '$transactionDateStart' and '$transactionDateEnd' and policy_number = '$policyNumber' and premium_category = 'S' and billing_frequency = '00' and policy_count = 0 group by policy_number union select 'prusaver', sum(api_01) from ods.production where transaction_date between '$transactionDateStart' and '$transactionDateEnd' and policy_number = '$policyNumber' and premium_category = 'S' and billing_frequency != '00' and policy_count = 0 group by policy_number "
/base/Role/getMenuUrl,No Input Parameters,No query
/aobConversion/AobSqlAdapter/getDataMaritalStatusStatement,No Input Parameters," String query = ""SELECT aobsystemcodeid ,aobcodetype, aobitem, aoblongdescription  FROM aobsystemcode  "
/aobInterceptor/AobSqlAdapter/changeAAJIExamRegistrationByNPAStatement,No Input Parameters, UPDATE aobaajiexamregistration 
,," WHERE candidateid = ( SELECT candidateid FROM aobcandidate WHERE npanumber = '$params.npanumber' )"""""" "
/aobConversion/AobSqlAdapter/seqPushNotificationStatement,No Input Parameters," String query = ""SELECT nextval('pruaob.pushnotification_id_seq')"" "
/client/findClientBirthdayAfterOneMonth,No Input Parameters,No query
/auth/MenuMobile/getMenuDetail,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/getUnreadPushNotificationStatement,No Input Parameters," String query = ""SELECT id, userid, alert, payload, opened FROM pushnotification where opened = false AND userid = '$params.userid'"" "
/aobInterceptor/AobSqlAdapter/getListPendingDocStatement,"""statusapplication"":statusapp"," String query = ""select description from aobdescriptionstatus where statusapplication = '$params.statusapplication'"" "
/contest/Parameter/findAll,No Input Parameters," final String query = ""SELECT a.* FROM contest.master_parameter a n WHERE a.param_code not in (""+params+"") n AND a.param_type_code not in ('V', 'P') n AND a.param_type_code like '%""+paramType+""%'n ORDER BY a.param_code, a.param_sequence"" "
/corp/BannerApproval/findAllBannerHistory,No Input Parameters,No query
/base/AgentType/checkDuplicateName,No Input Parameters," final String query = ""SELECT COUNT(*) FROM security.m_agent_type m WHERE upper(m.name) = upper('${name}')"" "
/followup/findRecruitmentNew,No Input Parameters," SELECT a.id, a.userid, a.alert, a.payload, a.opened, a.time_stamp, c.module_name FROM notification.pushnotification a LEFT JOIN notification.pushnotification_event b ON a.event_id = b.id INNER JOIN notification.module c ON b.module_id = c.id WHERE a.userid = :agentNumber AND a.opened is FALSE AND date(a.time_stamp) > (CURRENT_DATE - (interval '1 day' * b.max_period)) AND c.module_name ilike 'RECRUITMENT' ORDER BY a.time_stamp DESC LIMIT $size OFFSET $start """""" "
/client/getTotalClientBirthDayTodoByAgent,"""salesforceId"":salesforceId,""agentCode"":agentCode,""agentNumber"":agentNumber,""pageType"":pageType"," String query = ""SELECT DISTINCT COUNT(*) AS totalClient FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number n WHERE DATE_PART('day', date_of_birth) = date_part('day', CURRENT_DATE) AND DATE_PART('month', date_of_birth) = date_part('month', CURRENT_DATE) n AND p.agent_number =:agentNumber"" "
/base/User/putUser,No Input Parameters,No query
/base/RoleMobile/checkAuthority,No Input Parameters,No query
/corp/MobileBanner/getBannerList,No Input Parameters," select id, title, start_publish_date, end_publish_date, description, banner_type_id, image_name from corporatebanner.t_banner where activated is true and end_publish_date > current_date and start_publish_date <= current_date order by start_publish_date limit $max """""" return queryService.executeQueryTransform(query) } "
/aobInterceptor/AobSqlAdapter/getAAJIScheduleIdByNPA,No Input Parameters," String query = ""SELECT max(aajiexamscheduleid) as scheduleid FROM aobaajiexamregistration where candidateid = (select candidateid from aobcandidate where npanumber='$params.npanumber')"" "
/auth/Role/getRole,No Input Parameters,No query
/client/findTotalBirthdayUnitDetail,No Input Parameters," /* String query = ""SELECT DISTINCT COUNT(*) AS total, p.agent_number as userId FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number n WHERE DATE_PART('day', date_of_birth) = date_part('day', CURRENT_DATE) AND DATE_PART('month', date_of_birth) = date_part('month', CURRENT_DATE) n AND p.agent_number IN (:list) GROUP BY p.agent_number"" "
,," whereClause = "" WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE))"" + "" AND date_of_birth IS NOT NULL "" "
,," String query = """""" select COUNT(*) AS total, agent_number as userId, client_number, client_name, array_to_string(array_agg(distinct tmp.role),'; ') as client_status, to_char(date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(date_of_birth)) AS old, address1, address2, address3, address4, address5 from ( select distinct b.client_number, c.client_name, sc.desc1 as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5, agent_number from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.beneficiary b on b.policy_number = p.policy_number join ods.client c on c.client_number = b.client_number join ods.system_code sc on sc.key2 = 'BN' AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} union select distinct cr.client_number, c.client_name, array_to_string(array_agg(distinct sc.desc1),'; ') as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5, p.agent_number from ( SELECT agent_number, policy_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.client_role cr on cr.policy_number = p.policy_number join ods.client c on c.client_number = cr.client_number join ods.system_code sc on sc.key2 = cr.client_role_code AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} ${filterByStatus} group by cr.client_number, date_of_birth, client_name, address1, address2, address3, address4, address5, agent_number ) tmp where client_name ILIKE ${paramsSearchBy} group by client_number, client_name, date_of_birth, address1, address2, address3, address4, address5, agent_number """""" "
,," SELECT COUNT(DISTINCT(client_number)) AS total, agent_number as userId FROM ( "
,," SELECT DISTINCT b.client_number , p.agent_number FROM ( SELECT policy_number, agent_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.beneficiary b on b.policy_number = p.policy_number JOIN ods.client c on c.client_number = b.client_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) "
,," SELECT DISTINCT cr.client_number, p.agent_number FROM ( SELECT policy_number, agent_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.client_role cr on cr.policy_number = p.policy_number JOIN ods.client c on c.client_number = cr.client_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) GROUP BY cr.client_number, p.agent_number ) as tmp group by agent_number """"""*/ "
,," SELECT COUNT(DISTINCT(client_number)) AS total, agent_number, agent_type FROM ( "
,," SELECT DISTINCT b.client_number , p.agent_number, ag.agent_type FROM ( SELECT policy_number, agent_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.beneficiary b on b.policy_number = p.policy_number JOIN ods.client c on c.client_number = b.client_number LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) "
,," SELECT DISTINCT cr.client_number, p.agent_number, ag.agent_type FROM ( SELECT policy_number, agent_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.client_role cr on cr.policy_number = p.policy_number JOIN ods.client c on c.client_number = cr.client_number LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) GROUP BY cr.client_number, p.agent_number, ag.agent_type ) as tmp group by agent_number, agent_type "
,," SELECT COUNT(DISTINCT(client_number)) AS total, agent_number, agent_type, client_name FROM ( "
,," SELECT DISTINCT b.client_number , p.agent_number, ag.agent_type, c.client_name FROM ( SELECT policy_number, agent_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.beneficiary b on b.policy_number = p.policy_number JOIN ods.client c on c.client_number = b.client_number LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) "
,," SELECT DISTINCT cr.client_number, p.agent_number, ag.agent_type,c.client_name FROM ( SELECT policy_number, agent_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.client_role cr on cr.policy_number = p.policy_number JOIN ods.client c on c.client_number = cr.client_number LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) GROUP BY cr.client_number, p.agent_number, ag.agent_type, ag.agent_number, c.client_name ) as tmp group by agent_number, agent_type, client_name "
,," SELECT COUNT(DISTINCT(client_number)) AS total, agent_number, agent_type, client_name FROM ( "
,," SELECT DISTINCT b.client_number , p.agent_number, ag.agent_type, c2.client_name FROM ( SELECT policy_number, agent_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.beneficiary b on b.policy_number = p.policy_number LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number LEFT JOIN ods.client c2 ON ag.client_number = c2.client_number WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) "
,," SELECT DISTINCT cr.client_number, p.agent_number, ag.agent_type,c2.client_name FROM ( SELECT policy_number, agent_number FROM ods.policy WHERE (agent_number IN (:list) OR (agent_number IN :imPruList AND reff_agent IN (:list))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p JOIN ods.client_role cr on cr.policy_number = p.policy_number JOIN ods.client c on c.client_number = cr.client_number LEFT JOIN ods.agent ag ON p.agent_number = ag.agent_number LEFT JOIN ods.client c2 ON ag.client_number = c2.client_number WHERE DATE_PART('day', c.date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', c.date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) GROUP BY cr.client_number, p.agent_number, ag.agent_type, ag.agent_number, c2.client_name ) as tmp group by agent_number, agent_type, client_name "
/aobInterceptor/AobSqlAdapter/getAajiCanStm,"""npanumber"":npa"," select b.aajiexamlocation, b.aajiexamscheduleid, b.aajiexamdate, b.aajiexamstarttime, b.aajiexamendtime from aobaajiexamregistration a inner join aobaajiexamschedule b on a.aajiexamscheduleid = b.aajiexamscheduleid where a.aobaajiexamregistrationid = (select max(aobaajiexamregistrationid) from aobaajiexamregistration "
, select candidateid from aobcandidate ,
/followup/findTotalTodoPD,No Input Parameters," def query = """""" SELECT ( SELECT count(f.fup_key) FROM ods.follow_up f LEFT JOIN ods.policy p ON f.policy_number = p.policy_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.valid_flag = '3' AND f.follow_up_status IN ('L','M','P','O') AND p.policy_status IN ('PS','UW') and to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop ) + ( SELECT count(f.fup_key) FROM ods.follow_up f LEFT JOIN ods.policy p ON f.policy_number = p.policy_number LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.valid_flag = '1' AND f.follow_up_status IN ('L','M','P','O') AND a.department IN ('CLAIM','PHS','BILLING') AND a.alteration_status IN ('O','F') AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop ) + ( SELECT count(p.policy_number) FROM ods.policy p LEFT JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'IF' AND p.billing_channel = 'A' ) + ( SELECT count(p.policy_number) FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'IF' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE - INTERVAL '44 days') AND CURRENT_DATE ) + ( SELECT count(p.policy_number) FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'LA' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE - INTERVAL '729 days') AND (CURRENT_DATE - INTERVAL '45 days') ) + ( SELECT COUNT(DISTINCT(p.owner_number)) FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND (DATE_PART('day', c.date_of_birth) = DATE_PART('day', CURRENT_DATE) AND DATE_PART('month', c.date_of_birth) = DATE_PART('month', CURRENT_DATE)) ) as total """""" "
/followup/findAfterDueDatePolicyInCancelPeriodPD,No Input Parameters," def query = """""" SELECT temp.agent_number, a.agent_type, c.client_name, SUM(temp.total) as total FROM ods.agent a INNER JOIN ( -- beforeduedate SELECT t.agent_number, 0 as total FROM ( SELECT p.agent_number, count(c.client_number) as total FROM ods.policy p LEFT JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'IF' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE) AND (CURRENT_DATE + INTERVAL '${paramBeforeDueDate} days') GROUP BY p.agent_number ) as t "
,," SELECT tp.agent_number, SUM(tp.total) FROM ( SELECT t.agent_number, SUM(t.total) as total FROM ( SELECT p.agent_number, COUNT(c.client_number) as total FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'IF' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE - INTERVAL '44 days') AND CURRENT_DATE GROUP BY p.agent_number, c.client_name ) as t GROUP BY t.agent_number "
,," SELECT t.agent_number, SUM(t.total) FROM ( SELECT p.agent_number, COUNT(c.client_number) as total FROM ods.policy p INNER JOIN ods.client c ON p.owner_number = c.client_number WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'LA' AND p.billing_channel != 'A' AND p.paid_to_date BETWEEN (CURRENT_DATE - INTERVAL '729 days') AND (CURRENT_DATE - INTERVAL '45 days') GROUP BY p.agent_number, c.client_name ) as t GROUP BY t.agent_number ) AS tp GROUP BY tp.agent_number "
,," SELECT p.agent_number, count(c.client_number) as total FROM ods.policy p LEFT JOIN ods.client c ON p.owner_number = c.client_number LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 WHERE (p.agent_number IN (:queryUnit) OR (p.agent_number IN :imPruList AND p.reff_agent IN (:queryUnit))) AND p.policy_status = 'IF' AND p.billing_channel = 'A' AND sc.key1 like 'POLICY_STATUS' GROUP BY p.agent_number "
,," query = query + ""WHERE a.agent_type = :filter "" } "
/base/Processor/saveProcessGroup,No Input Parameters,No query
/auth/Request/saveRequest,No Input Parameters,No query
/client/findBirthdayListWeekly,"""agentNumber"":agentNumber,""page"":page,""size"":size,""salesforceId"":pruforceId,""agentCode"":agentCode"," String query = ""SELECT DISTINCT c.client_number AS client_number,c.client_name AS client_name, c.address1 as address1,n c.address2 as address2,c.address3 as address3,c.address4 as address4,c.address5 as address5, n to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c n LEFT JOIN ods.policy p ON p.owner_number = c.client_number WHERE p.agent_number =:agentNumber n AND right(to_char(date_of_birth,'yyyy-mm-dd'),5) in ( select right(to_char((generate_series(current_date, (current_date + 7), '1 day')),'yyyy-mm-dd'),5))"" "
/aobConversion/AobSqlAdapter/checkAAJIValidforAgentBeforeHourStatement,No Input Parameters," String query = ""SELECT a.aajiexamexpireddate >= current_date as isvalidexpireddate,  a.aajiexamdate >= current_date + 4 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT)  and a.aajiexamdate < current_date + 17 as isvalidexamdate  FROM aobaajiexamschedule a  left join ref_aajiquotacount b  on a.aajiexamscheduleid=b.aajiexamscheduleid  where a.aajiexamscheduleid=$params.aajiexamscheduleid"" "
/base/Role/putRole,No Input Parameters,No query
/followup/findTotalPolicyHolderPendingRequirement,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.alteration a ON f.alteration_number = a.alteration_number AND f.policy_number = a.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '1' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND lower(a.department) like lower(:department) "" + ""AND a.alteration_status in ('O','F') "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/followup/findTotalAfterDueDate,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.policy p "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.policy_status = 'IF' "" + ""AND p.billing_channel = 'A' "" + ""AND sc.key1 like 'POLICY_STATUS' "" "
/base/Processor/findBatch,No Input Parameters,No query
/persistency/Newods/findAllAgentTypeCR,"""agentNumber"":agentNumber,""persistencyCode"":persistencyCode,""salesforceId"":salesforceId,""agentCode"":agentCode,""period"":period,""channelType"":channelType"," query = """""" SELECT a.agent_type FROM ods.agent a WHERE a.agent_number = :leaderNumber """""" "
,," query = """""" SELECT DISTINCT a.agent_type_original as key, a.agent_type_original as value FROM ods.persistency_detail p, ods.agent_hierarchy a WHERE p.agent_number = a.agent_number AND ((a.leader_number = :leaderNumber AND a.agent_type_original IN (${getAgentType(""Individual"",""${channel}"")})) $agentLeader) AND to_char(p.period,'MM-YYYY') = '${request.period}' """""" queryC = queryListAPI(""Unit"", ""ods.persistency"", """", request.period, channel) queryR = queryListAPI(""Unit"", ""ods.new_persistency"", """", request.period, channel) } } else { "
,," query = """""" SELECT agt.agent_type as key, agt.agent_type as value FROM (SELECT DISTINCT a.agent_type_original as agent_type FROM ods.agent_hierarchy a LEFT JOIN ods.persistency p ON p.agent_number = a.agent_number and to_char(p.period,'MM-YYYY') in (select to_char(max(date_period), 'MM-YYYY') from ods.controlfile_new where file_name = 'NEW_PERSISTENCY.TXT') AND p.prscty_code = 'I' LEFT JOIN ods.new_persistency np ON np.agent_number = a.agent_number and to_char(np.period,'MM-YYYY') in (select to_char(max(date_period), 'MM-YYYY') from ods.controlfile_new where file_name = 'NEW_PERSISTENCY.TXT') AND np.prscty_code = 'I' WHERE ${prscty} GROUP BY a.agent_type_original) as agt LEFT JOIN ods.system_code sc ON sc.key2 = agt.agent_type WHERE sc.key1 = 'AGENT_TYPE_CHANNEL' """""" } "
/performanceMonitoring/PromotionChallenge/getLastUpdate,"""id"":id"," select max(to_date(last_date, 'YYYY/MM/DD')) as date from general.batch where cast (array['${data.id}'] as text[]) && (regexp_split_to_array(regexp_replace(affected_code, '^s+', '', ''),',')); """""" "
/base/AgentType/deleteAgentType,No Input Parameters,No query
/client/findBirthdayListTodoPD,"""salesforceId"":salesforceId,""agentCode"":agentCode,""agentNumber"":agentCode,""filter"":filterBy,""sort"":sortDir,""size"":size,""page"":page,""month"":15"," whereClause= ""WHERE c.date_of_birth IS NOT NULL "" orderBy = paramOrder } else if (params.month.toString().equalsIgnoreCase(""15"")){ whereClause = "" WHERE DATE_PART('day', date_of_birth) = date_part('day', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) AND DATE_PART('month', date_of_birth) = date_part('month', CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) "" orderBy = paramOrder } "
,," String query = """""" select agent_number, client_name, agent_type, count(client_number) as total from ( select client_number, agent_number, client_name, agent_type from ( select distinct b.client_number, sc.desc1 as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5, p.agent_number, p.client_name, p.agent_type from ( SELECT p1.agent_number, policy_number, c1.client_name, a1.agent_type FROM ods.policy p1 JOIN ods.agent a1 on p1.agent_number = a1.agent_number JOIN ods.client c1 on a1.client_number = c1.client_number WHERE (p1.agent_number IN :queryUnit OR (p1.agent_number IN :imPruList AND p1.reff_agent IN (:queryUnit))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.beneficiary b on b.policy_number = p.policy_number join ods.client c on c.client_number = b.client_number join ods.system_code sc on sc.key2 = 'BN' AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} union select distinct cr.client_number, array_to_string(array_agg(distinct sc.desc1),'; ') as role, date_of_birth, c.address1, c.address2, c.address3, c.address4, c.address5, p.agent_number, p.client_name, p.agent_type from ( SELECT p1.agent_number, policy_number, c1.client_name, a1.agent_type FROM ods.policy p1 JOIN ods.agent a1 on p1.agent_number = a1.agent_number JOIN ods.client c1 on a1.client_number = c1.client_number WHERE (p1.agent_number IN :queryUnit OR (p1.agent_number IN :imPruList AND p1.reff_agent IN (:queryUnit))) AND (policy_status = 'IF' OR policy_status = 'LA' AND cast(paid_to_date + interval '18 month' AS date) > CAST((CURRENT_DATE AT TIME ZONE 'cxt') AS DATE)) ) p join ods.client_role cr on cr.policy_number = p.policy_number join ods.client c on c.client_number = cr.client_number join ods.system_code sc on sc.key2 = cr.client_role_code AND sc.key1 = 'CONTRACT_RELATION' ${whereClause} group by cr.client_number, date_of_birth, address1, address2, address3, address4, address5, agent_number, p.client_name, agent_type ) tmp group by client_number, date_of_birth, address1, address2, address3, address4, address5, agent_number, client_name, agent_type ) as res group by agent_number, client_name, agent_type order by ${orderBy} LIMIT CAST(${max} AS NUMERIC ) OFFSET CAST(${min} AS NUMERIC) """""" "
/followup/findClaimPendingRequirementPD,No Input Parameters," def query = """""" SELECT t.agent_number, a.agent_type, c.client_name, SUM(t.fup_total) as total FROM ods.agent a INNER JOIN ( SELECT b.agent_number, b.policy_number, c.client_name, count(a.fup_key) as fup_total FROM ods.follow_up a LEFT JOIN ods.policy b ON a.policy_number = b.policy_number LEFT JOIN ods.client c ON b.owner_number = c.client_number LEFT JOIN ods.system_code d ON b.policy_status = d.key2 AND d.key1 = 'POLICY_STATUS' LEFT JOIN ods.alteration e ON a.alteration_number = e.alteration_number AND a.policy_number = e.policy_number LEFT JOIN ods.system_code f ON b.product_code = f.key2 AND f.key1 = 'PRODUCT' WHERE (b.agent_number IN (:queryUnit) OR (b.agent_number IN :imPruList AND b.reff_agent IN (:queryUnit))) AND b.valid_flag = '1' AND a.follow_up_status IN ('L','M','P','O') AND e.department = :department AND e.alteration_status IN ('O','F') AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(a.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop GROUP BY b.agent_number, b.policy_number, c.client_name ) AS t ON a.agent_number = t.agent_number LEFT JOIN ods.client c ON a.client_number = c.client_number """""" "
," query = query + ""WHERE a.agent_type = :filter "" } ",
/aobInterceptor/AobSqlAdapter/findUserPermittedStatement,"""pruforceId"":pruforceId"," def query = ""SELECT CASE WHEN (SELECT COUNT(pruforceid) FROM mobilefirst.user_permitted) = 0 THEN true ELSE CASE WHEN count(pruforceid) > 0 THEN true ELSE false END END AS statuspermitted "" + ""FROM mobilefirst.user_permitted WHERE pruforceid = '$params.pruforceId'"" "
/newsUpdateNew/MobileNews/newsListMobile,No Input Parameters," SELECT a.id, a.title, a.start_publish_date, a.end_publish_date, a.description, a.news_type_id, a.agent_type, a.image_name, a.file_name, b.type_name, b.type_file FROM newsupdate.t_news a, newsupdate.m_news_type b WHERE activated is true and cast (array['${agentTypeId}'] as text[]) && (regexp_split_to_array(regexp_replace(agent_type, '^', '', ''),',')) and end_publish_date > cast(now() at time zone '${ timeZone }' as date) and start_publish_date <= cast(now() at time zone '${timeZone}' as date) and a.news_type_id = b.id """""" "
/base/User/postUserRandomPassword,No Input Parameters,No query
/auth/AgentType/getChannelTypeById,No Input Parameters, select * from security.m_channel_type 
/commonUtils/Approval/payload,No Input Parameters," def approval = Approval.findAll(""FROM Approval a WHERE a.trxNo = '${trxNo}' ORDER BY a.dcisionDate"", [max: 1]) if(!approval) { return [status: 500, message: ""No record found for TrxNo ${trxNo}"", content: null] } "
/aobInterceptor/AobSqlAdapter/getDateAgentJourney,"""npanumber"":npa"," String query = ""select distinct createdate from aobapplicationpackstatus where headstatusid = '50' and candidateid = (select candidateid from aobcandidate where npanumber = '$params.npanumber')"" "
/client/findStatusBirthdayListJuly,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =7 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/newsUpdateNew/BankUnit/deleteBankUnit,No Input Parameters,No query
/aobInterceptor/AobSqlAdapter/getAAJIExamAfterHourStatement,No Input Parameters," String query = """"""SELECT a.* FROM aobaajiexamschedule a left join ref_aajiquotacount b on a.aajiexamscheduleid=b.aajiexamscheduleid where aajiexamdate > current_date + 4 + cast((cast(EXTRACT(HOUR FROM CURRENT_TIMESTAMP ) AS INT) > 4 ) AS INT) and aajiexamdate < current_date + 17 and (b.reserved is null or cast(b.reserved as int)<a.aajiexamquota ) ORDER BY aajiexamdate ASC, aajiexamsession ASC """""" return queryService.executeQuery(query) } "
/newsUpdateNew/UploadImage/upload,No Input Parameters,No query
/auth/UserManagementInterceptor/before,No Input Parameters,No query
/followup/findStatusNtuCase,No Input Parameters," def query = ""SELECT distinct(p.policy_status) as key, sc.desc1 as description "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""LEFT JOIN ods.client c ON p.owner_number = c.client_number "" + ""LEFT JOIN ods.system_code sc ON p.policy_status = sc.key2 "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '3' AND sc.key1 like 'POLICY_STATUS' "" + ""AND f.follow_up_status in ('L','M','P','O') AND p.policy_status IN (:statusList) "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/followup/findTotalNtuCaseUnit,No Input Parameters," def query = ""SELECT count(*) as total "" + ""FROM ods.follow_up f "" + ""LEFT JOIN ods.policy p ON f.policy_number = p.policy_number "" + ""WHERE (p.agent_number = :agentNumber OR (p.agent_number IN :imPruList AND p.reff_agent = :agentNumber)) "" + ""AND p.valid_flag = '3' "" + ""AND f.follow_up_status in ('L','M','P','O') "" + ""AND p.policy_status in (:statusList) "" + ""AND to_char(f.follow_up_reminder_date,'YYYY-MM-DD') >= :periodStart and to_char(f.follow_up_reminder_date,'YYYY-MM-DD') <= :periodStop "" "
/client/findStatusBirthdayListJune,No Input Parameters," String query = ""select distinct sc.desc1 as client_status from ( select * from( SELECT c.client_number AS client_number, c.client_name AS client_name, c.address1 AS address1, c.address2 AS address2, c.address3 AS address3, c.address4 AS address4, c.address5 AS address5, to_char(c.date_of_birth, 'FMDD FMMonth YYYY') AS date_of_birth, date_part('year',age(c.date_of_birth)) AS old FROM ods.client c LEFT JOIN (select distinct owner_number, agent_number from ods.policy) p on c.client_number = p.owner_number where p.agent_number =:agentNumber AND DATE_PART('month', c.date_of_birth ) =6 ) tmp ) c LEFT JOIN ods.client_role cr ON cr.client_number = c.client_number lEFT JOIN ods.system_code sc ON cr.client_role_code = sc.key2 where sc.key1= 'CONTRACT_RELATION'"" "
/contest/Base/listPaging,No Input Parameters," select * from $tableName ${sort ? ""order by "" + sort + "" $order"" : """"} limit ${max} offset ${(page - 1) * max} """""" return queryService.executeQueryTransform(query) } } "
/productionHistory/NewOds/findLastUpdate,"""salesforceId"":salesforceId,""agentCode"":agentCode"," def query = ""SELECT MAX(time_tracking) as latest FROM monitoring.execution_status WHERE table_name IN ('SZAPD') AND step_status = 'DONE'"" "
/contest/AllContest/getLastUpdate,"""contestCode"":contestCode"," select max(to_date(last_date, 'YYYY/MM/DD')) as date from general.batch where cast (array['${data.contestCode}'] as text[]) && (regexp_split_to_array(regexp_replace(affected_code, '^s+', '', ''),',')); """""" "
/followup/findRecruitment,No Input Parameters," def query = ""SELECT pn.* "" + ""FROM pruaob.pushnotification pn "" + ""WHERE pn.userid = :agentNumber AND pn.opened is FALSE "" + ""ORDER BY pn.id desc "" "
/aobConversion/AobSqlAdapter/getSosmedCanStm,No Input Parameters," String query = ""select candidateid ,aobsocialnetworkid, socialnetworktype, accountname  from aobsocialnetwork  "
, select candidateid  from aobcandidate  ,
/aobConversion/AobSqlAdapter/getDataOfficeCodeStatement,No Input Parameters," String query = ""SELECT officecode,gafullname FROM aobofficecentraladmin where activeflag = '1'"" "
/newods/AgentHierarchy/findAllTotalDirectAM ,No Input Parameters," select leader_number as agent_number,count(*) as total from ods.agent_hierarchy where leader_number in ${queryService.convertListToString(data.agentNumberList)} and gent_type_original = 'AM' and agent_number != leader_number group by leader_number order by leader_number """""" return queryService.executeQueryTransform(query) } "
/newsUpdateNew/News/findNewsType,No Input Parameters," select * from newsupdate.m_news_type """""" "
